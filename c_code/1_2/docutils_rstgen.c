/* Generated by Nim Compiler v0.13.0 */
/*   (c) 2015 Andreas Rumpf */
/* The generated code is subject to the original license. */
#define NIM_INTBITS 64

#include "nimbase.h"
#include <string.h>
#include <stdio.h>
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct Cell47304 Cell47304;
typedef struct TNimType TNimType;
typedef struct Cellseq47320 Cellseq47320;
typedef struct Gcheap49618 Gcheap49618;
typedef struct Gcstack49616 Gcstack49616;
typedef struct Cellset47316 Cellset47316;
typedef struct Pagedesc47312 Pagedesc47312;
typedef struct Memregion29488 Memregion29488;
typedef struct Smallchunk29440 Smallchunk29440;
typedef struct Llchunk29482 Llchunk29482;
typedef struct Bigchunk29442 Bigchunk29442;
typedef struct Intset29414 Intset29414;
typedef struct Trunk29410 Trunk29410;
typedef struct Avlnode29486 Avlnode29486;
typedef struct Gcstat49614 Gcstat49614;
typedef struct Rstgenerator328010 Rstgenerator328010;
typedef struct Rstnode315008 Rstnode315008;
typedef struct Rstnodeseq315006 Rstnodeseq315006;
typedef struct TNimObject TNimObject;
typedef struct TNimNode TNimNode;
typedef struct Stringtableobj143209 Stringtableobj143209;
typedef struct TY328029 TY328029;
typedef struct Table328047 Table328047;
typedef struct Keyvaluepairseq328050 Keyvaluepairseq328050;
typedef struct Tocentry328006 Tocentry328006;
typedef struct Codeblockparams328014 Codeblockparams328014;
typedef struct Keyvaluepair143205 Keyvaluepair143205;
typedef struct Generaltokenizer323008 Generaltokenizer323008;
typedef struct TY117115 TY117115;
typedef struct TY331850 TY331850;
typedef struct TY127402 TY127402;
typedef struct TY331853 TY331853;
typedef struct Indexentry329126 Indexentry329126;
typedef struct Table329139 Table329139;
typedef struct Keyvaluepairseq329142 Keyvaluepairseq329142;
typedef struct Win32finddata107213 Win32finddata107213;
typedef struct Filetime106255 Filetime106255;
typedef struct Keyvaluepair329145 Keyvaluepair329145;
typedef struct TY329582 TY329582;
typedef struct TY329583 TY329583;
typedef struct Slice89480 Slice89480;
typedef struct Basechunk29438 Basechunk29438;
typedef struct Freecell29430 Freecell29430;
typedef struct Keyvaluepairseq143207 Keyvaluepairseq143207;
typedef struct Keyvaluepair328053 Keyvaluepair328053;
struct  TGenericSeq  {
NI len;
NI reserved;
};
struct  NimStringDesc  {
  TGenericSeq Sup;
NIM_CHAR data[SEQ_DECL_SIZE];
};
struct  Cell47304  {
NI refcount;
TNimType* typ;
};
struct  Cellseq47320  {
NI len;
NI cap;
Cell47304** d;
};
struct  Cellset47316  {
NI counter;
NI max;
Pagedesc47312* head;
Pagedesc47312** data;
};
typedef Smallchunk29440* TY29503[512];
typedef Trunk29410* Trunkbuckets29412[256];
struct  Intset29414  {
Trunkbuckets29412 data;
};
struct  Memregion29488  {
NI minlargeobj;
NI maxlargeobj;
TY29503 freesmallchunks;
Llchunk29482* llmem;
NI currmem;
NI maxmem;
NI freemem;
NI lastsize;
Bigchunk29442* freechunkslist;
Intset29414 chunkstarts;
Avlnode29486* root;
Avlnode29486* deleted;
Avlnode29486* last;
Avlnode29486* freeavlnodes;
};
struct  Gcstat49614  {
NI stackscans;
NI cyclecollections;
NI maxthreshold;
NI maxstacksize;
NI maxstackcells;
NI cycletablesize;
NI64 maxpause;
};
struct  Gcheap49618  {
Gcstack49616* stack;
void* stackbottom;
NI cyclethreshold;
Cellseq47320 zct;
Cellseq47320 decstack;
Cellset47316 cycleroots;
Cellseq47320 tempstack;
NI recgclock;
Memregion29488 region;
Gcstat49614 stat;
};
struct  Rstnode315008  {
NU8 kind;
NimStringDesc* text;
NI level;
Rstnodeseq315006* sons;
};
typedef N_NIMCALL_PTR(void, TY3489) (void* p, NI op);
typedef N_NIMCALL_PTR(void*, TY3494) (void* p);
struct  TNimType  {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
TY3489 marker;
TY3494 deepcopy;
};
struct  TNimObject  {
TNimType* m_type;
};
typedef N_NIMCALL_PTR(NimStringDesc*, Findfilehandler316014) (NimStringDesc* filename);
typedef N_NIMCALL_PTR(void, Msghandler316012) (NimStringDesc* filename, NI line, NI col, NU8 msgkind, NimStringDesc* arg);
typedef NimStringDesc* TY328039[5];
struct  Table328047  {
Keyvaluepairseq328050* data;
NI counter;
};
struct  Rstgenerator328010  {
  TNimObject Sup;
NU8 target;
Stringtableobj143209* config;
NI splitafter;
NI listingcounter;
TY328029* tocpart;
NIM_BOOL hastoc;
NimStringDesc* theindex;
NU8 options;
Findfilehandler316014 findfile;
Msghandler316012 msghandler;
NimStringDesc* filename;
TY328039 meta;
NimStringDesc* currentsection;
Table328047 seenindexterms;
};
struct  Tocentry328006  {
Rstnode315008* n;
NimStringDesc* refname;
NimStringDesc* header;
};
typedef NimStringDesc* TY187781[4];
typedef NimStringDesc* TY185752[1];
typedef NU8 TY204404[32];
typedef NimStringDesc* TY186169[2];
struct  Codeblockparams328014  {
NIM_BOOL numberlines;
NI startline;
NimStringDesc* langstr;
NU8 lang;
};
struct Keyvaluepair143205 {
NimStringDesc* Field0;
NimStringDesc* Field1;
};
typedef NimStringDesc* TY240694[1];
struct  Generaltokenizer323008  {
  TNimObject Sup;
NU8 kind;
NI start;
NI length;
NCSTRING buf;
NI pos;
NU8 state;
};
struct  TNimNode  {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
typedef NimStringDesc* TY323069[33];
struct TY117115 {
NimStringDesc* Field0;
NimStringDesc* Field1;
NimStringDesc* Field2;
};
struct  Indexentry329126  {
NimStringDesc* keyword;
NimStringDesc* link;
NimStringDesc* linktitle;
NimStringDesc* linkdesc;
};
struct  Table329139  {
Keyvaluepairseq329142* data;
NI counter;
};
struct TY331850 {
TY127402* Field0;
TY331853* Field1;
Table329139 Field2;
};
struct  Filetime106255  {
NI32 dwlowdatetime;
NI32 dwhighdatetime;
};
typedef NI16 TY107224[260];
typedef NI16 TY107227[14];
struct  Win32finddata107213  {
NI32 dwfileattributes;
Filetime106255 ftcreationtime;
Filetime106255 ftlastaccesstime;
Filetime106255 ftlastwritetime;
NI32 nfilesizehigh;
NI32 nfilesizelow;
NI32 dwreserved0;
NI32 dwreserved1;
TY107224 cfilename;
TY107227 calternatefilename;
};
typedef N_STDCALL_PTR(NI32, TY107236) (NI hfindfile, Win32finddata107213* lpfindfiledata);
typedef N_STDCALL_PTR(void, TY107402) (NI hfindfile);
typedef struct {
N_NIMCALL_PTR(NI, ClPrc) (NimStringDesc* x_332475, NimStringDesc* y_332477, void* ClEnv);
void* ClEnv;
} TY332473;
typedef N_CLOSURE_PTR(NI, TMP5202) (NimStringDesc* x_332462, NimStringDesc* y_332464, void* ClEnv);
struct Keyvaluepair329145 {
NI Field0;
Indexentry329126 Field1;
TY331853* Field2;
};
typedef struct {
N_NIMCALL_PTR(NI, ClPrc) (Indexentry329126* x_330575, Indexentry329126* y_330577, void* ClEnv);
void* ClEnv;
} TY330573;
typedef N_CLOSURE_PTR(NI, TMP5206) (Indexentry329126* x_331720, Indexentry329126* y_331722, void* ClEnv);
typedef N_CLOSURE_PTR(NI, TMP5216) (Indexentry329126* x_330562, Indexentry329126* y_330564, void* ClEnv);
struct TY329583 {
NI Field0;
NimStringDesc* Field1;
};
struct  Slice89480  {
NI a;
NI b;
};
typedef NimStringDesc* TY186156[3];
struct  Gcstack49616  {
Gcstack49616* prev;
Gcstack49616* next;
void* starts;
void* pos;
NI maxstacksize;
};
typedef NI TY29419[8];
struct  Pagedesc47312  {
Pagedesc47312* next;
NI key;
TY29419 bits;
};
struct  Basechunk29438  {
NI prevsize;
NI size;
NIM_BOOL used;
};
struct  Smallchunk29440  {
  Basechunk29438 Sup;
Smallchunk29440* next;
Smallchunk29440* prev;
Freecell29430* freelist;
NI free;
NI acc;
NF data;
};
struct  Llchunk29482  {
NI size;
NI acc;
Llchunk29482* next;
};
struct  Bigchunk29442  {
  Basechunk29438 Sup;
Bigchunk29442* next;
Bigchunk29442* prev;
NI align;
NF data;
};
struct  Trunk29410  {
Trunk29410* next;
NI key;
TY29419 bits;
};
typedef Avlnode29486* TY29493[2];
struct  Avlnode29486  {
TY29493 link;
NI key;
NI upperbound;
NI level;
};
struct  Stringtableobj143209  {
  TNimObject Sup;
NI counter;
Keyvaluepairseq143207* data;
NU8 mode;
};
struct Keyvaluepair328053 {
NI Field0;
NimStringDesc* Field1;
NI Field2;
};
struct  Freecell29430  {
Freecell29430* next;
NI zerofield;
};
struct TY328029 {
  TGenericSeq Sup;
  Tocentry328006 data[SEQ_DECL_SIZE];
};
struct Rstnodeseq315006 {
  TGenericSeq Sup;
  Rstnode315008* data[SEQ_DECL_SIZE];
};
struct TY127402 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
struct TY331853 {
  TGenericSeq Sup;
  Indexentry329126 data[SEQ_DECL_SIZE];
};
struct TY329582 {
  TGenericSeq Sup;
  TY329583 data[SEQ_DECL_SIZE];
};
struct Keyvaluepairseq328050 {
  TGenericSeq Sup;
  Keyvaluepair328053 data[SEQ_DECL_SIZE];
};
struct Keyvaluepairseq329142 {
  TGenericSeq Sup;
  Keyvaluepair329145 data[SEQ_DECL_SIZE];
};
struct Keyvaluepairseq143207 {
  TGenericSeq Sup;
  Keyvaluepair143205 data[SEQ_DECL_SIZE];
};
N_NIMCALL(NimStringDesc*, copyStringRC1)(NimStringDesc* src);
static N_INLINE(void, nimGCunrefNoCycle)(void* p);
static N_INLINE(Cell47304*, usrtocell_51240)(void* usr);
static N_INLINE(void, rtladdzct_52801)(Cell47304* c);
N_NOINLINE(void, addzct_51217)(Cellseq47320* s, Cell47304* c);
N_NIMCALL(void, renderaux_328606)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result);
N_NIMCALL(NI, len_315081)(Rstnode315008* n);
N_NIMCALL(void, renderrsttoout_328599)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result);
N_NIMCALL(void, renderheadline_334043)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* src);
N_NIMCALL(void, unsureAsgnRef)(void** dest, void* src);
N_NIMCALL(NimStringDesc*, rstnodetorefname_316049)(Rstnode315008* n);
static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src);
N_NIMCALL(NimStringDesc*, rawNewString)(NI space);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* seq, NI elemsize, NI newlen);
static N_INLINE(void, asgnRefNoCycle)(void** dest, void* src);
N_NIMCALL(void, dispa_328576)(NU8 target, NimStringDesc** dest, NimStringDesc* xml, NimStringDesc* tex, NimStringDesc** args, NI argsLen0);
N_NIMCALL(void, nsuAddf)(NimStringDesc** s, NimStringDesc* formatstr, NimStringDesc** a, NI aLen0);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI x);
N_NIMCALL(NimStringDesc*, nimCharToStr)(NIM_CHAR x);
N_NIMCALL(void, setindexterm_328683)(Rstgenerator328010* d, NimStringDesc* id, NimStringDesc* term, NimStringDesc* linktitle, NimStringDesc* linkdesc);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* s, NIM_CHAR c);
N_NIMCALL(NimStringDesc*, noschangeFileExt)(NimStringDesc* filename, NimStringDesc* ext);
N_NIMCALL(NimStringDesc*, nosextractFilename)(NimStringDesc* path);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* dest, NI addlen);
static N_INLINE(void, appendChar)(NimStringDesc* dest, NIM_CHAR c);
N_NIMCALL(NimStringDesc*, quoteindexcolumn_328675)(NimStringDesc* text);
N_NIMCALL(NimStringDesc*, nsuReplaceStr)(NimStringDesc* s, NimStringDesc* sub, NimStringDesc* by);
N_NIMCALL(void, insert_90801)(NimStringDesc** x, NimStringDesc* item, NI i);
N_NIMCALL(NimStringDesc*, striptochtml_334035)(NimStringDesc* s);
N_NIMCALL(NI, nsuFindChar)(NimStringDesc* s, NIM_CHAR sub, NI start);
N_NIMCALL(void, nsuDelete)(NimStringDesc** s, NI first, NI last);
N_NIMCALL(NimStringDesc*, nsuRepeatChar)(NIM_CHAR c, NI count);
N_NIMCALL(void, renderoverline_334221)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result);
N_NIMCALL(void, renderaux_328632)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc* frmta, NimStringDesc* frmtb, NimStringDesc** result);
N_NIMCALL(void, renderfield_335874)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result);
N_NIMCALL(NimStringDesc*, addnodes_316052)(Rstnode315008* n);
N_NIMCALL(NimStringDesc*, esc_328484)(NU8 target, NimStringDesc* s, NI splitafter);
N_NIMCALL(NI, nextsplitpoint_328449)(NimStringDesc* s, NI start);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* a, NimStringDesc* b);
static N_INLINE(void, escchar_328443)(NU8 target, NimStringDesc** dest, NIM_CHAR c);
N_NIMCALL(void, addxmlchar_328426)(NimStringDesc** dest, NIM_CHAR c);
N_NIMCALL(void, addtexchar_328436)(NimStringDesc** dest, NIM_CHAR c);
N_NIMCALL(NimStringDesc*, nsuStrip)(NimStringDesc* s, NIM_BOOL leading, NIM_BOOL trailing, TY204404 chars);
N_NIMCALL(NI, nsuCmpIgnoreStyle)(NimStringDesc* a, NimStringDesc* b);
N_NOINLINE(void, raiseassert_89893)(NimStringDesc* msg);
N_NIMCALL(NimStringDesc*, texcolumns_335850)(Rstnode315008* n);
N_NIMCALL(Rstnode315008*, lastson_315126)(Rstnode315008* n);
N_NIMCALL(void, renderimage_334335)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result);
N_NIMCALL(NimStringDesc*, getfieldvalue_316055)(Rstnode315008* n, NimStringDesc* fieldname);
N_NIMCALL(NIM_BOOL, allcharsinset_101325)(NimStringDesc* s, TY204404 theset);
N_NIMCALL(NimStringDesc*, dispf_328559)(NU8 target, NimStringDesc* xml, NimStringDesc* tex, NimStringDesc** args, NI argsLen0);
N_NIMCALL(NimStringDesc*, nsuFormatOpenArray)(NimStringDesc* formatstr, NimStringDesc** a, NI aLen0);
N_NIMCALL(NimStringDesc*, getargument_316059)(Rstnode315008* n);
N_NIMCALL(void, rendercodeblock_335421)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result);
N_NIMCALL(void, parsecodeblockparams_334612)(Rstgenerator328010* d, Rstnode315008* n, Codeblockparams328014* Result);
N_NIMCALL(void, init_328074)(Codeblockparams328014* p);
N_NIMCALL(void, parsecodeblockfield_334603)(Rstgenerator328010* d, Rstnode315008* n, Codeblockparams328014* params);
N_NIMCALL(NimStringDesc*, nsuToLowerStr)(NimStringDesc* s);
N_NIMCALL(NI, npuParseInt)(NimStringDesc* s, NI* number, NI start);
N_NIMCALL(NimStringDesc*, getfieldvalue_318772)(Rstnode315008* n);
N_NIMCALL(NU8, getsourcelanguage_323075)(NimStringDesc* name);
N_NOINLINE(void, chckNil)(void* p);
N_NIMCALL(void, buildlineshtmltable_335211)(Rstgenerator328010* d, Codeblockparams328014* params, NimStringDesc* code, Keyvaluepair143205* Result);
N_NIMCALL(NimStringDesc*, nsuFormatSingleElem)(NimStringDesc* formatstr, NimStringDesc* a);
N_NIMCALL(NimStringDesc*, getordefault_143814)(Stringtableobj143209* t, NimStringDesc* key);
N_NIMCALL(NI, nsuCountLines)(NimStringDesc* s);
N_NIMCALL(void, initgeneraltokenizer_323253)(Generaltokenizer323008* g, NimStringDesc* buf);
N_NIMCALL(void, getnexttoken_325458)(Generaltokenizer323008* g, NU8 lang);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* s, NI start_79610, NI last);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* s, NI first, NI last);
N_NIMCALL(void, deinitgeneraltokenizer_323258)(Generaltokenizer323008* g);
N_NIMCALL(void, rendercontainer_335837)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result);
N_NIMCALL(void, renderindexterm_328846)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result);
N_NIMCALL(NIM_BOOL, haskey_328854)(Table328047 t, NimStringDesc* key);
N_NIMCALL(void, HEX5BHEX5DHEX3D_328915)(Table328047* t, NimStringDesc* key, NI val);
N_NIMCALL(NI, getordefault_328886)(Table328047 t, NimStringDesc* key);
N_NIMCALL(void, rendersmiley_334595)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result);
N_NIMCALL(void, nimGCvisit)(void* d, NI op);
N_NIMCALL(void, TMP5038)(void* p, NI op);
N_NIMCALL(void*, newSeq)(TNimType* typ, NI len);
N_NIMCALL(void, nossplitFile)(NimStringDesc* path, TY117115* Result);
N_NIMCALL(void, inittable_328106)(NI initialsize, Table328047* Result);
N_NIMCALL(NI, nsuParseInt)(NimStringDesc* s);
N_NIMCALL(void, rendertocentry_334302)(Rstgenerator328010* d, Tocentry328006* e, NimStringDesc** result);
N_NIMCALL(void, rendertocentries_334310)(Rstgenerator328010* d, NI* j, NI lvl, NimStringDesc** result);
N_NIMCALL(void, writefile_15469)(NimStringDesc* filename, NimStringDesc* content);
N_NIMCALL(void, readindexdir_331847)(NimStringDesc* dir, TY331850* Result);
N_NIMCALL(void, inittable_331875)(NI initialsize, Table329139* Result);
N_NIMCALL(void, TMP5195)(void* p, NI op);
N_NIMCALL(NI, findfirstfile_120416)(NimStringDesc* a, Win32finddata107213* b);
N_NIMCALL(NimStringDesc*, HEX2F_116874)(NimStringDesc* head, NimStringDesc* tail);
static N_INLINE(NIM_BOOL, skipfinddata_120434)(Win32finddata107213* f);
N_NIMCALL(NimStringDesc*, HEX24_83672)(NI16* s);
N_NIMCALL(NIM_BOOL, nsuEndsWith)(NimStringDesc* s, NimStringDesc* suffix);
N_NIMCALL(FILE*, open_15417)(NimStringDesc* filename, NU8 mode, NI bufsize);
N_NIMCALL(NimStringDesc*, rawNewString)(NI cap);
N_NIMCALL(NIM_BOOL, readline_15513)(FILE* f, NimStringDesc** line);
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* s, NI start);
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* s, NI first);
N_NIMCALL(NIM_BOOL, isdocumentationtitle_329515)(NimStringDesc* hyperlink);
N_NIMCALL(TY127402*, nsuSplitChar)(NimStringDesc* s, NIM_CHAR sep);
N_NIMCALL(NimStringDesc*, unquoteindexcolumn_328679)(NimStringDesc* text);
N_NIMCALL(TGenericSeq*, incrSeqV2)(TGenericSeq* seq, NI elemsize);
N_NIMCALL(NI, len_332259)(Table329139 t);
N_NIMCALL(void, HEX5BHEX5DHEX3D_332268)(Table329139* t, Indexentry329126* key, TY331853* val);
static N_INLINE(NI, HEX21HEX26_140004)(NI h, NI val);
N_NIMCALL(NI, hash_140827)(NimStringDesc* x);
static N_INLINE(NimStringDesc*, or_328594)(NimStringDesc* x, NimStringDesc* y);
static N_INLINE(NI, HEX21HEX24_140027)(NI h);
N_NIMCALL(void, sort_332466)(NimStringDesc** a, NI aLen0, TY332473 cmp, NU8 order);
N_NIMCALL(NI, cmp_5680)(NimStringDesc* x, NimStringDesc* y);
N_NIMCALL(void, genericSeqAssign)(void* dest, void* src_85404, TNimType* mt);
N_NIMCALL(NimStringDesc*, generatedocumentationjumps_331317)(Table329139 docs);
static N_INLINE(NIM_BOOL, isfilled_166263)(NI hcode);
N_NIMCALL(void, sort_330566)(Indexentry329126* a, NI aLen0, TY330573 cmp, NU8 order);
N_NIMCALL(NI, cmp_329159)(Indexentry329126* a, Indexentry329126* b);
N_NIMCALL(NimStringDesc*, nsuJoinSep)(NimStringDesc** a, NI aLen0, NimStringDesc* sep);
N_NIMCALL(NimStringDesc*, generatemodulejumps_331798)(TY127402* modules);
N_NIMCALL(NimStringDesc*, generatedocumentationindex_330010)(Table329139 docs);
N_NIMCALL(NimStringDesc*, generatedocumentationtoc_329576)(TY331853* entries);
N_NIMCALL(void, TMP5218)(void* p, NI op);
N_NIMCALL(void, striptoclevel_329519)(NimStringDesc* s, TY329583* Result);
static N_INLINE(NimStringDesc*, HEX5BHEX5D_89473)(NimStringDesc* s, Slice89480 x);
static N_INLINE(Slice89480, HEX2EHEX2E_103424)(NI a, NI b);
N_NIMCALL(NimStringDesc*, indenttolevel_329570)(NI* level, NI newlevel);
N_NIMCALL(NimStringDesc*, nsuRepeatStr)(NimStringDesc* s, NI n);
N_NIMCALL(TY331853*, getordefault_331246)(Table329139 t, Indexentry329126* key);
N_NIMCALL(void, sortindex_329414)(Indexentry329126* a, NI aLen0);
N_NIMCALL(void, HEX3CHEX2D_329409)(Indexentry329126* a, Indexentry329126* b);
N_NIMCALL(NimStringDesc*, generatesymbolindex_329457)(TY331853* symbols);
STRING_LITERAL(TMP991, "<wbr />", 7);
STRING_LITERAL(TMP2251, "", 0);
STRING_LITERAL(TMP2253, "-", 1);
STRING_LITERAL(TMP2254, "\015\012<h$1><a class=\"toc-backref\" id=\"$2\" href=\"#$2\">$3</a></h$1>", 61);
STRING_LITERAL(TMP2255, "\\rsth$4{$3}\\label{$2}\015\012", 23);
STRING_LITERAL(TMP2256, "\015\012<h$1 id=\"$2\">$3</h$1>", 23);
STRING_LITERAL(TMP2257, "html", 4);
STRING_LITERAL(TMP2258, "\\", 1);
STRING_LITERAL(TMP2259, "\\\\", 2);
STRING_LITERAL(TMP2260, "\015\012", 2);
STRING_LITERAL(TMP2261, "\\n", 2);
STRING_LITERAL(TMP2262, "\011", 1);
STRING_LITERAL(TMP2263, "\\t", 2);
STRING_LITERAL(TMP2264, "<h$1 id=\"$2\"><center>$3</center></h$1>", 38);
STRING_LITERAL(TMP2265, "\\rstov$4{$3}\\label{$2}\015\012", 24);
STRING_LITERAL(TMP2266, "<hr />\015\012", 8);
STRING_LITERAL(TMP2267, "\\hrule\015\012", 8);
STRING_LITERAL(TMP2268, "<p>$1</p>\015\012", 11);
STRING_LITERAL(TMP2269, "$1\015\012\015\012", 6);
STRING_LITERAL(TMP2270, "<ul class=\"simple\">$1</ul>\015\012", 28);
STRING_LITERAL(TMP2271, "\\begin{itemize}$1\\end{itemize}\015\012", 32);
STRING_LITERAL(TMP2272, "<li>$1</li>\015\012", 13);
STRING_LITERAL(TMP2273, "\\item $1\015\012", 10);
STRING_LITERAL(TMP2274, "<ol class=\"simple\">$1</ol>\015\012", 28);
STRING_LITERAL(TMP2275, "\\begin{enumerate}$1\\end{enumerate}\015\012", 36);
STRING_LITERAL(TMP2276, "<dl class=\"docutils\">$1</dl>\015\012", 30);
STRING_LITERAL(TMP2277, "\\begin{description}$1\\end{description}\015\012", 40);
STRING_LITERAL(TMP2278, "<dt>$1</dt>\015\012", 13);
STRING_LITERAL(TMP2279, "\\item[$1] ", 10);
STRING_LITERAL(TMP2280, "<dd>$1</dd>\015\012", 13);
STRING_LITERAL(TMP2281, "$1\015\012", 4);
STRING_LITERAL(TMP2282, "<table class=\"docinfo\" frame=\"void\" rules=\"none\"><col class=\"do"
"cinfo-name\" /><col class=\"docinfo-content\" /><tbody valign=\"top\""
">$1</tbody></table>", 146);
STRING_LITERAL(TMP2283, " ", 1);
STRING_LITERAL(TMP2284, "&amp;", 5);
STRING_LITERAL(TMP2285, "&lt;", 4);
STRING_LITERAL(TMP2286, "&gt;", 4);
STRING_LITERAL(TMP2287, "&quot;", 6);
STRING_LITERAL(TMP2288, "\\_", 2);
STRING_LITERAL(TMP2289, "\\symbol{123}", 12);
STRING_LITERAL(TMP2290, "\\symbol{125}", 12);
STRING_LITERAL(TMP2291, "\\symbol{91}", 11);
STRING_LITERAL(TMP2292, "\\symbol{93}", 11);
STRING_LITERAL(TMP2293, "\\symbol{92}", 11);
STRING_LITERAL(TMP2294, "\\$", 2);
STRING_LITERAL(TMP2295, "\\&", 2);
STRING_LITERAL(TMP2296, "\\#", 2);
STRING_LITERAL(TMP2297, "\\%", 2);
STRING_LITERAL(TMP2298, "\\symbol{126}", 12);
STRING_LITERAL(TMP2299, "\\symbol{64}", 11);
STRING_LITERAL(TMP2300, "\\symbol{94}", 11);
STRING_LITERAL(TMP2301, "\\symbol{96}", 11);
static NIM_CONST TY204404 TMP2302 = {
0x00, 0x3E, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
STRING_LITERAL(TMP2303, "author", 6);
STRING_LITERAL(TMP2304, "authors", 7);
STRING_LITERAL(TMP2305, "version", 7);
STRING_LITERAL(TMP2306, "<tr>$1</tr>\015\012", 13);
STRING_LITERAL(TMP2307, "$1", 2);
STRING_LITERAL(TMP2308, "<th class=\"docinfo-name\">$1:</th>", 33);
STRING_LITERAL(TMP2309, "\\item[$1:]", 10);
STRING_LITERAL(TMP2310, "<td>$1</td>", 11);
STRING_LITERAL(TMP2311, " $1\015\012", 5);
STRING_LITERAL(TMP2312, "<table frame=\"void\">$1</table>", 30);
STRING_LITERAL(TMP2313, "\\begin{description}\015\012$1\\end{description}\015\012", 42);
STRING_LITERAL(TMP2314, "<th align=\"left\">$1</th>", 24);
STRING_LITERAL(TMP2315, "\\item[$1]", 9);
STRING_LITERAL(TMP2316, "<td align=\"left\">$1</td>\015\012", 26);
STRING_LITERAL(TMP2318, "false renderRstToOut", 20);
STRING_LITERAL(TMP2319, "<pre>$1</pre>\015\012", 15);
STRING_LITERAL(TMP2320, "\\begin{rstpre}\015\012$1\015\012\\end{rstpre}\015\012", 34);
STRING_LITERAL(TMP2321, "<p>$1</p>", 9);
STRING_LITERAL(TMP2322, "$1<br />", 8);
STRING_LITERAL(TMP2323, "$1\\\\\015\012", 6);
STRING_LITERAL(TMP2324, "<blockquote><p>$1</p></blockquote>\015\012", 36);
STRING_LITERAL(TMP2325, "\\begin{quote}$1\\end{quote}\015\012", 28);
STRING_LITERAL(TMP2326, "<table border=\"1\" class=\"docutils\">$1</table>", 45);
STRING_LITERAL(TMP2327, "\\begin{table}\\begin{rsttab}{", 28);
STRING_LITERAL(TMP2328, "|X", 2);
STRING_LITERAL(TMP2329, "|}\015\012\\hline\015\012$1\\end{rsttab}\\end{table}", 37);
STRING_LITERAL(TMP2330, " & ", 3);
STRING_LITERAL(TMP2331, "\\\\\015\012\\hline\015\012", 12);
STRING_LITERAL(TMP2332, "<tr>", 4);
STRING_LITERAL(TMP2333, "</tr>\015\012", 7);
STRING_LITERAL(TMP2334, "<th>$1</th>", 11);
STRING_LITERAL(TMP2335, "\\textbf{$1}", 11);
STRING_LITERAL(TMP2336, "<a class=\"reference external\" href=\"#$2\">$1</a>", 47);
STRING_LITERAL(TMP2337, "$1\\ref{$2}", 10);
STRING_LITERAL(TMP2338, "<a class=\"reference external\" href=\"$1\">$1</a>", 46);
STRING_LITERAL(TMP2339, "\\href{$1}{$1}", 13);
STRING_LITERAL(TMP2340, "<a class=\"reference external\" href=\"$2\">$1</a>", 46);
STRING_LITERAL(TMP2341, "\\href{$2}{$1}", 13);
STRING_LITERAL(TMP2343, "scale", 5);
static NIM_CONST TY204404 TMP2344 = {
0x00, 0x3E, 0x00, 0x00, 0x21, 0xC0, 0xFF, 0x07,
0xFE, 0xFF, 0xFF, 0x97, 0xFE, 0xFF, 0xFF, 0x07,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}
;
STRING_LITERAL(TMP2345, " scale=\"$1\"", 11);
STRING_LITERAL(TMP2346, " scale=$1", 9);
STRING_LITERAL(TMP2347, "height", 6);
STRING_LITERAL(TMP2348, " height=\"$1\"", 12);
STRING_LITERAL(TMP2349, " height=$1", 10);
STRING_LITERAL(TMP2350, "width", 5);
STRING_LITERAL(TMP2351, " width=\"$1\"", 11);
STRING_LITERAL(TMP2352, " width=$1", 9);
STRING_LITERAL(TMP2353, "alt", 3);
STRING_LITERAL(TMP2354, " alt=\"$1\"", 9);
STRING_LITERAL(TMP2355, "align", 5);
STRING_LITERAL(TMP2356, " align=\"$1\"", 11);
STRING_LITERAL(TMP2357, "[$1]", 4);
STRING_LITERAL(TMP2358, "<img src=\"$1\"$2 />", 18);
STRING_LITERAL(TMP2359, "\\includegraphics$2{$1}", 22);
STRING_LITERAL(TMP2360, "number-lines", 12);
STRING_LITERAL(TMP2361, "file", 4);
STRING_LITERAL(TMP2362, "default-language", 16);
STRING_LITERAL(TMP2371, "doc.listing_start", 17);
STRING_LITERAL(TMP2372, "doc.listing_end", 15);
STRING_LITERAL(TMP2373, "<table class=\"line-nums-table\"><tbody><tr><td class=\"blob-line-"
"nums\"><pre class=\"line-nums\">", 92);
STRING_LITERAL(TMP2374, "</pre></td><td>", 15);
STRING_LITERAL(TMP2375, "</td></tr></tbody></table>", 26);
STRING_LITERAL(TMP2376, "doc.listing_button", 18);
STRING_LITERAL(TMP2377, "\\begin{rstpre}\015\012", 16);
STRING_LITERAL(TMP2539, "<span class=\"$2\">$1</span>", 26);
STRING_LITERAL(TMP2540, "\\span$2{$1}", 11);
extern NIM_CONST TY323069 tokenclasstostr_323066;
STRING_LITERAL(TMP2574, "\015\012\\end{rstpre}\015\012", 16);
STRING_LITERAL(TMP2575, "<div>$1</div>", 13);
STRING_LITERAL(TMP2576, "<div class=\"$1\">$2</div>", 24);
STRING_LITERAL(TMP2577, "$2", 2);
STRING_LITERAL(TMP2578, "|$1|", 4);
STRING_LITERAL(TMP2579, "<sub>$1</sub>", 13);
STRING_LITERAL(TMP2580, "\\rstsub{$1}", 11);
STRING_LITERAL(TMP2581, "<sup>$1</sup>", 13);
STRING_LITERAL(TMP2582, "\\rstsup{$1}", 11);
STRING_LITERAL(TMP2583, "<em>$1</em>", 11);
STRING_LITERAL(TMP2584, "\\emph{$1}", 9);
STRING_LITERAL(TMP2585, "<strong>$1</strong>", 19);
STRING_LITERAL(TMP2586, "<strong><em>$1</em></strong>", 28);
STRING_LITERAL(TMP2587, "\\textbf{emph{$1}}", 17);
STRING_LITERAL(TMP2588, "<cite>$1</cite>", 15);
STRING_LITERAL(TMP2591, "<span id=\"$1\">$2</span>", 23);
STRING_LITERAL(TMP2592, "$2\\label{$1}", 12);
STRING_LITERAL(TMP2593, "<tt class=\"docutils literal\"><span class=\"pre\">$1</span></tt>", 61);
STRING_LITERAL(TMP2594, "\\texttt{$1}", 11);
STRING_LITERAL(TMP2595, "<img src=\"$1\" width=\"15\"\015\012        height=\"17\" hspace=\"2\" vspace"
"=\"2\" class=\"smiley\" />", 85);
STRING_LITERAL(TMP2596, "\\includegraphics{$1}", 20);
STRING_LITERAL(TMP2597, "doc.smiley_format", 17);
STRING_LITERAL(TMP5042, ".nim", 4);
STRING_LITERAL(TMP5043, "Module ", 7);
STRING_LITERAL(TMP5044, "split.item.toc", 14);
STRING_LITERAL(TMP5123, "<li><a class=\"reference\" id=\"$1_toc\" href=\"#$1\">$2</a></li>\015\012", 61);
STRING_LITERAL(TMP5124, "\\item\\label{$1_toc} $2\\ref{$1}\015\012", 32);
STRING_LITERAL(TMP5125, "<ul class=\"simple\">$1</ul>", 26);
STRING_LITERAL(TMP5126, "\\begin{enumerate}$1\\end{enumerate}", 34);
STRING_LITERAL(TMP5197, "*", 1);
STRING_LITERAL(TMP5198, ".idx", 4);
STRING_LITERAL(TMP5199, "doc_toc_", 8);
STRING_LITERAL(TMP5203, "Documents: ", 11);
STRING_LITERAL(TMP5207, "<a href=\"", 9);
STRING_LITERAL(TMP5208, "\">", 2);
STRING_LITERAL(TMP5209, "</a>", 4);
STRING_LITERAL(TMP5210, ", ", 2);
STRING_LITERAL(TMP5211, ".<br/>", 6);
STRING_LITERAL(TMP5212, "<p />", 5);
STRING_LITERAL(TMP5213, "Modules: ", 9);
STRING_LITERAL(TMP5214, ".html\">", 7);
STRING_LITERAL(TMP5215, "<h2>Documentation files</h2>\015\012", 30);
STRING_LITERAL(TMP5219, "<ul>\015\012", 6);
STRING_LITERAL(TMP5220, "<ul>", 4);
STRING_LITERAL(TMP5221, "</ul>", 5);
STRING_LITERAL(TMP5222, "<li><a href=\"", 13);
STRING_LITERAL(TMP5223, "</a>\015\012", 6);
STRING_LITERAL(TMP5224, "</ul>\015\012", 7);
STRING_LITERAL(TMP5225, "<ul><li><a href=\"", 17);
STRING_LITERAL(TMP5226, "<h2>API symbols</h2>\015\012", 22);
STRING_LITERAL(TMP5227, "<dt><a name=\"$2\" href=\"#$2\"><span>$1:</span></a></dt><ul class="
"\"simple\"><dd>\015\012", 78);
STRING_LITERAL(TMP5228, "<li><a class=\"reference external\"\015\012          title=\"$3\" href=\"$"
"1\">$2</a></li>\015\012          ", 89);
STRING_LITERAL(TMP5229, "<li><a class=\"reference external\" href=\"$1\">$2</a></li>\015\012      "
"    ", 67);
STRING_LITERAL(TMP5230, "</ul></dd>\015\012", 12);
NimStringDesc* splitter_328441;
extern Gcheap49618 gch_49659;
extern TNimType NTI323008; /* GeneralTokenizer */
extern TNimType NTI3608; /* RootObj */
TNimType NTI328010; /* RstGenerator */
TNimType NTI328004; /* OutputTarget */
extern TNimType NTI143211; /* StringTableRef */
extern TNimType NTI104; /* int */
TNimType NTI328006; /* TocEntry */
extern TNimType NTI315004; /* PRstNode */
extern TNimType NTI138; /* string */
TNimType NTI328029; /* seq[TocEntry] */
extern TNimType NTI130; /* bool */
extern TNimType NTI316006; /* RstParseOptions */
extern TNimType NTI316014; /* FindFileHandler */
extern TNimType NTI316012; /* MsgHandler */
TNimType NTI328039; /* array[MetaEnum, string] */
extern TNimType NTI328047; /* Table */
extern TNimType NTI127402; /* seq[string] */
TNimType NTI329126; /* IndexEntry */
TNimType NTI331853; /* seq[IndexEntry] */
extern TY107236 Dl_107235;
extern TY107402 Dl_107401;
extern TNimType NTI329142; /* KeyValuePairSeq */
TNimType NTI329583; /* tuple[level: int, text: string] */
TNimType NTI329582; /* seq[tuple[level: int, text: string]] */

static N_INLINE(Cell47304*, usrtocell_51240)(void* usr) {
	Cell47304* result;
	result = 0;
	result = ((Cell47304*) ((NI)((NU64)(((NI) (usr))) - (NU64)(((NI)sizeof(Cell47304))))));
	return result;
}

static N_INLINE(void, rtladdzct_52801)(Cell47304* c) {
	addzct_51217((&gch_49659.zct), c);
}

static N_INLINE(void, nimGCunrefNoCycle)(void* p) {
	Cell47304* c;
	c = usrtocell_51240(p);
	{
		(*c).refcount -= ((NI) 8);
		if (!((NU64)((*c).refcount) < (NU64)(((NI) 8)))) goto LA3;
		rtladdzct_52801(c);
	}
	LA3: ;
}

N_NIMCALL(void, renderaux_328606)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result) {
	{
		NI i_328623;
		NI HEX3Atmp_328625;
		NI LOC2;
		NI res_328628;
		i_328623 = 0;
		HEX3Atmp_328625 = 0;
		LOC2 = 0;
		LOC2 = len_315081(n);
		HEX3Atmp_328625 = (NI)(LOC2 - ((NI) 1));
		res_328628 = ((NI) 0);
		{
			while (1) {
				if (!(res_328628 <= HEX3Atmp_328625)) goto LA4;
				i_328623 = res_328628;
				renderrsttoout_328599(d, (*n).sons->data[i_328623], result);
				res_328628 += ((NI) 1);
			} LA4: ;
		}
	}
}

static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src) {
	memcpy(((NCSTRING) ((&(*dest).data[((*dest).Sup.len)- 0]))), ((NCSTRING) ((*src).data)), (NI)((*src).Sup.len + ((NI) 1)));
	(*dest).Sup.len += (*src).Sup.len;
}

static N_INLINE(void, asgnRefNoCycle)(void** dest, void* src) {
	{
		Cell47304* c;
		if (!!((src == NIM_NIL))) goto LA3;
		c = usrtocell_51240(src);
		(*c).refcount += ((NI) 8);
	}
	LA3: ;
	{
		Cell47304* c;
		if (!!(((*dest) == NIM_NIL))) goto LA7;
		c = usrtocell_51240((*dest));
		{
			(*c).refcount -= ((NI) 8);
			if (!((NU64)((*c).refcount) < (NU64)(((NI) 8)))) goto LA11;
			rtladdzct_52801(c);
		}
		LA11: ;
	}
	LA7: ;
	(*dest) = src;
}

N_NIMCALL(void, dispa_328576)(NU8 target, NimStringDesc** dest, NimStringDesc* xml, NimStringDesc* tex, NimStringDesc** args, NI argsLen0) {
	{
		if (!!((target == ((NU8) 1)))) goto LA3;
		nsuAddf(dest, xml, args, argsLen0);
	}
	goto LA1;
	LA3: ;
	{
		nsuAddf(dest, tex, args, argsLen0);
	}
	LA1: ;
}

static N_INLINE(void, appendChar)(NimStringDesc* dest, NIM_CHAR c) {
	(*dest).data[((*dest).Sup.len)- 0] = c;
	(*dest).data[((NI)((*dest).Sup.len + ((NI) 1)))- 0] = 0;
	(*dest).Sup.len += ((NI) 1);
}

N_NIMCALL(NimStringDesc*, quoteindexcolumn_328675)(NimStringDesc* text) {
	NimStringDesc* result;
	NimStringDesc* LOC1;
	NimStringDesc* LOC2;
	result = 0;
	LOC1 = 0;
	LOC1 = nsuReplaceStr(text, ((NimStringDesc*) &TMP2258), ((NimStringDesc*) &TMP2259));
	LOC2 = 0;
	LOC2 = nsuReplaceStr(LOC1, ((NimStringDesc*) &TMP2260), ((NimStringDesc*) &TMP2261));
	result = nsuReplaceStr(LOC2, ((NimStringDesc*) &TMP2262), ((NimStringDesc*) &TMP2263));
	return result;
}

N_NIMCALL(void, setindexterm_328683)(Rstgenerator328010* d, NimStringDesc* id, NimStringDesc* term, NimStringDesc* linktitle, NimStringDesc* linkdesc) {
	NimStringDesc* entry;
	NIM_BOOL istitle;
	NimStringDesc* htmlfile;
	NimStringDesc* LOC1;
	entry = copyString(term);
	istitle = NIM_FALSE;
	entry = addChar(entry, 9);
	LOC1 = 0;
	LOC1 = nosextractFilename((*d).filename);
	htmlfile = noschangeFileExt(LOC1, ((NimStringDesc*) &TMP2257));
	entry = resizeString(entry, htmlfile->Sup.len + 0);
appendString(entry, htmlfile);
	{
		if (!(((NI) 0) < (id ? id->Sup.len : 0))) goto LA4;
		entry = addChar(entry, 35);
		entry = resizeString(entry, id->Sup.len + 0);
appendString(entry, id);
	}
	goto LA2;
	LA4: ;
	{
		istitle = NIM_TRUE;
	}
	LA2: ;
	{
		NIM_BOOL LOC9;
		NimStringDesc* LOC13;
		NimStringDesc* LOC14;
		NimStringDesc* LOC15;
		NimStringDesc* LOC16;
		LOC9 = 0;
		LOC9 = (((NI) 0) < (linktitle ? linktitle->Sup.len : 0));
		if (LOC9) goto LA10;
		LOC9 = (((NI) 0) < (linkdesc ? linkdesc->Sup.len : 0));
		LA10: ;
		if (!LOC9) goto LA11;
		LOC13 = 0;
		LOC14 = 0;
		LOC14 = quoteindexcolumn_328675(linktitle);
		LOC13 = rawNewString(LOC14->Sup.len + 1);
appendChar(LOC13, 9);
appendString(LOC13, LOC14);
		entry = resizeString(entry, LOC13->Sup.len + 0);
appendString(entry, LOC13);
		LOC15 = 0;
		LOC16 = 0;
		LOC16 = quoteindexcolumn_328675(linkdesc);
		LOC15 = rawNewString(LOC16->Sup.len + 1);
appendChar(LOC15, 9);
appendString(LOC15, LOC16);
		entry = resizeString(entry, LOC15->Sup.len + 0);
appendString(entry, LOC15);
	}
	LA11: ;
	entry = resizeString(entry, 2);
appendString(entry, ((NimStringDesc*) &TMP2260));
	{
		if (!istitle) goto LA19;
		insert_90801((&(*d).theindex), entry, ((NI) 0));
	}
	goto LA17;
	LA19: ;
	{
		(*d).theindex = resizeString((*d).theindex, entry->Sup.len + 0);
appendString((*d).theindex, entry);
	}
	LA17: ;
}

N_NIMCALL(NimStringDesc*, striptochtml_334035)(NimStringDesc* s) {
	NimStringDesc* result;
	NI first;
{	result = 0;
	result = copyString(s);
	first = nsuFindChar(result, 60, ((NI) 0));
	{
		while (1) {
			NI last;
			if (!(((NI) 0) <= first)) goto LA2;
			last = nsuFindChar(result, 62, ((NI) (first)));
			{
				if (!(last < ((NI) 0))) goto LA5;
				goto BeforeRet;
			}
			LA5: ;
			nsuDelete((&result), first, last);
			first = nsuFindChar(result, 60, ((NI) (first)));
		} LA2: ;
	}
	}BeforeRet: ;
	return result;
}

N_NIMCALL(void, renderheadline_334043)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result) {
	NimStringDesc* tmp;
	NimStringDesc* sectionprefix;
	NimStringDesc* refname;
	NimStringDesc* LOC14;
	NimStringDesc* LOC15;
	NimStringDesc* LOC25;
	NimStringDesc* LOC26;
	NimStringDesc* LOC27;
	tmp = copyString(((NimStringDesc*) &TMP2251));
	{
		NI i_334061;
		NI HEX3Atmp_334206;
		NI LOC2;
		NI res_334209;
		i_334061 = 0;
		HEX3Atmp_334206 = 0;
		LOC2 = 0;
		LOC2 = len_315081(n);
		HEX3Atmp_334206 = (NI)(LOC2 - ((NI) 1));
		res_334209 = ((NI) 0);
		{
			while (1) {
				if (!(res_334209 <= HEX3Atmp_334206)) goto LA4;
				i_334061 = res_334209;
				renderrsttoout_328599(d, (*n).sons->data[i_334061], (&tmp));
				res_334209 += ((NI) 1);
			} LA4: ;
		}
	}
	unsureAsgnRef((void**) (&(*d).currentsection), copyString(tmp));
	sectionprefix = copyString(((NimStringDesc*) &TMP2251));
	{
		NI i_334074;
		NI HEX3Atmp_334214;
		NI res_334217;
		i_334074 = 0;
		HEX3Atmp_334214 = 0;
		HEX3Atmp_334214 = ((*d).tocpart ? ((*d).tocpart->Sup.len-1) : -1);
		res_334217 = HEX3Atmp_334214;
		{
			while (1) {
				Rstnode315008* n2;
				if (!(((NI) 0) <= res_334217)) goto LA7;
				i_334074 = res_334217;
				n2 = (*d).tocpart->data[i_334074].n;
				{
					NimStringDesc* LOC12;
					NimStringDesc* LOC13;
					if (!((*n2).level < (*n).level)) goto LA10;
					LOC12 = 0;
					LOC13 = 0;
					LOC13 = rstnodetorefname_316049(n2);
					LOC12 = rawNewString(LOC13->Sup.len + 1);
appendString(LOC12, LOC13);
appendString(LOC12, ((NimStringDesc*) &TMP2253));
					sectionprefix = LOC12;
					goto LA5;
				}
				LA10: ;
				res_334217 -= ((NI) 1);
			} LA7: ;
		}
	} LA5: ;
	LOC14 = 0;
	LOC15 = 0;
	LOC15 = rstnodetorefname_316049(n);
	LOC14 = rawNewString(sectionprefix->Sup.len + LOC15->Sup.len + 0);
appendString(LOC14, sectionprefix);
appendString(LOC14, LOC15);
	refname = LOC14;
	{
		NI length;
		NimStringDesc* LOC20;
		NimStringDesc* LOC21;
		TY187781 LOC22;
		if (!(*d).hastoc) goto LA18;
		length = ((*d).tocpart ? (*d).tocpart->Sup.len : 0);
		(*d).tocpart = (TY328029*) setLengthSeq(&((*d).tocpart)->Sup, sizeof(Tocentry328006), ((NI) ((NI)(length + ((NI) 1)))));
		LOC20 = 0;
		LOC20 = (*d).tocpart->data[length].refname; (*d).tocpart->data[length].refname = copyStringRC1(refname);
		if (LOC20) nimGCunrefNoCycle(LOC20);
		asgnRefNoCycle((void**) (&(*d).tocpart->data[length].n), n);
		LOC21 = 0;
		LOC21 = (*d).tocpart->data[length].header; (*d).tocpart->data[length].header = copyStringRC1(tmp);
		if (LOC21) nimGCunrefNoCycle(LOC21);
		memset((void*)LOC22, 0, sizeof(LOC22));
		LOC22[0] = nimIntToStr((*n).level);
		LOC22[1] = copyString((*d).tocpart->data[length].refname);
		LOC22[2] = copyString(tmp);
		LOC22[3] = nimCharToStr(((NIM_CHAR) (((NI) ((NI)((NI)((*n).level - ((NI) 1)) + ((NI) 65)))))));
		dispa_328576((*d).target, result, ((NimStringDesc*) &TMP2254), ((NimStringDesc*) &TMP2255), LOC22, 4);
	}
	goto LA16;
	LA18: ;
	{
		TY187781 LOC24;
		memset((void*)LOC24, 0, sizeof(LOC24));
		LOC24[0] = nimIntToStr((*n).level);
		LOC24[1] = copyString(refname);
		LOC24[2] = copyString(tmp);
		LOC24[3] = nimCharToStr(((NIM_CHAR) (((NI) ((NI)((NI)((*n).level - ((NI) 1)) + ((NI) 65)))))));
		dispa_328576((*d).target, result, ((NimStringDesc*) &TMP2256), ((NimStringDesc*) &TMP2255), LOC24, 4);
	}
	LA16: ;
	LOC25 = 0;
	LOC25 = striptochtml_334035(tmp);
	LOC26 = 0;
	LOC27 = 0;
	LOC27 = nsuRepeatChar(32, ((NI) (((((NI) 0) >= (*n).level) ? ((NI) 0) : (*n).level))));
	LOC26 = rawNewString(LOC27->Sup.len + tmp->Sup.len + 0);
appendString(LOC26, LOC27);
appendString(LOC26, tmp);
	setindexterm_328683(d, refname, LOC25, LOC26, ((NimStringDesc*) &TMP2251));
}

N_NIMCALL(void, renderoverline_334221)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result) {
	{
		if (!(((*d).meta[(((NU8) 1))- 0] ? (*d).meta[(((NU8) 1))- 0]->Sup.len : 0) == ((NI) 0))) goto LA3;
		{
			NI i_334238;
			NI HEX3Atmp_334279;
			NI LOC6;
			NI res_334282;
			i_334238 = 0;
			HEX3Atmp_334279 = 0;
			LOC6 = 0;
			LOC6 = len_315081(n);
			HEX3Atmp_334279 = (NI)(LOC6 - ((NI) 1));
			res_334282 = ((NI) 0);
			{
				while (1) {
					if (!(res_334282 <= HEX3Atmp_334279)) goto LA8;
					i_334238 = res_334282;
					renderrsttoout_328599(d, (*n).sons->data[i_334238], (&(*d).meta[(((NU8) 1))- 0]));
					res_334282 += ((NI) 1);
				} LA8: ;
			}
		}
		unsureAsgnRef((void**) (&(*d).currentsection), copyString((*d).meta[(((NU8) 1))- 0]));
	}
	goto LA1;
	LA3: ;
	{
		if (!(((*d).meta[(((NU8) 2))- 0] ? (*d).meta[(((NU8) 2))- 0]->Sup.len : 0) == ((NI) 0))) goto LA10;
		{
			NI i_334251;
			NI HEX3Atmp_334287;
			NI LOC13;
			NI res_334290;
			i_334251 = 0;
			HEX3Atmp_334287 = 0;
			LOC13 = 0;
			LOC13 = len_315081(n);
			HEX3Atmp_334287 = (NI)(LOC13 - ((NI) 1));
			res_334290 = ((NI) 0);
			{
				while (1) {
					if (!(res_334290 <= HEX3Atmp_334287)) goto LA15;
					i_334251 = res_334290;
					renderrsttoout_328599(d, (*n).sons->data[i_334251], (&(*d).meta[(((NU8) 2))- 0]));
					res_334290 += ((NI) 1);
				} LA15: ;
			}
		}
		unsureAsgnRef((void**) (&(*d).currentsection), copyString((*d).meta[(((NU8) 2))- 0]));
	}
	goto LA1;
	LA10: ;
	{
		NimStringDesc* tmp;
		TY187781 LOC21;
		tmp = copyString(((NimStringDesc*) &TMP2251));
		{
			NI i_334265;
			NI HEX3Atmp_334295;
			NI LOC18;
			NI res_334298;
			i_334265 = 0;
			HEX3Atmp_334295 = 0;
			LOC18 = 0;
			LOC18 = len_315081(n);
			HEX3Atmp_334295 = (NI)(LOC18 - ((NI) 1));
			res_334298 = ((NI) 0);
			{
				while (1) {
					if (!(res_334298 <= HEX3Atmp_334295)) goto LA20;
					i_334265 = res_334298;
					renderrsttoout_328599(d, (*n).sons->data[i_334265], (&tmp));
					res_334298 += ((NI) 1);
				} LA20: ;
			}
		}
		unsureAsgnRef((void**) (&(*d).currentsection), copyString(tmp));
		memset((void*)LOC21, 0, sizeof(LOC21));
		LOC21[0] = nimIntToStr((*n).level);
		LOC21[1] = rstnodetorefname_316049(n);
		LOC21[2] = copyString(tmp);
		LOC21[3] = nimCharToStr(((NIM_CHAR) (((NI) ((NI)((NI)((*n).level - ((NI) 1)) + ((NI) 65)))))));
		dispa_328576((*d).target, result, ((NimStringDesc*) &TMP2264), ((NimStringDesc*) &TMP2265), LOC21, 4);
	}
	LA1: ;
}

N_NIMCALL(void, renderaux_328632)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc* frmta, NimStringDesc* frmtb, NimStringDesc** result) {
	NimStringDesc* tmp;
	tmp = copyString(((NimStringDesc*) &TMP2251));
	{
		NI i_328652;
		NI HEX3Atmp_328668;
		NI LOC2;
		NI res_328671;
		i_328652 = 0;
		HEX3Atmp_328668 = 0;
		LOC2 = 0;
		LOC2 = len_315081(n);
		HEX3Atmp_328668 = (NI)(LOC2 - ((NI) 1));
		res_328671 = ((NI) 0);
		{
			while (1) {
				if (!(res_328671 <= HEX3Atmp_328668)) goto LA4;
				i_328652 = res_328671;
				renderrsttoout_328599(d, (*n).sons->data[i_328652], (&tmp));
				res_328671 += ((NI) 1);
			} LA4: ;
		}
	}
	{
		TY185752 LOC9;
		if (!!(((*d).target == ((NU8) 1)))) goto LA7;
		memset((void*)LOC9, 0, sizeof(LOC9));
		LOC9[0] = copyString(tmp);
		nsuAddf(result, frmta, LOC9, 1);
	}
	goto LA5;
	LA7: ;
	{
		TY185752 LOC11;
		memset((void*)LOC11, 0, sizeof(LOC11));
		LOC11[0] = copyString(tmp);
		nsuAddf(result, frmtb, LOC11, 1);
	}
	LA5: ;
}

N_NIMCALL(NI, nextsplitpoint_328449)(NimStringDesc* s, NI start) {
	NI result;
{	result = 0;
	result = start;
	{
		while (1) {
			if (!(result < (NI)((s ? s->Sup.len : 0) + ((NI) 0)))) goto LA2;
			switch (((NU8)(s->data[result]))) {
			case 95:
			{
				goto BeforeRet;
			}
			break;
			case 97 ... 122:
			{
				{
					if (!((NI)(result + ((NI) 1)) < (NI)((s ? s->Sup.len : 0) + ((NI) 0)))) goto LA7;
					{
						if (!(((NU8)(s->data[(NI)(result + ((NI) 1))])) >= ((NU8)(65)) && ((NU8)(s->data[(NI)(result + ((NI) 1))])) <= ((NU8)(90)))) goto LA11;
						goto BeforeRet;
					}
					LA11: ;
				}
				LA7: ;
			}
			break;
			default:
			{
			}
			break;
			}
			result += ((NI) 1);
		} LA2: ;
	}
	result -= ((NI) 1);
	}BeforeRet: ;
	return result;
}

static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* a, NimStringDesc* b) {
	NIM_BOOL result;
	NIM_BOOL LOC11;
	int LOC13;
{	result = 0;
	{
		if (!(a == b)) goto LA3;
		result = NIM_TRUE;
		goto BeforeRet;
	}
	LA3: ;
	{
		NIM_BOOL LOC7;
		LOC7 = 0;
		LOC7 = (a == NIM_NIL);
		if (LOC7) goto LA8;
		LOC7 = (b == NIM_NIL);
		LA8: ;
		if (!LOC7) goto LA9;
		result = NIM_FALSE;
		goto BeforeRet;
	}
	LA9: ;
	LOC11 = 0;
	LOC11 = ((*a).Sup.len == (*b).Sup.len);
	if (!(LOC11)) goto LA12;
	LOC13 = 0;
	LOC13 = memcmp(((NCSTRING) ((*a).data)), ((NCSTRING) ((*b).data)), (*a).Sup.len);
	LOC11 = (LOC13 == ((NI32) 0));
	LA12: ;
	result = LOC11;
	goto BeforeRet;
	}BeforeRet: ;
	return result;
}

N_NIMCALL(void, addxmlchar_328426)(NimStringDesc** dest, NIM_CHAR c) {
	switch (((NU8)(c))) {
	case 38:
	{
		(*dest) = resizeString((*dest), 5);
appendString((*dest), ((NimStringDesc*) &TMP2284));
	}
	break;
	case 60:
	{
		(*dest) = resizeString((*dest), 4);
appendString((*dest), ((NimStringDesc*) &TMP2285));
	}
	break;
	case 62:
	{
		(*dest) = resizeString((*dest), 4);
appendString((*dest), ((NimStringDesc*) &TMP2286));
	}
	break;
	case 34:
	{
		(*dest) = resizeString((*dest), 6);
appendString((*dest), ((NimStringDesc*) &TMP2287));
	}
	break;
	default:
	{
		(*dest) = addChar((*dest), c);
	}
	break;
	}
}

N_NIMCALL(void, addtexchar_328436)(NimStringDesc** dest, NIM_CHAR c) {
	switch (((NU8)(c))) {
	case 95:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP2288));
	}
	break;
	case 123:
	{
		(*dest) = resizeString((*dest), 12);
appendString((*dest), ((NimStringDesc*) &TMP2289));
	}
	break;
	case 125:
	{
		(*dest) = resizeString((*dest), 12);
appendString((*dest), ((NimStringDesc*) &TMP2290));
	}
	break;
	case 91:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP2291));
	}
	break;
	case 93:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP2292));
	}
	break;
	case 92:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP2293));
	}
	break;
	case 36:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP2294));
	}
	break;
	case 38:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP2295));
	}
	break;
	case 35:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP2296));
	}
	break;
	case 37:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP2297));
	}
	break;
	case 126:
	{
		(*dest) = resizeString((*dest), 12);
appendString((*dest), ((NimStringDesc*) &TMP2298));
	}
	break;
	case 64:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP2299));
	}
	break;
	case 94:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP2300));
	}
	break;
	case 96:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP2301));
	}
	break;
	default:
	{
		(*dest) = addChar((*dest), c);
	}
	break;
	}
}

static N_INLINE(void, escchar_328443)(NU8 target, NimStringDesc** dest, NIM_CHAR c) {
	switch (target) {
	case ((NU8) 0):
	{
		addxmlchar_328426(dest, c);
	}
	break;
	case ((NU8) 1):
	{
		addtexchar_328436(dest, c);
	}
	break;
	}
}

N_NIMCALL(NimStringDesc*, esc_328484)(NU8 target, NimStringDesc* s, NI splitafter) {
	NimStringDesc* result;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP2251));
	{
		NI partlen;
		NI j;
		if (!(((NI) 0) <= splitafter)) goto LA3;
		partlen = ((NI) 0);
		j = ((NI) 0);
		{
			while (1) {
				NI k;
				if (!(j < (s ? s->Sup.len : 0))) goto LA6;
				k = nextsplitpoint_328449(s, j);
				{
					NIM_BOOL LOC9;
					LOC9 = 0;
					LOC9 = !(eqStrings(splitter_328441, ((NimStringDesc*) &TMP2283)));
					if (LOC9) goto LA10;
					LOC9 = (splitafter < (NI)((NI)((NI)(partlen + k) - j) + ((NI) 1)));
					LA10: ;
					if (!LOC9) goto LA11;
					partlen = ((NI) 0);
					result = resizeString(result, splitter_328441->Sup.len + 0);
appendString(result, splitter_328441);
				}
				LA11: ;
				{
					NI i_328504;
					NI res_328532;
					i_328504 = 0;
					res_328532 = j;
					{
						while (1) {
							if (!(res_328532 <= k)) goto LA15;
							i_328504 = res_328532;
							escchar_328443(target, (&result), s->data[i_328504]);
							res_328532 += ((NI) 1);
						} LA15: ;
					}
				}
				partlen += (NI)((NI)(k - j) + ((NI) 1));
				j = (NI)(k + ((NI) 1));
			} LA6: ;
		}
	}
	goto LA1;
	LA3: ;
	{
		{
			NI i_328526;
			NI HEX3Atmp_328537;
			NI res_328540;
			i_328526 = 0;
			HEX3Atmp_328537 = 0;
			HEX3Atmp_328537 = (NI)((s ? s->Sup.len : 0) - ((NI) 1));
			res_328540 = ((NI) 0);
			{
				while (1) {
					if (!(res_328540 <= HEX3Atmp_328537)) goto LA19;
					i_328526 = res_328540;
					escchar_328443(target, (&result), s->data[i_328526]);
					res_328540 += ((NI) 1);
				} LA19: ;
			}
		}
	}
	LA1: ;
	return result;
}

N_NIMCALL(void, renderfield_335874)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result) {
	NIM_BOOL b;
	b = NIM_FALSE;
	{
		NimStringDesc* fieldname;
		NimStringDesc* fieldval;
		NimStringDesc* LOC5;
		NimStringDesc* LOC6;
		if (!((*d).target == ((NU8) 1))) goto LA3;
		fieldname = addnodes_316052((*n).sons->data[((NI) 0)]);
		LOC5 = 0;
		LOC5 = addnodes_316052((*n).sons->data[((NI) 1)]);
		LOC6 = 0;
		LOC6 = nsuStrip(LOC5, NIM_TRUE, NIM_TRUE, TMP2302);
		fieldval = esc_328484((*d).target, LOC6, ((NI) -1));
		{
			NIM_BOOL LOC9;
			NI LOC10;
			NI LOC12;
			LOC9 = 0;
			LOC10 = 0;
			LOC10 = nsuCmpIgnoreStyle(fieldname, ((NimStringDesc*) &TMP2303));
			LOC9 = (LOC10 == ((NI) 0));
			if (LOC9) goto LA11;
			LOC12 = 0;
			LOC12 = nsuCmpIgnoreStyle(fieldname, ((NimStringDesc*) &TMP2304));
			LOC9 = (LOC12 == ((NI) 0));
			LA11: ;
			if (!LOC9) goto LA13;
			{
				if (!(((*d).meta[(((NU8) 3))- 0] ? (*d).meta[(((NU8) 3))- 0]->Sup.len : 0) == ((NI) 0))) goto LA17;
				unsureAsgnRef((void**) (&(*d).meta[(((NU8) 3))- 0]), copyString(fieldval));
				b = NIM_TRUE;
			}
			LA17: ;
		}
		goto LA7;
		LA13: ;
		{
			NI LOC20;
			LOC20 = 0;
			LOC20 = nsuCmpIgnoreStyle(fieldname, ((NimStringDesc*) &TMP2305));
			if (!(LOC20 == ((NI) 0))) goto LA21;
			{
				if (!(((*d).meta[(((NU8) 4))- 0] ? (*d).meta[(((NU8) 4))- 0]->Sup.len : 0) == ((NI) 0))) goto LA25;
				unsureAsgnRef((void**) (&(*d).meta[(((NU8) 4))- 0]), copyString(fieldval));
				b = NIM_TRUE;
			}
			LA25: ;
		}
		goto LA7;
		LA21: ;
		LA7: ;
	}
	LA3: ;
	{
		if (!!(b)) goto LA29;
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2306), ((NimStringDesc*) &TMP2307), result);
	}
	LA29: ;
}

N_NIMCALL(NimStringDesc*, texcolumns_335850)(Rstnode315008* n) {
	NimStringDesc* result;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP2251));
	{
		NI i_335865;
		NI HEX3Atmp_335867;
		NI res_335870;
		i_335865 = 0;
		HEX3Atmp_335867 = 0;
		HEX3Atmp_335867 = len_315081(n);
		res_335870 = ((NI) 1);
		{
			while (1) {
				if (!(res_335870 <= HEX3Atmp_335867)) goto LA3;
				i_335865 = res_335870;
				result = resizeString(result, 2);
appendString(result, ((NimStringDesc*) &TMP2328));
				res_335870 += ((NI) 1);
			} LA3: ;
		}
	}
	return result;
}

N_NIMCALL(NimStringDesc*, dispf_328559)(NU8 target, NimStringDesc* xml, NimStringDesc* tex, NimStringDesc** args, NI argsLen0) {
	NimStringDesc* result;
	result = 0;
	{
		if (!!((target == ((NU8) 1)))) goto LA3;
		result = nsuFormatOpenArray(xml, args, argsLen0);
	}
	goto LA1;
	LA3: ;
	{
		result = nsuFormatOpenArray(tex, args, argsLen0);
	}
	LA1: ;
	return result;
}

N_NIMCALL(void, renderimage_334335)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result) {
	NimStringDesc* options;
	NimStringDesc* s;
	NimStringDesc* arg;
	options = copyString(((NimStringDesc*) &TMP2251));
	s = getfieldvalue_316055(n, ((NimStringDesc*) &TMP2343));
	{
		NIM_BOOL LOC3;
		TY185752 LOC7;
		LOC3 = 0;
		LOC3 = (((NI) 0) < (s ? s->Sup.len : 0));
		if (!(LOC3)) goto LA4;
		LOC3 = allcharsinset_101325(s, TMP2344);
		LA4: ;
		if (!LOC3) goto LA5;
		memset((void*)LOC7, 0, sizeof(LOC7));
		LOC7[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE, TMP2302);
		dispa_328576((*d).target, (&options), ((NimStringDesc*) &TMP2345), ((NimStringDesc*) &TMP2346), LOC7, 1);
	}
	LA5: ;
	s = getfieldvalue_316055(n, ((NimStringDesc*) &TMP2347));
	{
		NIM_BOOL LOC10;
		TY185752 LOC14;
		LOC10 = 0;
		LOC10 = (((NI) 0) < (s ? s->Sup.len : 0));
		if (!(LOC10)) goto LA11;
		LOC10 = allcharsinset_101325(s, TMP2344);
		LA11: ;
		if (!LOC10) goto LA12;
		memset((void*)LOC14, 0, sizeof(LOC14));
		LOC14[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE, TMP2302);
		dispa_328576((*d).target, (&options), ((NimStringDesc*) &TMP2348), ((NimStringDesc*) &TMP2349), LOC14, 1);
	}
	LA12: ;
	s = getfieldvalue_316055(n, ((NimStringDesc*) &TMP2350));
	{
		NIM_BOOL LOC17;
		TY185752 LOC21;
		LOC17 = 0;
		LOC17 = (((NI) 0) < (s ? s->Sup.len : 0));
		if (!(LOC17)) goto LA18;
		LOC17 = allcharsinset_101325(s, TMP2344);
		LA18: ;
		if (!LOC17) goto LA19;
		memset((void*)LOC21, 0, sizeof(LOC21));
		LOC21[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE, TMP2302);
		dispa_328576((*d).target, (&options), ((NimStringDesc*) &TMP2351), ((NimStringDesc*) &TMP2352), LOC21, 1);
	}
	LA19: ;
	s = getfieldvalue_316055(n, ((NimStringDesc*) &TMP2353));
	{
		NIM_BOOL LOC24;
		TY185752 LOC28;
		LOC24 = 0;
		LOC24 = (((NI) 0) < (s ? s->Sup.len : 0));
		if (!(LOC24)) goto LA25;
		LOC24 = allcharsinset_101325(s, TMP2344);
		LA25: ;
		if (!LOC24) goto LA26;
		memset((void*)LOC28, 0, sizeof(LOC28));
		LOC28[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE, TMP2302);
		dispa_328576((*d).target, (&options), ((NimStringDesc*) &TMP2354), ((NimStringDesc*) &TMP2251), LOC28, 1);
	}
	LA26: ;
	s = getfieldvalue_316055(n, ((NimStringDesc*) &TMP2355));
	{
		NIM_BOOL LOC31;
		TY185752 LOC35;
		LOC31 = 0;
		LOC31 = (((NI) 0) < (s ? s->Sup.len : 0));
		if (!(LOC31)) goto LA32;
		LOC31 = allcharsinset_101325(s, TMP2344);
		LA32: ;
		if (!LOC31) goto LA33;
		memset((void*)LOC35, 0, sizeof(LOC35));
		LOC35[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE, TMP2302);
		dispa_328576((*d).target, (&options), ((NimStringDesc*) &TMP2356), ((NimStringDesc*) &TMP2251), LOC35, 1);
	}
	LA33: ;
	{
		TY185752 LOC40;
		if (!(((NI) 0) < (options ? options->Sup.len : 0))) goto LA38;
		memset((void*)LOC40, 0, sizeof(LOC40));
		LOC40[0] = copyString(options);
		options = dispf_328559((*d).target, ((NimStringDesc*) &TMP2307), ((NimStringDesc*) &TMP2357), LOC40, 1);
	}
	LA38: ;
	arg = getargument_316059(n);
	{
		NIM_BOOL LOC43;
		TY186169 LOC47;
		LOC43 = 0;
		LOC43 = (((NI) 0) < (arg ? arg->Sup.len : 0));
		if (!(LOC43)) goto LA44;
		LOC43 = allcharsinset_101325(arg, TMP2344);
		LA44: ;
		if (!LOC43) goto LA45;
		memset((void*)LOC47, 0, sizeof(LOC47));
		LOC47[0] = copyString(arg);
		LOC47[1] = copyString(options);
		dispa_328576((*d).target, result, ((NimStringDesc*) &TMP2358), ((NimStringDesc*) &TMP2359), LOC47, 2);
	}
	LA45: ;
	{
		NI LOC50;
		LOC50 = 0;
		LOC50 = len_315081(n);
		if (!(((NI) 3) <= LOC50)) goto LA51;
		renderrsttoout_328599(d, (*n).sons->data[((NI) 2)], result);
	}
	LA51: ;
}

N_NIMCALL(void, init_328074)(Codeblockparams328014* p) {
	(*p).startline = ((NI) 1);
	(*p).lang = ((NU8) 0);
	unsureAsgnRef((void**) (&(*p).langstr), copyString(((NimStringDesc*) &TMP2251)));
}

N_NIMCALL(void, parsecodeblockfield_334603)(Rstgenerator328010* d, Rstnode315008* n, Codeblockparams328014* params) {
	NimStringDesc* LOC1;
	NimStringDesc* LOC2;
	LOC1 = 0;
	LOC1 = getargument_316059(n);
	LOC2 = 0;
	LOC2 = nsuToLowerStr(LOC1);
	if (eqStrings(LOC2, ((NimStringDesc*) &TMP2360))) goto LA3;
	if (eqStrings(LOC2, ((NimStringDesc*) &TMP2361))) goto LA4;
	if (eqStrings(LOC2, ((NimStringDesc*) &TMP2362))) goto LA5;
	goto LA6;
	LA3: ;
	{
		NI number;
		(*params).numberlines = NIM_TRUE;
		number = 0;
		{
			NimStringDesc* LOC11;
			NI LOC12;
			LOC11 = 0;
			LOC11 = getfieldvalue_318772(n);
			LOC12 = 0;
			LOC12 = npuParseInt(LOC11, (&number), ((NI) 0));
			if (!(((NI) 0) < LOC12)) goto LA13;
			(*params).startline = number;
		}
		LA13: ;
	}
	goto LA7;
	LA4: ;
	{
	}
	goto LA7;
	LA5: ;
	{
		NimStringDesc* LOC17;
		LOC17 = 0;
		LOC17 = getfieldvalue_318772(n);
		unsureAsgnRef((void**) (&(*params).langstr), nsuStrip(LOC17, NIM_TRUE, NIM_TRUE, TMP2302));
		(*params).lang = getsourcelanguage_323075((*params).langstr);
	}
	goto LA7;
	LA6: ;
	{
		NimStringDesc* LOC19;
		LOC19 = 0;
		LOC19 = getargument_316059(n);
		(*d).msghandler((*d).filename, ((NI) 1), ((NI) 0), ((NU8) 9), LOC19);
	}
	LA7: ;
}

N_NIMCALL(void, parsecodeblockparams_334612)(Rstgenerator328010* d, Rstnode315008* n, Codeblockparams328014* Result) {
	NimStringDesc* LOC12;
{	init_328074(Result);
	{
		if (!n == 0) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	{
		if (!!((*n).sons->data[((NI) 1)] == 0)) goto LA7;
		{
			Rstnode315008* son_335202;
			Rstnodeseq315006* HEX3Atmp_335205;
			NI i_335208;
			NI L_335210;
			son_335202 = 0;
			HEX3Atmp_335205 = 0;
			HEX3Atmp_335205 = (*(*n).sons->data[((NI) 1)]).sons;
			i_335208 = ((NI) 0);
			L_335210 = (HEX3Atmp_335205 ? HEX3Atmp_335205->Sup.len : 0);
			{
				while (1) {
					if (!(i_335208 < L_335210)) goto LA11;
					son_335202 = HEX3Atmp_335205->data[i_335208];
					parsecodeblockfield_334603(d, son_335202, Result);
					i_335208 += ((NI) 1);
				} LA11: ;
			}
		}
	}
	LA7: ;
	LOC12 = 0;
	LOC12 = getargument_316059(n);
	unsureAsgnRef((void**) (&(*Result).langstr), nsuStrip(LOC12, NIM_TRUE, NIM_TRUE, TMP2302));
	{
		if (!!((((*Result).langstr) && ((*Result).langstr)->Sup.len == 0))) goto LA15;
		(*Result).lang = getsourcelanguage_323075((*Result).langstr);
	}
	LA15: ;
	}BeforeRet: ;
}

N_NIMCALL(void, buildlineshtmltable_335211)(Rstgenerator328010* d, Codeblockparams328014* params, NimStringDesc* code, Keyvaluepair143205* Result) {
	NimStringDesc* id;
	NI codelines;
	NimStringDesc* LOC7;
	NI LOC8;
	NI line;
	NimStringDesc* LOC13;
	NimStringDesc* LOC14;
	NimStringDesc* LOC15;
	NimStringDesc* LOC16;
	NimStringDesc* LOC17;
	NimStringDesc* LOC18;
	NimStringDesc* LOC19;
	NimStringDesc* LOC20;
{	(*d).listingcounter += ((NI) 1);
	id = nimIntToStr((*d).listingcounter);
	{
		NimStringDesc* LOC5;
		NimStringDesc* LOC6;
		if (!!((*params).numberlines)) goto LA3;
		LOC5 = 0;
		LOC5 = getordefault_143814((*d).config, ((NimStringDesc*) &TMP2371));
		unsureAsgnRef((void**) (&(*Result).Field0), nsuFormatSingleElem(LOC5, id));
		LOC6 = 0;
		LOC6 = getordefault_143814((*d).config, ((NimStringDesc*) &TMP2372));
		unsureAsgnRef((void**) (&(*Result).Field1), nsuFormatSingleElem(LOC6, id));
		goto BeforeRet;
	}
	LA3: ;
	LOC7 = 0;
	LOC7 = nsuStrip(code, NIM_TRUE, NIM_TRUE, TMP2302);
	LOC8 = 0;
	LOC8 = nsuCountLines(LOC7);
	codelines = (NI)(((NI) 1) + LOC8);
	unsureAsgnRef((void**) (&(*Result).Field0), copyString(((NimStringDesc*) &TMP2373)));
	line = (*params).startline;
	{
		while (1) {
			NimStringDesc* LOC11;
			NimStringDesc* LOC12;
			if (!(((NI) 0) < codelines)) goto LA10;
			LOC11 = 0;
			LOC12 = 0;
			LOC12 = nimIntToStr(line);
			LOC11 = rawNewString(LOC12->Sup.len + 2);
appendString(LOC11, LOC12);
appendString(LOC11, ((NimStringDesc*) &TMP2260));
			(*Result).Field0 = resizeString((*Result).Field0, LOC11->Sup.len + 0);
appendString((*Result).Field0, LOC11);
			line += ((NI) 1);
			codelines -= ((NI) 1);
		} LA10: ;
	}
	LOC13 = 0;
	LOC14 = 0;
	LOC14 = getordefault_143814((*d).config, ((NimStringDesc*) &TMP2371));
	LOC15 = 0;
	LOC15 = nsuFormatSingleElem(LOC14, id);
	LOC13 = rawNewString(LOC15->Sup.len + 15);
appendString(LOC13, ((NimStringDesc*) &TMP2374));
appendString(LOC13, LOC15);
	(*Result).Field0 = resizeString((*Result).Field0, LOC13->Sup.len + 0);
appendString((*Result).Field0, LOC13);
	LOC16 = 0;
	LOC17 = 0;
	LOC17 = getordefault_143814((*d).config, ((NimStringDesc*) &TMP2372));
	LOC18 = 0;
	LOC18 = nsuFormatSingleElem(LOC17, id);
	LOC19 = 0;
	LOC19 = getordefault_143814((*d).config, ((NimStringDesc*) &TMP2376));
	LOC20 = 0;
	LOC20 = nsuFormatSingleElem(LOC19, id);
	LOC16 = rawNewString(LOC18->Sup.len + LOC20->Sup.len + 26);
appendString(LOC16, LOC18);
appendString(LOC16, ((NimStringDesc*) &TMP2375));
appendString(LOC16, LOC20);
	unsureAsgnRef((void**) (&(*Result).Field1), LOC16);
	}BeforeRet: ;
}

N_NIMCALL(void, rendercodeblock_335421)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result) {
	Codeblockparams328014 params;
	Rstnode315008* m;
	Keyvaluepair143205 LOC5;
	NimStringDesc* blockstart;
	NimStringDesc* blockend;
	TY240694 LOC6;
	TY240694 LOC27;
{	{
		if (!((*n).sons->data[((NI) 2)] == NIM_NIL)) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	memset((void*)(&params), 0, sizeof(params));
	chckNil((void*)(&params));
	memset((void*)(&params), 0, sizeof(params));
	parsecodeblockparams_334612(d, n, (&params));
	m = (*(*n).sons->data[((NI) 2)]).sons->data[((NI) 0)];
	memset((void*)(&LOC5), 0, sizeof(LOC5));
	buildlineshtmltable_335211(d, (&params), (*m).text, (&LOC5));
	blockstart = 0;
	blockstart = LOC5.Field0;
	blockend = 0;
	blockend = LOC5.Field1;
	memset((void*)LOC6, 0, sizeof(LOC6));
	dispa_328576((*d).target, result, blockstart, ((NimStringDesc*) &TMP2377), LOC6, 0);
	{
		if (!(params.lang == ((NU8) 0))) goto LA9;
		{
			if (!(((NI) 0) < (params.langstr ? params.langstr->Sup.len : 0))) goto LA13;
			(*d).msghandler((*d).filename, ((NI) 1), ((NI) 0), ((NU8) 8), params.langstr);
		}
		LA13: ;
		{
			NIM_CHAR letter_335816;
			NimStringDesc* HEX3Atmp_335828;
			NI i_335831;
			NI L_335833;
			letter_335816 = 0;
			HEX3Atmp_335828 = 0;
			HEX3Atmp_335828 = (*m).text;
			i_335831 = ((NI) 0);
			L_335833 = (HEX3Atmp_335828 ? HEX3Atmp_335828->Sup.len : 0);
			{
				while (1) {
					if (!(i_335831 < L_335833)) goto LA17;
					letter_335816 = HEX3Atmp_335828->data[i_335831];
					escchar_328443((*d).target, result, letter_335816);
					i_335831 += ((NI) 1);
				} LA17: ;
			}
		}
	}
	goto LA7;
	LA9: ;
	{
		Generaltokenizer323008 g;
		memset((void*)(&g), 0, sizeof(g));
		g.Sup.m_type = (&NTI323008);
		initgeneraltokenizer_323253((&g), (*m).text);
		{
			while (1) {
				getnexttoken_325458((&g), params.lang);
				switch (g.kind) {
				case ((NU8) 0):
				{
					goto LA19;
				}
				break;
				case ((NU8) 1):
				case ((NU8) 2):
				{
					NimStringDesc* LOC23;
					LOC23 = 0;
					LOC23 = copyStrLast((*m).text, g.start, (NI)((NI)(g.length + g.start) - ((NI) 1)));
					(*result) = resizeString((*result), LOC23->Sup.len + 0);
appendString((*result), LOC23);
				}
				break;
				default:
				{
					TY186169 LOC25;
					NimStringDesc* LOC26;
					memset((void*)LOC25, 0, sizeof(LOC25));
					LOC26 = 0;
					LOC26 = copyStrLast((*m).text, g.start, (NI)((NI)(g.length + g.start) - ((NI) 1)));
					LOC25[0] = esc_328484((*d).target, LOC26, ((NI) -1));
					LOC25[1] = copyString(tokenclasstostr_323066[(g.kind)- 0]);
					dispa_328576((*d).target, result, ((NimStringDesc*) &TMP2539), ((NimStringDesc*) &TMP2540), LOC25, 2);
				}
				break;
				}
			}
		} LA19: ;
		deinitgeneraltokenizer_323258((&g));
	}
	LA7: ;
	memset((void*)LOC27, 0, sizeof(LOC27));
	dispa_328576((*d).target, result, blockend, ((NimStringDesc*) &TMP2574), LOC27, 0);
	}BeforeRet: ;
}

N_NIMCALL(void, rendercontainer_335837)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result) {
	NimStringDesc* tmp;
	NimStringDesc* arg;
	NimStringDesc* LOC1;
	tmp = copyString(((NimStringDesc*) &TMP2251));
	renderrsttoout_328599(d, (*n).sons->data[((NI) 2)], (&tmp));
	LOC1 = 0;
	LOC1 = getargument_316059(n);
	arg = nsuStrip(LOC1, NIM_TRUE, NIM_TRUE, TMP2302);
	{
		TY185752 LOC6;
		if (!((arg) && (arg)->Sup.len == 0)) goto LA4;
		memset((void*)LOC6, 0, sizeof(LOC6));
		LOC6[0] = copyString(tmp);
		dispa_328576((*d).target, result, ((NimStringDesc*) &TMP2575), ((NimStringDesc*) &TMP2307), LOC6, 1);
	}
	goto LA2;
	LA4: ;
	{
		TY186169 LOC8;
		memset((void*)LOC8, 0, sizeof(LOC8));
		LOC8[0] = copyString(arg);
		LOC8[1] = copyString(tmp);
		dispa_328576((*d).target, result, ((NimStringDesc*) &TMP2576), ((NimStringDesc*) &TMP2577), LOC8, 2);
	}
	LA2: ;
}

N_NIMCALL(void, renderindexterm_328846)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result) {
	NimStringDesc* refname;
	NimStringDesc* id;
	NimStringDesc* LOC8;
	NI LOC9;
	NimStringDesc* LOC10;
	NimStringDesc* term;
	TY186169 LOC11;
	refname = rstnodetorefname_316049(n);
	{
		NIM_BOOL LOC3;
		NI LOC6;
		LOC3 = 0;
		LOC3 = haskey_328854((*d).seenindexterms, refname);
		if (!LOC3) goto LA4;
		LOC6 = 0;
		LOC6 = getordefault_328886((*d).seenindexterms, refname);
		HEX5BHEX5DHEX3D_328915((&(*d).seenindexterms), refname, (NI)(LOC6 + ((NI) 1)));
	}
	goto LA1;
	LA4: ;
	{
		HEX5BHEX5DHEX3D_328915((&(*d).seenindexterms), refname, ((NI) 1));
	}
	LA1: ;
	LOC8 = 0;
	LOC9 = 0;
	LOC9 = getordefault_328886((*d).seenindexterms, refname);
	LOC10 = 0;
	LOC10 = nimIntToStr(LOC9);
	LOC8 = rawNewString(refname->Sup.len + LOC10->Sup.len + 1);
appendString(LOC8, refname);
appendChar(LOC8, 95);
appendString(LOC8, LOC10);
	id = LOC8;
	term = copyString(((NimStringDesc*) &TMP2251));
	renderaux_328606(d, n, (&term));
	setindexterm_328683(d, id, term, (*d).currentsection, ((NimStringDesc*) &TMP2251));
	memset((void*)LOC11, 0, sizeof(LOC11));
	LOC11[0] = copyString(id);
	LOC11[1] = copyString(term);
	dispa_328576((*d).target, result, ((NimStringDesc*) &TMP2591), ((NimStringDesc*) &TMP2592), LOC11, 2);
}

N_NIMCALL(void, rendersmiley_334595)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result) {
	TY185752 LOC1;
	NimStringDesc* LOC2;
	memset((void*)LOC1, 0, sizeof(LOC1));
	LOC2 = 0;
	LOC2 = getordefault_143814((*d).config, ((NimStringDesc*) &TMP2597));
	LOC1[0] = nsuFormatSingleElem(LOC2, (*n).text);
	dispa_328576((*d).target, result, ((NimStringDesc*) &TMP2595), ((NimStringDesc*) &TMP2596), LOC1, 1);
}

N_NIMCALL(void, renderrsttoout_328599)(Rstgenerator328010* d, Rstnode315008* n, NimStringDesc** result) {
{	{
		if (!(n == NIM_NIL)) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	switch ((*n).kind) {
	case ((NU8) 0):
	{
		renderaux_328606(d, n, result);
	}
	break;
	case ((NU8) 1):
	{
		renderheadline_334043(d, n, result);
	}
	break;
	case ((NU8) 2):
	{
		renderoverline_334221(d, n, result);
	}
	break;
	case ((NU8) 3):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2266), ((NimStringDesc*) &TMP2267), result);
	}
	break;
	case ((NU8) 4):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2268), ((NimStringDesc*) &TMP2269), result);
	}
	break;
	case ((NU8) 5):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2270), ((NimStringDesc*) &TMP2271), result);
	}
	break;
	case ((NU8) 6):
	case ((NU8) 8):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2272), ((NimStringDesc*) &TMP2273), result);
	}
	break;
	case ((NU8) 7):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2274), ((NimStringDesc*) &TMP2275), result);
	}
	break;
	case ((NU8) 9):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2276), ((NimStringDesc*) &TMP2277), result);
	}
	break;
	case ((NU8) 10):
	{
		renderaux_328606(d, n, result);
	}
	break;
	case ((NU8) 11):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2278), ((NimStringDesc*) &TMP2279), result);
	}
	break;
	case ((NU8) 12):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2280), ((NimStringDesc*) &TMP2281), result);
	}
	break;
	case ((NU8) 13):
	{
		NimStringDesc* tmp;
		tmp = copyString(((NimStringDesc*) &TMP2251));
		{
			NI i_335922;
			NI HEX3Atmp_335983;
			NI LOC19;
			NI res_335986;
			i_335922 = 0;
			HEX3Atmp_335983 = 0;
			LOC19 = 0;
			LOC19 = len_315081(n);
			HEX3Atmp_335983 = (NI)(LOC19 - ((NI) 1));
			res_335986 = ((NI) 0);
			{
				while (1) {
					if (!(res_335986 <= HEX3Atmp_335983)) goto LA21;
					i_335922 = res_335986;
					renderrsttoout_328599(d, (*n).sons->data[i_335922], (&tmp));
					res_335986 += ((NI) 1);
				} LA21: ;
			}
		}
		{
			TY185752 LOC26;
			if (!!(((tmp ? tmp->Sup.len : 0) == ((NI) 0)))) goto LA24;
			memset((void*)LOC26, 0, sizeof(LOC26));
			LOC26[0] = copyString(tmp);
			dispa_328576((*d).target, result, ((NimStringDesc*) &TMP2282), ((NimStringDesc*) &TMP2277), LOC26, 1);
		}
		LA24: ;
	}
	break;
	case ((NU8) 14):
	{
		renderfield_335874(d, n, result);
	}
	break;
	case ((NU8) 15):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2308), ((NimStringDesc*) &TMP2309), result);
	}
	break;
	case ((NU8) 16):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2310), ((NimStringDesc*) &TMP2311), result);
	}
	break;
	case ((NU8) 51):
	{
		renderrsttoout_328599(d, (*n).sons->data[((NI) 2)], result);
	}
	break;
	case ((NU8) 17):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2312), ((NimStringDesc*) &TMP2313), result);
	}
	break;
	case ((NU8) 18):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2306), ((NimStringDesc*) &TMP2307), result);
	}
	break;
	case ((NU8) 19):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2314), ((NimStringDesc*) &TMP2315), result);
	}
	break;
	case ((NU8) 23):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2316), ((NimStringDesc*) &TMP2311), result);
	}
	break;
	case ((NU8) 20):
	case ((NU8) 21):
	case ((NU8) 22):
	{
		{
			if (!NIM_TRUE) goto LA38;
			raiseassert_89893(((NimStringDesc*) &TMP2318));
		}
		LA38: ;
	}
	break;
	case ((NU8) 24):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2319), ((NimStringDesc*) &TMP2320), result);
	}
	break;
	case ((NU8) 25):
	{
		{
			if (!NIM_TRUE) goto LA44;
			raiseassert_89893(((NimStringDesc*) &TMP2318));
		}
		LA44: ;
	}
	break;
	case ((NU8) 26):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2321), ((NimStringDesc*) &TMP2269), result);
	}
	break;
	case ((NU8) 27):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2322), ((NimStringDesc*) &TMP2323), result);
	}
	break;
	case ((NU8) 28):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2324), ((NimStringDesc*) &TMP2325), result);
	}
	break;
	case ((NU8) 29):
	case ((NU8) 30):
	{
		NimStringDesc* LOC50;
		NimStringDesc* LOC51;
		LOC50 = 0;
		LOC51 = 0;
		LOC51 = texcolumns_335850(n);
		LOC50 = rawNewString(LOC51->Sup.len + 65);
appendString(LOC50, ((NimStringDesc*) &TMP2327));
appendString(LOC50, LOC51);
appendString(LOC50, ((NimStringDesc*) &TMP2329));
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2326), LOC50, result);
	}
	break;
	case ((NU8) 31):
	{
		{
			NI LOC55;
			LOC55 = 0;
			LOC55 = len_315081(n);
			if (!(((NI) 1) <= LOC55)) goto LA56;
			{
				if (!((*d).target == ((NU8) 1))) goto LA60;
				renderrsttoout_328599(d, (*n).sons->data[((NI) 0)], result);
				{
					NI i_335946;
					NI HEX3Atmp_335991;
					NI LOC63;
					NI res_335994;
					i_335946 = 0;
					HEX3Atmp_335991 = 0;
					LOC63 = 0;
					LOC63 = len_315081(n);
					HEX3Atmp_335991 = (NI)(LOC63 - ((NI) 1));
					res_335994 = ((NI) 1);
					{
						while (1) {
							if (!(res_335994 <= HEX3Atmp_335991)) goto LA65;
							i_335946 = res_335994;
							(*result) = resizeString((*result), 3);
appendString((*result), ((NimStringDesc*) &TMP2330));
							renderrsttoout_328599(d, (*n).sons->data[i_335946], result);
							res_335994 += ((NI) 1);
						} LA65: ;
					}
				}
				(*result) = resizeString((*result), 12);
appendString((*result), ((NimStringDesc*) &TMP2331));
			}
			goto LA58;
			LA60: ;
			{
				(*result) = resizeString((*result), 4);
appendString((*result), ((NimStringDesc*) &TMP2332));
				renderaux_328606(d, n, result);
				(*result) = resizeString((*result), 7);
appendString((*result), ((NimStringDesc*) &TMP2333));
			}
			LA58: ;
		}
		LA56: ;
	}
	break;
	case ((NU8) 33):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2310), ((NimStringDesc*) &TMP2307), result);
	}
	break;
	case ((NU8) 32):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2334), ((NimStringDesc*) &TMP2335), result);
	}
	break;
	case ((NU8) 34):
	{
		{
			if (!NIM_TRUE) goto LA72;
			raiseassert_89893(((NimStringDesc*) &TMP2318));
		}
		LA72: ;
	}
	break;
	case ((NU8) 35):
	{
		{
			if (!NIM_TRUE) goto LA77;
			raiseassert_89893(((NimStringDesc*) &TMP2318));
		}
		LA77: ;
	}
	break;
	case ((NU8) 36):
	{
		{
			if (!NIM_TRUE) goto LA82;
			raiseassert_89893(((NimStringDesc*) &TMP2318));
		}
		LA82: ;
	}
	break;
	case ((NU8) 39):
	{
		NimStringDesc* tmp;
		TY186169 LOC85;
		tmp = copyString(((NimStringDesc*) &TMP2251));
		renderaux_328606(d, n, (&tmp));
		memset((void*)LOC85, 0, sizeof(LOC85));
		LOC85[0] = copyString(tmp);
		LOC85[1] = rstnodetorefname_316049(n);
		dispa_328576((*d).target, result, ((NimStringDesc*) &TMP2336), ((NimStringDesc*) &TMP2337), LOC85, 2);
	}
	break;
	case ((NU8) 37):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2338), ((NimStringDesc*) &TMP2339), result);
	}
	break;
	case ((NU8) 38):
	{
		NimStringDesc* tmp0;
		NimStringDesc* tmp1;
		TY186169 LOC88;
		tmp0 = copyString(((NimStringDesc*) &TMP2251));
		tmp1 = copyString(((NimStringDesc*) &TMP2251));
		renderrsttoout_328599(d, (*n).sons->data[((NI) 0)], (&tmp0));
		renderrsttoout_328599(d, (*n).sons->data[((NI) 1)], (&tmp1));
		memset((void*)LOC88, 0, sizeof(LOC88));
		LOC88[0] = copyString(tmp0);
		LOC88[1] = copyString(tmp1);
		dispa_328576((*d).target, result, ((NimStringDesc*) &TMP2340), ((NimStringDesc*) &TMP2341), LOC88, 2);
	}
	break;
	case ((NU8) 41):
	case ((NU8) 42):
	{
		renderaux_328606(d, n, result);
	}
	break;
	case ((NU8) 48):
	{
		{
			Rstnode315008* LOC95;
			NimStringDesc* LOC96;
			if (!!(((*d).target == ((NU8) 1)))) goto LA93;
			LOC95 = 0;
			LOC95 = lastson_315126(n);
			LOC96 = 0;
			LOC96 = addnodes_316052(LOC95);
			(*result) = resizeString((*result), LOC96->Sup.len + 0);
appendString((*result), LOC96);
		}
		LA93: ;
	}
	break;
	case ((NU8) 49):
	{
		{
			Rstnode315008* LOC102;
			NimStringDesc* LOC103;
			if (!((*d).target == ((NU8) 1))) goto LA100;
			LOC102 = 0;
			LOC102 = lastson_315126(n);
			LOC103 = 0;
			LOC103 = addnodes_316052(LOC102);
			(*result) = resizeString((*result), LOC103->Sup.len + 0);
appendString((*result), LOC103);
		}
		LA100: ;
	}
	break;
	case ((NU8) 45):
	case ((NU8) 46):
	{
		renderimage_334335(d, n, result);
	}
	break;
	case ((NU8) 47):
	{
		rendercodeblock_335421(d, n, result);
	}
	break;
	case ((NU8) 50):
	{
		rendercontainer_335837(d, n, result);
	}
	break;
	case ((NU8) 62):
	case ((NU8) 52):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2578), ((NimStringDesc*) &TMP2578), result);
	}
	break;
	case ((NU8) 40):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2251), ((NimStringDesc*) &TMP2251), result);
	}
	break;
	case ((NU8) 53):
	{
		NimStringDesc* tmp0;
		NimStringDesc* tmp1;
		TY186169 LOC110;
		tmp0 = copyString(((NimStringDesc*) &TMP2251));
		tmp1 = copyString(((NimStringDesc*) &TMP2251));
		renderrsttoout_328599(d, (*n).sons->data[((NI) 0)], (&tmp0));
		renderrsttoout_328599(d, (*n).sons->data[((NI) 1)], (&tmp1));
		memset((void*)LOC110, 0, sizeof(LOC110));
		LOC110[0] = copyString(tmp0);
		LOC110[1] = copyString(tmp1);
		dispa_328576((*d).target, result, ((NimStringDesc*) &TMP2539), ((NimStringDesc*) &TMP2540), LOC110, 2);
	}
	break;
	case ((NU8) 54):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2579), ((NimStringDesc*) &TMP2580), result);
	}
	break;
	case ((NU8) 55):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2581), ((NimStringDesc*) &TMP2582), result);
	}
	break;
	case ((NU8) 57):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2583), ((NimStringDesc*) &TMP2584), result);
	}
	break;
	case ((NU8) 58):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2585), ((NimStringDesc*) &TMP2335), result);
	}
	break;
	case ((NU8) 59):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2586), ((NimStringDesc*) &TMP2587), result);
	}
	break;
	case ((NU8) 60):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2588), ((NimStringDesc*) &TMP2584), result);
	}
	break;
	case ((NU8) 56):
	{
		renderindexterm_328846(d, n, result);
	}
	break;
	case ((NU8) 61):
	{
		renderaux_328632(d, n, ((NimStringDesc*) &TMP2593), ((NimStringDesc*) &TMP2594), result);
	}
	break;
	case ((NU8) 63):
	{
		rendersmiley_334595(d, n, result);
	}
	break;
	case ((NU8) 64):
	{
		NimStringDesc* LOC121;
		LOC121 = 0;
		LOC121 = esc_328484((*d).target, (*n).text, ((NI) -1));
		(*result) = resizeString((*result), LOC121->Sup.len + 0);
appendString((*result), LOC121);
	}
	break;
	case ((NU8) 44):
	{
		(*d).hastoc = NIM_TRUE;
	}
	break;
	case ((NU8) 43):
	{
		unsureAsgnRef((void**) (&(*d).meta[(((NU8) 1))- 0]), copyString(((NimStringDesc*) &TMP2251)));
		renderrsttoout_328599(d, (*n).sons->data[((NI) 0)], (&(*d).meta[(((NU8) 1))- 0]));
	}
	break;
	}
	}BeforeRet: ;
}
N_NIMCALL(void, TMP5038)(void* p, NI op) {
	TY328029* a;
	NI LOC1;
	a = (TY328029*)p;
	LOC1 = 0;
	for (LOC1 = 0; LOC1 < a->Sup.len; LOC1++) {
	nimGCvisit((void*)a->data[LOC1].n, op);
	nimGCvisit((void*)a->data[LOC1].refname, op);
	nimGCvisit((void*)a->data[LOC1].header, op);
	}
}

N_NIMCALL(void, initrstgenerator_328078)(Rstgenerator328010* g, NU8 target, Stringtableobj143209* config, NimStringDesc* filename, NU8 options, Findfilehandler316014 findfile, Msghandler316012 msghandler) {
	TY117115 fileparts;
	NimStringDesc* s;
	unsureAsgnRef((void**) (&(*g).config), config);
	(*g).target = target;
	unsureAsgnRef((void**) (&(*g).tocpart), (TY328029*) newSeq((&NTI328029), 0));
	unsureAsgnRef((void**) (&(*g).filename), copyString(filename));
	(*g).splitafter = ((NI) 20);
	unsureAsgnRef((void**) (&(*g).theindex), copyString(((NimStringDesc*) &TMP2251)));
	(*g).options = options;
	(*g).findfile = findfile;
	unsureAsgnRef((void**) (&(*g).currentsection), copyString(((NimStringDesc*) &TMP2251)));
	memset((void*)(&fileparts), 0, sizeof(fileparts));
	chckNil((void*)(&fileparts));
	memset((void*)(&fileparts), 0, sizeof(fileparts));
	nossplitFile(filename, (&fileparts));
	{
		NimStringDesc* LOC5;
		if (!eqStrings(fileparts.Field2, ((NimStringDesc*) &TMP5042))) goto LA3;
		LOC5 = 0;
		LOC5 = rawNewString(fileparts.Field1->Sup.len + 7);
appendString(LOC5, ((NimStringDesc*) &TMP5043));
appendString(LOC5, fileparts.Field1);
		unsureAsgnRef((void**) (&(*g).currentsection), LOC5);
	}
	LA3: ;
	inittable_328106(((NI) 64), (&(*g).seenindexterms));
	(*g).msghandler = msghandler;
	s = getordefault_143814(config, ((NimStringDesc*) &TMP5044));
	{
		if (!!(((s) && (s)->Sup.len == 0))) goto LA8;
		(*g).splitafter = nsuParseInt(s);
	}
	LA8: ;
	{
		NU8 i_328414;
		NI res_328418;
		i_328414 = 0;
		res_328418 = ((NI) 0);
		{
			while (1) {
				if (!(res_328418 <= ((NI) 4))) goto LA12;
				i_328414 = ((NU8) (res_328418));
				unsureAsgnRef((void**) (&(*g).meta[(i_328414)- 0]), copyString(((NimStringDesc*) &TMP2251)));
				res_328418 += ((NI) 1);
			} LA12: ;
		}
	}
}

N_NIMCALL(void, rendertocentry_334302)(Rstgenerator328010* d, Tocentry328006* e, NimStringDesc** result) {
	TY186169 LOC1;
	memset((void*)LOC1, 0, sizeof(LOC1));
	LOC1[0] = copyString((*e).refname);
	LOC1[1] = copyString((*e).header);
	dispa_328576((*d).target, result, ((NimStringDesc*) &TMP5123), ((NimStringDesc*) &TMP5124), LOC1, 2);
}

N_NIMCALL(void, rendertocentries_334310)(Rstgenerator328010* d, NI* j, NI lvl, NimStringDesc** result) {
	NimStringDesc* tmp;
	tmp = copyString(((NimStringDesc*) &TMP2251));
	{
		while (1) {
			NI a;
			if (!((*j) <= ((*d).tocpart ? ((*d).tocpart->Sup.len-1) : -1))) goto LA2;
			a = ((*(*d).tocpart->data[(*j)].n).level > 0? ((*(*d).tocpart->data[(*j)].n).level) : -((*(*d).tocpart->data[(*j)].n).level));
			{
				if (!(a == lvl)) goto LA5;
				rendertocentry_334302(d, (&(*d).tocpart->data[(*j)]), (&tmp));
				(*j) += ((NI) 1);
			}
			goto LA3;
			LA5: ;
			{
				if (!(lvl < a)) goto LA8;
				rendertocentries_334310(d, j, a, (&tmp));
			}
			goto LA3;
			LA8: ;
			{
				goto LA1;
			}
			LA3: ;
		} LA2: ;
	} LA1: ;
	{
		TY185752 LOC15;
		if (!(((NI) 1) < lvl)) goto LA13;
		memset((void*)LOC15, 0, sizeof(LOC15));
		LOC15[0] = copyString(tmp);
		dispa_328576((*d).target, result, ((NimStringDesc*) &TMP5125), ((NimStringDesc*) &TMP5126), LOC15, 1);
	}
	goto LA11;
	LA13: ;
	{
		(*result) = resizeString((*result), tmp->Sup.len + 0);
appendString((*result), tmp);
	}
	LA11: ;
}

N_NIMCALL(void, writeindexfile_328421)(Rstgenerator328010* g, NimStringDesc* outfile) {
	{
		if (!(((NI) 0) < ((*g).theindex ? (*g).theindex->Sup.len : 0))) goto LA3;
		writefile_15469(outfile, (*g).theindex);
	}
	LA3: ;
}
N_NIMCALL(void, TMP5195)(void* p, NI op) {
	TY331853* a;
	NI LOC1;
	a = (TY331853*)p;
	LOC1 = 0;
	for (LOC1 = 0; LOC1 < a->Sup.len; LOC1++) {
	nimGCvisit((void*)a->data[LOC1].keyword, op);
	nimGCvisit((void*)a->data[LOC1].link, op);
	nimGCvisit((void*)a->data[LOC1].linktitle, op);
	nimGCvisit((void*)a->data[LOC1].linkdesc, op);
	}
}

static N_INLINE(NIM_BOOL, skipfinddata_120434)(Win32finddata107213* f) {
	NIM_BOOL result;
	NIM_BOOL LOC1;
	NIM_BOOL LOC3;
	NIM_BOOL LOC5;
	result = 0;
	LOC1 = 0;
	LOC1 = (((NI) ((*f).cfilename[(((NI) 0))- 0])) == ((NI) 46));
	if (!(LOC1)) goto LA2;
	LOC3 = 0;
	LOC3 = (((NI) ((*f).cfilename[(((NI) 1))- 0])) == ((NI) 0));
	if (LOC3) goto LA4;
	LOC5 = 0;
	LOC5 = (((NI) ((*f).cfilename[(((NI) 1))- 0])) == ((NI) 46));
	if (!(LOC5)) goto LA6;
	LOC5 = (((NI) ((*f).cfilename[(((NI) 2))- 0])) == ((NI) 0));
	LA6: ;
	LOC3 = LOC5;
	LA4: ;
	LOC1 = LOC3;
	LA2: ;
	result = LOC1;
	return result;
}

N_NIMCALL(NIM_BOOL, isdocumentationtitle_329515)(NimStringDesc* hyperlink) {
	NIM_BOOL result;
	NI LOC1;
	result = 0;
	LOC1 = 0;
	LOC1 = nsuFindChar(hyperlink, 35, ((NI) 0));
	result = (LOC1 < ((NI) 0));
	return result;
}

N_NIMCALL(NimStringDesc*, unquoteindexcolumn_328679)(NimStringDesc* text) {
	NimStringDesc* result;
	NimStringDesc* LOC1;
	NimStringDesc* LOC2;
	result = 0;
	LOC1 = 0;
	LOC1 = nsuReplaceStr(text, ((NimStringDesc*) &TMP2263), ((NimStringDesc*) &TMP2262));
	LOC2 = 0;
	LOC2 = nsuReplaceStr(LOC1, ((NimStringDesc*) &TMP2261), ((NimStringDesc*) &TMP2260));
	result = nsuReplaceStr(LOC2, ((NimStringDesc*) &TMP2259), ((NimStringDesc*) &TMP2258));
	return result;
}

static N_INLINE(NI, HEX21HEX26_140004)(NI h, NI val) {
	NI result;
	result = 0;
	result = (NI)((NU64)(h) + (NU64)(val));
	result = (NI)((NU64)(result) + (NU64)((NI)((NU64)(result) << (NU64)(((NI) 10)))));
	result = (NI)(result ^ (NI)((NU64)(result) >> (NU64)(((NI) 6))));
	return result;
}

static N_INLINE(NimStringDesc*, or_328594)(NimStringDesc* x, NimStringDesc* y) {
	NimStringDesc* result;
	result = 0;
	{
		if (!x == 0) goto LA3;
		result = copyString(y);
	}
	goto LA1;
	LA3: ;
	{
		result = copyString(x);
	}
	LA1: ;
	return result;
}

static N_INLINE(NI, HEX21HEX24_140027)(NI h) {
	NI result;
	result = 0;
	result = (NI)((NU64)(h) + (NU64)((NI)((NU64)(h) << (NU64)(((NI) 3)))));
	result = (NI)(result ^ (NI)((NU64)(result) >> (NU64)(((NI) 11))));
	result = (NI)((NU64)(result) + (NU64)((NI)((NU64)(result) << (NU64)(((NI) 15)))));
	return result;
}

N_NIMCALL(NI, hash_329164)(Indexentry329126* x) {
	NI result;
	NI LOC1;
	NI LOC2;
	NimStringDesc* LOC3;
	NI LOC4;
	NimStringDesc* LOC5;
	NI LOC6;
	result = 0;
	LOC1 = 0;
	LOC1 = hash_140827((*x).keyword);
	LOC2 = 0;
	LOC2 = hash_140827((*x).link);
	result = HEX21HEX26_140004(LOC1, LOC2);
	LOC3 = 0;
	LOC3 = or_328594((*x).linktitle, ((NimStringDesc*) &TMP2251));
	LOC4 = 0;
	LOC4 = hash_140827(LOC3);
	result = HEX21HEX26_140004(result, LOC4);
	LOC5 = 0;
	LOC5 = or_328594((*x).linkdesc, ((NimStringDesc*) &TMP2251));
	LOC6 = 0;
	LOC6 = hash_140827(LOC5);
	result = HEX21HEX26_140004(result, LOC6);
	result = HEX21HEX24_140027(result);
	return result;
}

N_NIMCALL(void, readindexdir_331847)(NimStringDesc* dir, TY331850* Result) {
	NI L;
	TY332473 LOC91;
	unsureAsgnRef((void**) (&(*Result).Field0), (TY127402*) newSeq((&NTI127402), 0));
	inittable_331875(((NI) 32), (&(*Result).Field2));
	unsureAsgnRef((void**) (&(*Result).Field1), (TY331853*) newSeq((&NTI331853), ((NI) 15000)));
	(*Result).Field1 = (TY331853*) setLengthSeq(&((*Result).Field1)->Sup, sizeof(Indexentry329126), ((NI) 0));
	L = ((NI) 0);
	{
		NU8 kind_332033;
		NimStringDesc* path_332034;
		Win32finddata107213 f_333869;
		NI h_333871;
		NimStringDesc* LOC2;
		kind_332033 = 0;
		path_332034 = 0;
		memset((void*)(&f_333869), 0, sizeof(f_333869));
		LOC2 = 0;
		LOC2 = HEX2F_116874(dir, ((NimStringDesc*) &TMP5197));
		h_333871 = findfirstfile_120416(LOC2, (&f_333869));
		{
			if (!!((h_333871 == ((NI) -1)))) goto LA5;
			{
				while (1) {
					NU8 k_333873;
					k_333873 = ((NU8) 0);
					{
						NIM_BOOL LOC11;
						NimStringDesc* xx_333875;
						LOC11 = 0;
						LOC11 = skipfinddata_120434((&f_333869));
						if (!!(LOC11)) goto LA12;
						{
							if (!!(((NI32)(f_333869.dwfileattributes & ((NI32) 16)) == ((NI32) 0)))) goto LA16;
							k_333873 = ((NU8) 2);
						}
						LA16: ;
						{
							if (!!(((NI32)(f_333869.dwfileattributes & ((NI32) 1024)) == ((NI32) 0)))) goto LA20;
							k_333873 = (NU8)(k_333873 + ((NI) 1));
						}
						LA20: ;
						{
							NimStringDesc* LOC26;
							if (!NIM_FALSE) goto LA24;
							LOC26 = 0;
							LOC26 = HEX24_83672(((NI16*) ((&f_333869.cfilename[(((NI) 0))- 0]))));
							xx_333875 = nosextractFilename(LOC26);
						}
						goto LA22;
						LA24: ;
						{
							NimStringDesc* LOC28;
							NimStringDesc* LOC29;
							LOC28 = 0;
							LOC28 = HEX24_83672(((NI16*) ((&f_333869.cfilename[(((NI) 0))- 0]))));
							LOC29 = 0;
							LOC29 = nosextractFilename(LOC28);
							xx_333875 = HEX2F_116874(dir, LOC29);
						}
						LA22: ;
						kind_332033 = k_333873;
						path_332034 = xx_333875;
						{
							NIM_BOOL LOC32;
							TY331853* fileentries_333879;
							Indexentry329126 title_333881;
							NI F_333883;
							LOC32 = 0;
							LOC32 = (kind_332033 == ((NU8) 0));
							if (!(LOC32)) goto LA33;
							LOC32 = nsuEndsWith(path_332034, ((NimStringDesc*) &TMP5198));
							LA33: ;
							if (!LOC32) goto LA34;
							fileentries_333879 = 0;
							memset((void*)(&title_333881), 0, sizeof(title_333881));
							F_333883 = ((NI) 0);
							fileentries_333879 = (TY331853*) newSeq((&NTI331853), ((NI) 500));
							fileentries_333879 = (TY331853*) setLengthSeq(&(fileentries_333879)->Sup, sizeof(Indexentry329126), ((NI) 0));
							{
								NimStringDesc* line_333885;
								FILE* f_333887;
								NimStringDesc* res_333889;
								line_333885 = 0;
								f_333887 = open_15417(path_332034, ((NU8) 0), ((NI) 8000));
								res_333889 = rawNewString(((NI) 80));
								{
									while (1) {
										NIM_BOOL LOC39;
										LOC39 = 0;
										LOC39 = readline_15513(f_333887, (&res_333889));
										if (!LOC39) goto LA38;
										line_333885 = res_333889;
										{
											NI s_333892;
											s_333892 = nsuFindChar(line_333885, 9, ((NI) 0));
											{
												if (!(s_333892 < ((NI) 0))) goto LA43;
												goto LA40;
											}
											LA43: ;
											fileentries_333879 = (TY331853*) setLengthSeq(&(fileentries_333879)->Sup, sizeof(Indexentry329126), ((NI) ((NI)(F_333883 + ((NI) 1)))));
											asgnRefNoCycle((void**) (&fileentries_333879->data[F_333883].keyword), copyStrLast(line_333885, ((NI) 0), (NI)(s_333892 - ((NI) 1))));
											asgnRefNoCycle((void**) (&fileentries_333879->data[F_333883].link), copyStr(line_333885, (NI)(s_333892 + ((NI) 1))));
											{
												NIM_BOOL LOC47;
												LOC47 = 0;
												LOC47 = title_333881.keyword == 0;
												if (!(LOC47)) goto LA48;
												LOC47 = isdocumentationtitle_329515(fileentries_333879->data[F_333883].link);
												LA48: ;
												if (!LOC47) goto LA49;
												title_333881.keyword = copyString(fileentries_333879->data[F_333883].keyword);
												title_333881.link = copyString(fileentries_333879->data[F_333883].link);
											}
											LA49: ;
											{
												NI LOC53;
												TY127402* extracols_333894;
												NimStringDesc* LOC56;
												LOC53 = 0;
												LOC53 = nsuFindChar(fileentries_333879->data[F_333883].link, 9, ((NI) 0));
												if (!(((NI) 0) < LOC53)) goto LA54;
												extracols_333894 = nsuSplitChar(fileentries_333879->data[F_333883].link, 9);
												LOC56 = 0;
												LOC56 = fileentries_333879->data[F_333883].link; fileentries_333879->data[F_333883].link = copyStringRC1(extracols_333894->data[((NI) 0)]);
												if (LOC56) nimGCunrefNoCycle(LOC56);
												asgnRefNoCycle((void**) (&fileentries_333879->data[F_333883].linktitle), unquoteindexcolumn_328679(extracols_333894->data[((NI) 1)]));
												asgnRefNoCycle((void**) (&fileentries_333879->data[F_333883].linkdesc), unquoteindexcolumn_328679(extracols_333894->data[((NI) 2)]));
											}
											goto LA51;
											LA54: ;
											{
												NimStringDesc* LOC58;
												NimStringDesc* LOC59;
												LOC58 = 0;
												LOC58 = fileentries_333879->data[F_333883].linktitle; fileentries_333879->data[F_333883].linktitle = copyStringRC1(NIM_NIL);
												if (LOC58) nimGCunrefNoCycle(LOC58);
												LOC59 = 0;
												LOC59 = fileentries_333879->data[F_333883].linkdesc; fileentries_333879->data[F_333883].linkdesc = copyStringRC1(NIM_NIL);
												if (LOC59) nimGCunrefNoCycle(LOC59);
											}
											LA51: ;
											F_333883 += ((NI) 1);
										} LA40: ;
									} LA38: ;
								}
								fclose(f_333887);
							}
							{
								TY117115 LOC80;
								NimStringDesc* LOC81;
								if (!title_333881.keyword == 0) goto LA62;
								{
									NI i_333896;
									NI HEX3Atmp_333898;
									NI res_333900;
									i_333896 = 0;
									HEX3Atmp_333898 = 0;
									HEX3Atmp_333898 = (F_333883 - 1);
									res_333900 = ((NI) 0);
									{
										while (1) {
											if (!(res_333900 <= HEX3Atmp_333898)) goto LA66;
											i_333896 = res_333900;
											{
												NimStringDesc* toc_333902;
												NimStringDesc* LOC76;
												NimStringDesc* LOC77;
												NimStringDesc* LOC78;
												NimStringDesc* LOC79;
												toc_333902 = fileentries_333879->data[i_333896].linktitle;
												{
													NIM_BOOL LOC70;
													NIM_BOOL LOC71;
													LOC70 = 0;
													LOC71 = 0;
													LOC71 = !(toc_333902 == 0);
													if (!(LOC71)) goto LA72;
													LOC71 = (((NI) 0) < (toc_333902 ? toc_333902->Sup.len : 0));
													LA72: ;
													LOC70 = LOC71;
													if (!(LOC70)) goto LA73;
													LOC70 = ((NU8)(toc_333902->data[((NI) 0)]) == (NU8)(32));
													LA73: ;
													if (!LOC70) goto LA74;
													goto LA67;
												}
												LA74: ;
												(*Result).Field1 = (TY331853*) setLengthSeq(&((*Result).Field1)->Sup, sizeof(Indexentry329126), ((NI) ((NI)(L + ((NI) 1)))));
												LOC76 = 0;
												LOC76 = (*Result).Field1->data[L].keyword; (*Result).Field1->data[L].keyword = copyStringRC1(fileentries_333879->data[i_333896].keyword);
												if (LOC76) nimGCunrefNoCycle(LOC76);
												LOC77 = 0;
												LOC77 = (*Result).Field1->data[L].link; (*Result).Field1->data[L].link = copyStringRC1(fileentries_333879->data[i_333896].link);
												if (LOC77) nimGCunrefNoCycle(LOC77);
												LOC78 = 0;
												LOC78 = (*Result).Field1->data[L].linktitle; (*Result).Field1->data[L].linktitle = copyStringRC1(fileentries_333879->data[i_333896].linktitle);
												if (LOC78) nimGCunrefNoCycle(LOC78);
												LOC79 = 0;
												LOC79 = (*Result).Field1->data[L].linkdesc; (*Result).Field1->data[L].linkdesc = copyStringRC1(fileentries_333879->data[i_333896].linkdesc);
												if (LOC79) nimGCunrefNoCycle(LOC79);
												L += ((NI) 1);
											} LA67: ;
											res_333900 += ((NI) 1);
										} LA66: ;
									}
								}
								memset((void*)(&LOC80), 0, sizeof(LOC80));
								nossplitFile(path_332034, (&LOC80));
								(*Result).Field0 = (TY127402*) incrSeqV2(&((*Result).Field0)->Sup, sizeof(NimStringDesc*));
								LOC81 = 0;
								LOC81 = (*Result).Field0->data[(*Result).Field0->Sup.len]; (*Result).Field0->data[(*Result).Field0->Sup.len] = copyStringRC1(LOC80.Field1);
								if (LOC81) nimGCunrefNoCycle(LOC81);
								++(*Result).Field0->Sup.len;
							}
							goto LA60;
							LA62: ;
							{
								NimStringDesc* LOC83;
								NI LOC84;
								NimStringDesc* LOC85;
								LOC83 = 0;
								LOC84 = 0;
								LOC84 = len_332259((*Result).Field2);
								LOC85 = 0;
								LOC85 = nimIntToStr(LOC84);
								LOC83 = rawNewString(LOC85->Sup.len + 8);
appendString(LOC83, ((NimStringDesc*) &TMP5199));
appendString(LOC83, LOC85);
								title_333881.linktitle = LOC83;
								HEX5BHEX5DHEX3D_332268((&(*Result).Field2), (&title_333881), fileentries_333879);
							}
							LA60: ;
						}
						LA34: ;
					}
					LA12: ;
					{
						NI32 LOC88;
						LOC88 = 0;
						LOC88 = Dl_107235(h_333871, (&f_333869));
						if (!(LOC88 == ((NI32) 0))) goto LA89;
						goto LA7;
					}
					LA89: ;
				}
			} LA7: ;
			Dl_107401(h_333871);
		}
		LA5: ;
	}
	memset((void*)(&LOC91), 0, sizeof(LOC91));
	LOC91.ClPrc = ((TMP5202) (cmp_5680)); LOC91.ClEnv = NIM_NIL;
	sort_332466((*Result).Field0->data, (*Result).Field0->Sup.len, LOC91, ((NU8) 1));
}

static N_INLINE(NIM_BOOL, isfilled_166263)(NI hcode) {
	NIM_BOOL result;
	result = 0;
	result = !((hcode == ((NI) 0)));
	return result;
}

N_NIMCALL(void, HEX3CHEX2D_329409)(Indexentry329126* a, Indexentry329126* b) {
	unsureAsgnRef((void**) (&(*a).keyword), (*b).keyword);
	unsureAsgnRef((void**) (&(*a).link), (*b).link);
	{
		if (!(*b).linktitle == 0) goto LA3;
		unsureAsgnRef((void**) (&(*a).linktitle), copyString(NIM_NIL));
	}
	goto LA1;
	LA3: ;
	{
		unsureAsgnRef((void**) (&(*a).linktitle), (*b).linktitle);
	}
	LA1: ;
	{
		if (!(*b).linkdesc == 0) goto LA8;
		unsureAsgnRef((void**) (&(*a).linkdesc), copyString(NIM_NIL));
	}
	goto LA6;
	LA8: ;
	{
		unsureAsgnRef((void**) (&(*a).linkdesc), (*b).linkdesc);
	}
	LA6: ;
}

N_NIMCALL(NI, cmp_329159)(Indexentry329126* a, Indexentry329126* b) {
	NI result;
	result = 0;
	result = nsuCmpIgnoreStyle((*a).keyword, (*b).keyword);
	{
		if (!(result == ((NI) 0))) goto LA3;
		result = nsuCmpIgnoreStyle((*a).link, (*b).link);
	}
	LA3: ;
	return result;
}

N_NIMCALL(NimStringDesc*, generatedocumentationjumps_331317)(Table329139 docs) {
	NimStringDesc* result_331320;
	TY331853* titles;
	TY331853* result_331324;
	TY330573 LOC14;
	TY127402* chunks;
	NimStringDesc* LOC20;
	NimStringDesc* LOC21;
	result_331320 = 0;
	result_331320 = copyString(((NimStringDesc*) &TMP5203));
	result_331324 = (TY331853*) newSeq((&NTI331853), 0);
	{
		Indexentry329126 x_331328;
		memset((void*)(&x_331328), 0, sizeof(x_331328));
		{
			NI h_331784;
			NI HEX3Atmp_331786;
			NI res_331788;
			h_331784 = 0;
			HEX3Atmp_331786 = 0;
			HEX3Atmp_331786 = (docs.data ? (docs.data->Sup.len-1) : -1);
			res_331788 = ((NI) 0);
			{
				while (1) {
					if (!(res_331788 <= HEX3Atmp_331786)) goto LA4;
					h_331784 = res_331788;
					{
						NIM_BOOL LOC7;
						NimStringDesc* LOC10;
						NimStringDesc* LOC11;
						NimStringDesc* LOC12;
						NimStringDesc* LOC13;
						LOC7 = 0;
						LOC7 = isfilled_166263(docs.data->data[h_331784].Field0);
						if (!LOC7) goto LA8;
						x_331328.keyword = docs.data->data[h_331784].Field1.keyword;
						x_331328.link = docs.data->data[h_331784].Field1.link;
						x_331328.linktitle = docs.data->data[h_331784].Field1.linktitle;
						x_331328.linkdesc = docs.data->data[h_331784].Field1.linkdesc;
						result_331324 = (TY331853*) incrSeqV2(&(result_331324)->Sup, sizeof(Indexentry329126));
						LOC10 = 0;
						LOC10 = result_331324->data[result_331324->Sup.len].keyword; result_331324->data[result_331324->Sup.len].keyword = copyStringRC1(x_331328.keyword);
						if (LOC10) nimGCunrefNoCycle(LOC10);
						LOC11 = 0;
						LOC11 = result_331324->data[result_331324->Sup.len].link; result_331324->data[result_331324->Sup.len].link = copyStringRC1(x_331328.link);
						if (LOC11) nimGCunrefNoCycle(LOC11);
						LOC12 = 0;
						LOC12 = result_331324->data[result_331324->Sup.len].linktitle; result_331324->data[result_331324->Sup.len].linktitle = copyStringRC1(x_331328.linktitle);
						if (LOC12) nimGCunrefNoCycle(LOC12);
						LOC13 = 0;
						LOC13 = result_331324->data[result_331324->Sup.len].linkdesc; result_331324->data[result_331324->Sup.len].linkdesc = copyStringRC1(x_331328.linkdesc);
						if (LOC13) nimGCunrefNoCycle(LOC13);
						++result_331324->Sup.len;
					}
					LA8: ;
					res_331788 += ((NI) 1);
				} LA4: ;
			}
		}
	}
	genericSeqAssign((&titles), result_331324, (&NTI331853));
	memset((void*)(&LOC14), 0, sizeof(LOC14));
	LOC14.ClPrc = ((TMP5206) (cmp_329159)); LOC14.ClEnv = NIM_NIL;
	sort_330566(titles->data, titles->Sup.len, LOC14, ((NU8) 1));
	chunks = (TY127402*) newSeq((&NTI127402), 0);
	{
		Indexentry329126 title_331766;
		NI i_331795;
		NI L_331797;
		memset((void*)(&title_331766), 0, sizeof(title_331766));
		i_331795 = ((NI) 0);
		L_331797 = (titles ? titles->Sup.len : 0);
		{
			while (1) {
				NimStringDesc* LOC18;
				NimStringDesc* LOC19;
				if (!(i_331795 < L_331797)) goto LA17;
				title_331766.keyword = titles->data[i_331795].keyword;
				title_331766.link = titles->data[i_331795].link;
				title_331766.linktitle = titles->data[i_331795].linktitle;
				title_331766.linkdesc = titles->data[i_331795].linkdesc;
				LOC18 = 0;
				LOC18 = rawNewString(title_331766.link->Sup.len + title_331766.keyword->Sup.len + 15);
appendString(LOC18, ((NimStringDesc*) &TMP5207));
appendString(LOC18, title_331766.link);
appendString(LOC18, ((NimStringDesc*) &TMP5208));
appendString(LOC18, title_331766.keyword);
appendString(LOC18, ((NimStringDesc*) &TMP5209));
				chunks = (TY127402*) incrSeqV2(&(chunks)->Sup, sizeof(NimStringDesc*));
				LOC19 = 0;
				LOC19 = chunks->data[chunks->Sup.len]; chunks->data[chunks->Sup.len] = copyStringRC1(LOC18);
				if (LOC19) nimGCunrefNoCycle(LOC19);
				++chunks->Sup.len;
				i_331795 += ((NI) 1);
			} LA17: ;
		}
	}
	LOC20 = 0;
	LOC21 = 0;
	LOC21 = nsuJoinSep(chunks->data, chunks->Sup.len, ((NimStringDesc*) &TMP5210));
	LOC20 = rawNewString(LOC21->Sup.len + 6);
appendString(LOC20, LOC21);
appendString(LOC20, ((NimStringDesc*) &TMP5211));
	result_331320 = resizeString(result_331320, LOC20->Sup.len + 0);
appendString(result_331320, LOC20);
	return result_331320;
}

N_NIMCALL(NimStringDesc*, generatemodulejumps_331798)(TY127402* modules) {
	NimStringDesc* result;
	TY127402* chunks;
	NimStringDesc* LOC6;
	NimStringDesc* LOC7;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP5213));
	chunks = (TY127402*) newSeq((&NTI127402), 0);
	{
		NimStringDesc* name_331829;
		NI i_331844;
		NI L_331846;
		name_331829 = 0;
		i_331844 = ((NI) 0);
		L_331846 = (modules ? modules->Sup.len : 0);
		{
			while (1) {
				NimStringDesc* LOC4;
				NimStringDesc* LOC5;
				if (!(i_331844 < L_331846)) goto LA3;
				name_331829 = modules->data[i_331844];
				LOC4 = 0;
				LOC4 = rawNewString(name_331829->Sup.len + name_331829->Sup.len + 20);
appendString(LOC4, ((NimStringDesc*) &TMP5207));
appendString(LOC4, name_331829);
appendString(LOC4, ((NimStringDesc*) &TMP5214));
appendString(LOC4, name_331829);
appendString(LOC4, ((NimStringDesc*) &TMP5209));
				chunks = (TY127402*) incrSeqV2(&(chunks)->Sup, sizeof(NimStringDesc*));
				LOC5 = 0;
				LOC5 = chunks->data[chunks->Sup.len]; chunks->data[chunks->Sup.len] = copyStringRC1(LOC4);
				if (LOC5) nimGCunrefNoCycle(LOC5);
				++chunks->Sup.len;
				i_331844 += ((NI) 1);
			} LA3: ;
		}
	}
	LOC6 = 0;
	LOC7 = 0;
	LOC7 = nsuJoinSep(chunks->data, chunks->Sup.len, ((NimStringDesc*) &TMP5210));
	LOC6 = rawNewString(LOC7->Sup.len + 6);
appendString(LOC6, LOC7);
appendString(LOC6, ((NimStringDesc*) &TMP5211));
	result = resizeString(result, LOC6->Sup.len + 0);
appendString(result, LOC6);
	return result;
}
N_NIMCALL(void, TMP5218)(void* p, NI op) {
	TY329582* a;
	NI LOC1;
	a = (TY329582*)p;
	LOC1 = 0;
	for (LOC1 = 0; LOC1 < a->Sup.len; LOC1++) {
	nimGCvisit((void*)a->data[LOC1].Field1, op);
	}
}

static N_INLINE(NimStringDesc*, HEX5BHEX5D_89473)(NimStringDesc* s, Slice89480 x) {
	NimStringDesc* result;
	result = 0;
	result = copyStrLast(s, x.a, x.b);
	return result;
}

static N_INLINE(Slice89480, HEX2EHEX2E_103424)(NI a, NI b) {
	Slice89480 result;
	memset((void*)(&result), 0, sizeof(result));
	result.a = a;
	result.b = b;
	return result;
}

N_NIMCALL(void, striptoclevel_329519)(NimStringDesc* s, TY329583* Result) {
	Slice89480 LOC8;
	{
		NI c_329543;
		NI HEX3Atmp_329563;
		NI res_329566;
		c_329543 = 0;
		HEX3Atmp_329563 = 0;
		HEX3Atmp_329563 = ((s ? s->Sup.len : 0) - 1);
		res_329566 = ((NI) 0);
		{
			while (1) {
				if (!(res_329566 <= HEX3Atmp_329563)) goto LA3;
				c_329543 = res_329566;
				(*Result).Field0 = c_329543;
				{
					if (!!(((NU8)(s->data[c_329543]) == (NU8)(32)))) goto LA6;
					goto LA1;
				}
				LA6: ;
				res_329566 += ((NI) 1);
			} LA3: ;
		}
	} LA1: ;
	LOC8 = HEX2EHEX2E_103424((*Result).Field0, ((s ? s->Sup.len : 0) - 1));
	unsureAsgnRef((void**) (&(*Result).Field1), HEX5BHEX5D_89473(s, LOC8));
}

N_NIMCALL(NimStringDesc*, indenttolevel_329570)(NI* level, NI newlevel) {
	NimStringDesc* result;
{	result = 0;
	result = copyString(((NimStringDesc*) &TMP2251));
	{
		if (!((*level) == newlevel)) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	{
		if (!((*level) < newlevel)) goto LA7;
		result = nsuRepeatStr(((NimStringDesc*) &TMP5220), ((NI) ((NI)(newlevel - (*level)))));
	}
	goto LA5;
	LA7: ;
	{
		result = nsuRepeatStr(((NimStringDesc*) &TMP5221), ((NI) ((NI)((*level) - newlevel))));
	}
	LA5: ;
	(*level) = newlevel;
	}BeforeRet: ;
	return result;
}

N_NIMCALL(NimStringDesc*, generatedocumentationtoc_329576)(TY331853* entries) {
	NimStringDesc* result;
	NimStringDesc* titleref;
	TY329582* levels;
	NI L;
	NI level;
	NimStringDesc* LOC23;
	NimStringDesc* LOC24;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP2251));
	titleref = 0;
	levels = 0;
	L = ((NI) 0);
	level = ((NI) 1);
	levels = (TY329582*) newSeq((&NTI329582), ((NI) ((entries ? entries->Sup.len : 0))));
	{
		Indexentry329126 entry_329802;
		NI i_330006;
		NI L_330008;
		memset((void*)(&entry_329802), 0, sizeof(entry_329802));
		i_330006 = ((NI) 0);
		L_330008 = (entries ? entries->Sup.len : 0);
		{
			while (1) {
				NimStringDesc* LOC4;
				TY329583 LOC5;
				NI rawlevel;
				NimStringDesc* rawtext;
				if (!(i_330006 < L_330008)) goto LA3;
				entry_329802.keyword = entries->data[i_330006].keyword;
				entry_329802.link = entries->data[i_330006].link;
				entry_329802.linktitle = entries->data[i_330006].linktitle;
				entry_329802.linkdesc = entries->data[i_330006].linkdesc;
				LOC4 = 0;
				LOC4 = or_328594(entry_329802.linktitle, entry_329802.keyword);
				memset((void*)(&LOC5), 0, sizeof(LOC5));
				striptoclevel_329519(LOC4, (&LOC5));
				rawlevel = 0;
				rawlevel = LOC5.Field0;
				rawtext = 0;
				rawtext = LOC5.Field1;
				{
					NimStringDesc* LOC10;
					if (!(rawlevel < ((NI) 1))) goto LA8;
					levels->data[L].Field0 = (NI)(level + ((NI) 1));
					LOC10 = 0;
					LOC10 = levels->data[L].Field1; levels->data[L].Field1 = copyStringRC1(entry_329802.keyword);
					if (LOC10) nimGCunrefNoCycle(LOC10);
				}
				goto LA6;
				LA8: ;
				{
					NimStringDesc* LOC12;
					level = rawlevel;
					levels->data[L].Field0 = rawlevel;
					LOC12 = 0;
					LOC12 = levels->data[L].Field1; levels->data[L].Field1 = copyStringRC1(rawtext);
					if (LOC12) nimGCunrefNoCycle(LOC12);
				}
				LA6: ;
				L += ((NI) 1);
				i_330006 += ((NI) 1);
			} LA3: ;
		}
	}
	result = copyString(((NimStringDesc*) &TMP5219));
	level = ((NI) 1);
	L = ((NI) 0);
	{
		while (1) {
			NimStringDesc* link;
			if (!(L < (entries ? entries->Sup.len : 0))) goto LA14;
			link = entries->data[L].link;
			{
				NIM_BOOL LOC17;
				LOC17 = 0;
				LOC17 = isdocumentationtitle_329515(link);
				if (!LOC17) goto LA18;
				titleref = copyString(link);
			}
			goto LA15;
			LA18: ;
			{
				NimStringDesc* LOC21;
				NimStringDesc* LOC22;
				LOC21 = 0;
				LOC21 = indenttolevel_329570((&level), levels->data[L].Field0);
				result = resizeString(result, LOC21->Sup.len + 0);
appendString(result, LOC21);
				LOC22 = 0;
				LOC22 = rawNewString(link->Sup.len + levels->data[L].Field1->Sup.len + 21);
appendString(LOC22, ((NimStringDesc*) &TMP5222));
appendString(LOC22, link);
appendString(LOC22, ((NimStringDesc*) &TMP5208));
appendString(LOC22, levels->data[L].Field1);
appendString(LOC22, ((NimStringDesc*) &TMP5223));
				result = resizeString(result, LOC22->Sup.len + 0);
appendString(result, LOC22);
			}
			LA15: ;
			L += ((NI) 1);
		} LA14: ;
	}
	LOC23 = 0;
	LOC24 = 0;
	LOC24 = indenttolevel_329570((&level), ((NI) 1));
	LOC23 = rawNewString(LOC24->Sup.len + 7);
appendString(LOC23, LOC24);
appendString(LOC23, ((NimStringDesc*) &TMP5224));
	result = resizeString(result, LOC23->Sup.len + 0);
appendString(result, LOC23);
	return result;
}

N_NIMCALL(NimStringDesc*, generatedocumentationindex_330010)(Table329139 docs) {
	NimStringDesc* result_330013;
	TY331853* titles;
	TY331853* result_330017;
	TY330573 LOC14;
	result_330013 = 0;
	result_330013 = copyString(((NimStringDesc*) &TMP2251));
	result_330017 = (TY331853*) newSeq((&NTI331853), 0);
	{
		Indexentry329126 x_330021;
		memset((void*)(&x_330021), 0, sizeof(x_330021));
		{
			NI h_331304;
			NI HEX3Atmp_331306;
			NI res_331308;
			h_331304 = 0;
			HEX3Atmp_331306 = 0;
			HEX3Atmp_331306 = (docs.data ? (docs.data->Sup.len-1) : -1);
			res_331308 = ((NI) 0);
			{
				while (1) {
					if (!(res_331308 <= HEX3Atmp_331306)) goto LA4;
					h_331304 = res_331308;
					{
						NIM_BOOL LOC7;
						NimStringDesc* LOC10;
						NimStringDesc* LOC11;
						NimStringDesc* LOC12;
						NimStringDesc* LOC13;
						LOC7 = 0;
						LOC7 = isfilled_166263(docs.data->data[h_331304].Field0);
						if (!LOC7) goto LA8;
						x_330021.keyword = docs.data->data[h_331304].Field1.keyword;
						x_330021.link = docs.data->data[h_331304].Field1.link;
						x_330021.linktitle = docs.data->data[h_331304].Field1.linktitle;
						x_330021.linkdesc = docs.data->data[h_331304].Field1.linkdesc;
						result_330017 = (TY331853*) incrSeqV2(&(result_330017)->Sup, sizeof(Indexentry329126));
						LOC10 = 0;
						LOC10 = result_330017->data[result_330017->Sup.len].keyword; result_330017->data[result_330017->Sup.len].keyword = copyStringRC1(x_330021.keyword);
						if (LOC10) nimGCunrefNoCycle(LOC10);
						LOC11 = 0;
						LOC11 = result_330017->data[result_330017->Sup.len].link; result_330017->data[result_330017->Sup.len].link = copyStringRC1(x_330021.link);
						if (LOC11) nimGCunrefNoCycle(LOC11);
						LOC12 = 0;
						LOC12 = result_330017->data[result_330017->Sup.len].linktitle; result_330017->data[result_330017->Sup.len].linktitle = copyStringRC1(x_330021.linktitle);
						if (LOC12) nimGCunrefNoCycle(LOC12);
						LOC13 = 0;
						LOC13 = result_330017->data[result_330017->Sup.len].linkdesc; result_330017->data[result_330017->Sup.len].linkdesc = copyStringRC1(x_330021.linkdesc);
						if (LOC13) nimGCunrefNoCycle(LOC13);
						++result_330017->Sup.len;
					}
					LA8: ;
					res_331308 += ((NI) 1);
				} LA4: ;
			}
		}
	}
	genericSeqAssign((&titles), result_330017, (&NTI331853));
	memset((void*)(&LOC14), 0, sizeof(LOC14));
	LOC14.ClPrc = ((TMP5216) (cmp_329159)); LOC14.ClEnv = NIM_NIL;
	sort_330566(titles->data, titles->Sup.len, LOC14, ((NU8) 1));
	{
		Indexentry329126 title_331244;
		NI i_331314;
		NI L_331316;
		memset((void*)(&title_331244), 0, sizeof(title_331244));
		i_331314 = ((NI) 0);
		L_331316 = (titles ? titles->Sup.len : 0);
		{
			while (1) {
				NimStringDesc* toclist;
				TY331853* LOC18;
				NimStringDesc* LOC19;
				if (!(i_331314 < L_331316)) goto LA17;
				title_331244.keyword = titles->data[i_331314].keyword;
				title_331244.link = titles->data[i_331314].link;
				title_331244.linktitle = titles->data[i_331314].linktitle;
				title_331244.linkdesc = titles->data[i_331314].linkdesc;
				LOC18 = 0;
				LOC18 = getordefault_331246(docs, (&title_331244));
				toclist = generatedocumentationtoc_329576(LOC18);
				LOC19 = 0;
				LOC19 = rawNewString(title_331244.link->Sup.len + title_331244.keyword->Sup.len + toclist->Sup.len + 32);
appendString(LOC19, ((NimStringDesc*) &TMP5225));
appendString(LOC19, title_331244.link);
appendString(LOC19, ((NimStringDesc*) &TMP5208));
appendString(LOC19, title_331244.keyword);
appendString(LOC19, ((NimStringDesc*) &TMP5223));
appendString(LOC19, toclist);
appendString(LOC19, ((NimStringDesc*) &TMP5224));
				result_330013 = resizeString(result_330013, LOC19->Sup.len + 0);
appendString(result_330013, LOC19);
				i_331314 += ((NI) 1);
			} LA17: ;
		}
	}
	return result_330013;
}

N_NIMCALL(void, sortindex_329414)(Indexentry329126* a, NI aLen0) {
	NI n;
	NI h;
	n = aLen0;
	h = ((NI) 1);
	{
		while (1) {
			h = (NI)((NI)(((NI) 3) * h) + ((NI) 1));
			{
				if (!(n < h)) goto LA5;
				goto LA1;
			}
			LA5: ;
		}
	} LA1: ;
	{
		while (1) {
			h = (NI)(h / ((NI) 3));
			{
				NI i_329439;
				NI HEX3Atmp_329450;
				NI res_329453;
				i_329439 = 0;
				HEX3Atmp_329450 = 0;
				HEX3Atmp_329450 = (NI)(n - ((NI) 1));
				res_329453 = h;
				{
					while (1) {
						Indexentry329126 v;
						NI j;
						if (!(res_329453 <= HEX3Atmp_329450)) goto LA11;
						i_329439 = res_329453;
						memset((void*)(&v), 0, sizeof(v));
						HEX3CHEX2D_329409((&v), (&a[i_329439]));
						j = i_329439;
						{
							while (1) {
								NI LOC14;
								LOC14 = 0;
								LOC14 = cmp_329159((&a[(NI)(j - h)]), (&v));
								if (!(((NI) 0) <= LOC14)) goto LA13;
								HEX3CHEX2D_329409((&a[j]), (&a[(NI)(j - h)]));
								j = (NI)(j - h);
								{
									if (!(j < h)) goto LA17;
									goto LA12;
								}
								LA17: ;
							} LA13: ;
						} LA12: ;
						HEX3CHEX2D_329409((&a[j]), (&v));
						res_329453 += ((NI) 1);
					} LA11: ;
				}
			}
			{
				if (!(h == ((NI) 1))) goto LA21;
				goto LA7;
			}
			LA21: ;
		}
	} LA7: ;
}

N_NIMCALL(NimStringDesc*, generatesymbolindex_329457)(TY331853* symbols) {
	NimStringDesc* result;
	NI i;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP2251));
	i = ((NI) 0);
	{
		while (1) {
			NimStringDesc* keyword;
			NimStringDesc* cleanedkeyword;
			Slice89480 LOC3;
			TY186169 LOC4;
			NI j;
			if (!(i < (symbols ? symbols->Sup.len : 0))) goto LA2;
			keyword = symbols->data[i].keyword;
			LOC3 = HEX2EHEX2E_103424(((NI) 1), (NI)((keyword ? (keyword->Sup.len-1) : -1) - ((NI) 1)));
			cleanedkeyword = HEX5BHEX5D_89473(keyword, LOC3);
			memset((void*)LOC4, 0, sizeof(LOC4));
			LOC4[0] = copyString(keyword);
			LOC4[1] = copyString(cleanedkeyword);
			nsuAddf((&result), ((NimStringDesc*) &TMP5227), LOC4, 2);
			j = i;
			{
				while (1) {
					NIM_BOOL LOC7;
					NimStringDesc* url;
					NimStringDesc* text;
					NimStringDesc* desc;
					LOC7 = 0;
					LOC7 = (j < (symbols ? symbols->Sup.len : 0));
					if (!(LOC7)) goto LA8;
					LOC7 = eqStrings(keyword, symbols->data[j].keyword);
					LA8: ;
					if (!LOC7) goto LA6;
					url = symbols->data[j].link;
					{
						if (!!(symbols->data[j].linktitle == 0)) goto LA11;
						text = symbols->data[j].linktitle;
					}
					goto LA9;
					LA11: ;
					{
						text = url;
					}
					LA9: ;
					{
						if (!!(symbols->data[j].linkdesc == 0)) goto LA16;
						desc = symbols->data[j].linkdesc;
					}
					goto LA14;
					LA16: ;
					{
						desc = copyString(((NimStringDesc*) &TMP2251));
					}
					LA14: ;
					{
						TY186156 LOC23;
						if (!(((NI) 0) < (desc ? desc->Sup.len : 0))) goto LA21;
						memset((void*)LOC23, 0, sizeof(LOC23));
						LOC23[0] = copyString(url);
						LOC23[1] = copyString(text);
						LOC23[2] = copyString(desc);
						nsuAddf((&result), ((NimStringDesc*) &TMP5228), LOC23, 3);
					}
					goto LA19;
					LA21: ;
					{
						TY186169 LOC25;
						memset((void*)LOC25, 0, sizeof(LOC25));
						LOC25[0] = copyString(url);
						LOC25[1] = copyString(text);
						nsuAddf((&result), ((NimStringDesc*) &TMP5229), LOC25, 2);
					}
					LA19: ;
					j += ((NI) 1);
				} LA6: ;
			}
			result = resizeString(result, 12);
appendString(result, ((NimStringDesc*) &TMP5230));
			i = j;
		} LA2: ;
	}
	return result;
}

N_NIMCALL(NimStringDesc*, mergeindexes_333903)(NimStringDesc* dir) {
	NimStringDesc* result;
	TY331850 LOC1;
	TY127402* modules;
	TY331853* symbols;
	Table329139 docs;
	result = 0;
	memset((void*)(&LOC1), 0, sizeof(LOC1));
	readindexdir_331847(dir, (&LOC1));
	modules = 0;
	genericSeqAssign((&modules), LOC1.Field0, (&NTI127402));
	symbols = 0;
	genericSeqAssign((&symbols), LOC1.Field1, (&NTI331853));
	memset((void*)(&docs), 0, sizeof(docs));
	genericSeqAssign((&docs.data), LOC1.Field2.data, (&NTI329142));
	docs.counter = LOC1.Field2.counter;
	result = copyString(((NimStringDesc*) &TMP2251));
	{
		NI LOC4;
		NimStringDesc* LOC7;
		LOC4 = 0;
		LOC4 = len_332259(docs);
		if (!(((NI) 0) < LOC4)) goto LA5;
		LOC7 = 0;
		LOC7 = generatedocumentationjumps_331317(docs);
		result = resizeString(result, LOC7->Sup.len + 0);
appendString(result, LOC7);
		result = resizeString(result, 5);
appendString(result, ((NimStringDesc*) &TMP5212));
	}
	LA5: ;
	{
		NimStringDesc* LOC12;
		if (!(((NI) 0) < (modules ? modules->Sup.len : 0))) goto LA10;
		LOC12 = 0;
		LOC12 = generatemodulejumps_331798(modules);
		result = resizeString(result, LOC12->Sup.len + 0);
appendString(result, LOC12);
		result = resizeString(result, 5);
appendString(result, ((NimStringDesc*) &TMP5212));
	}
	LA10: ;
	{
		NI LOC15;
		NimStringDesc* LOC18;
		LOC15 = 0;
		LOC15 = len_332259(docs);
		if (!(((NI) 0) < LOC15)) goto LA16;
		result = resizeString(result, 30);
appendString(result, ((NimStringDesc*) &TMP5215));
		LOC18 = 0;
		LOC18 = generatedocumentationindex_330010(docs);
		result = resizeString(result, LOC18->Sup.len + 0);
appendString(result, LOC18);
	}
	LA16: ;
	{
		NimStringDesc* LOC23;
		if (!(((NI) 0) < (symbols ? symbols->Sup.len : 0))) goto LA21;
		sortindex_329414(symbols->data, symbols->Sup.len);
		result = resizeString(result, 22);
appendString(result, ((NimStringDesc*) &TMP5226));
		LOC23 = 0;
		LOC23 = generatesymbolindex_329457(symbols);
		result = resizeString(result, LOC23->Sup.len + 0);
appendString(result, LOC23);
	}
	LA21: ;
	return result;
}
NIM_EXTERNC N_NOINLINE(void, docutils_rstgenInit000)(void) {
	NimStringDesc* LOC1;
	LOC1 = 0;
	LOC1 = splitter_328441; splitter_328441 = copyStringRC1(((NimStringDesc*) &TMP991));
	if (LOC1) nimGCunrefNoCycle(LOC1);
}

NIM_EXTERNC N_NOINLINE(void, docutils_rstgenDatInit000)(void) {
static TNimNode* TMP5033[14];
static TNimNode* TMP5034[2];
NI TMP5036;
static char* NIM_CONST TMP5035[2] = {
"outHtml", 
"outLatex"};
static TNimNode* TMP5037[3];
static TNimNode* TMP5194[4];
static TNimNode* TMP5217[2];
static TNimNode TMP983[30];
NTI328010.size = sizeof(Rstgenerator328010);
NTI328010.kind = 17;
NTI328010.base = (&NTI3608);
TMP5033[0] = &TMP983[1];
NTI328004.size = sizeof(NU8);
NTI328004.kind = 14;
NTI328004.base = 0;
NTI328004.flags = 3;
for (TMP5036 = 0; TMP5036 < 2; TMP5036++) {
TMP983[TMP5036+2].kind = 1;
TMP983[TMP5036+2].offset = TMP5036;
TMP983[TMP5036+2].name = TMP5035[TMP5036];
TMP5034[TMP5036] = &TMP983[TMP5036+2];
}
TMP983[4].len = 2; TMP983[4].kind = 2; TMP983[4].sons = &TMP5034[0];
NTI328004.node = &TMP983[4];
TMP983[1].kind = 1;
TMP983[1].offset = offsetof(Rstgenerator328010, target);
TMP983[1].typ = (&NTI328004);
TMP983[1].name = "target";
TMP5033[1] = &TMP983[5];
TMP983[5].kind = 1;
TMP983[5].offset = offsetof(Rstgenerator328010, config);
TMP983[5].typ = (&NTI143211);
TMP983[5].name = "config";
TMP5033[2] = &TMP983[6];
TMP983[6].kind = 1;
TMP983[6].offset = offsetof(Rstgenerator328010, splitafter);
TMP983[6].typ = (&NTI104);
TMP983[6].name = "splitAfter";
TMP5033[3] = &TMP983[7];
TMP983[7].kind = 1;
TMP983[7].offset = offsetof(Rstgenerator328010, listingcounter);
TMP983[7].typ = (&NTI104);
TMP983[7].name = "listingCounter";
TMP5033[4] = &TMP983[8];
NTI328006.size = sizeof(Tocentry328006);
NTI328006.kind = 18;
NTI328006.base = 0;
NTI328006.flags = 2;
TMP5037[0] = &TMP983[10];
TMP983[10].kind = 1;
TMP983[10].offset = offsetof(Tocentry328006, n);
TMP983[10].typ = (&NTI315004);
TMP983[10].name = "n";
TMP5037[1] = &TMP983[11];
TMP983[11].kind = 1;
TMP983[11].offset = offsetof(Tocentry328006, refname);
TMP983[11].typ = (&NTI138);
TMP983[11].name = "refname";
TMP5037[2] = &TMP983[12];
TMP983[12].kind = 1;
TMP983[12].offset = offsetof(Tocentry328006, header);
TMP983[12].typ = (&NTI138);
TMP983[12].name = "header";
TMP983[9].len = 3; TMP983[9].kind = 2; TMP983[9].sons = &TMP5037[0];
NTI328006.node = &TMP983[9];
NTI328029.size = sizeof(TY328029*);
NTI328029.kind = 24;
NTI328029.base = (&NTI328006);
NTI328029.flags = 2;
NTI328029.marker = TMP5038;
TMP983[8].kind = 1;
TMP983[8].offset = offsetof(Rstgenerator328010, tocpart);
TMP983[8].typ = (&NTI328029);
TMP983[8].name = "tocPart";
TMP5033[5] = &TMP983[13];
TMP983[13].kind = 1;
TMP983[13].offset = offsetof(Rstgenerator328010, hastoc);
TMP983[13].typ = (&NTI130);
TMP983[13].name = "hasToc";
TMP5033[6] = &TMP983[14];
TMP983[14].kind = 1;
TMP983[14].offset = offsetof(Rstgenerator328010, theindex);
TMP983[14].typ = (&NTI138);
TMP983[14].name = "theIndex";
TMP5033[7] = &TMP983[15];
TMP983[15].kind = 1;
TMP983[15].offset = offsetof(Rstgenerator328010, options);
TMP983[15].typ = (&NTI316006);
TMP983[15].name = "options";
TMP5033[8] = &TMP983[16];
TMP983[16].kind = 1;
TMP983[16].offset = offsetof(Rstgenerator328010, findfile);
TMP983[16].typ = (&NTI316014);
TMP983[16].name = "findFile";
TMP5033[9] = &TMP983[17];
TMP983[17].kind = 1;
TMP983[17].offset = offsetof(Rstgenerator328010, msghandler);
TMP983[17].typ = (&NTI316012);
TMP983[17].name = "msgHandler";
TMP5033[10] = &TMP983[18];
TMP983[18].kind = 1;
TMP983[18].offset = offsetof(Rstgenerator328010, filename);
TMP983[18].typ = (&NTI138);
TMP983[18].name = "filename";
TMP5033[11] = &TMP983[19];
NTI328039.size = sizeof(TY328039);
NTI328039.kind = 16;
NTI328039.base = (&NTI138);
NTI328039.flags = 2;
TMP983[19].kind = 1;
TMP983[19].offset = offsetof(Rstgenerator328010, meta);
TMP983[19].typ = (&NTI328039);
TMP983[19].name = "meta";
TMP5033[12] = &TMP983[20];
TMP983[20].kind = 1;
TMP983[20].offset = offsetof(Rstgenerator328010, currentsection);
TMP983[20].typ = (&NTI138);
TMP983[20].name = "currentSection";
TMP5033[13] = &TMP983[21];
TMP983[21].kind = 1;
TMP983[21].offset = offsetof(Rstgenerator328010, seenindexterms);
TMP983[21].typ = (&NTI328047);
TMP983[21].name = "seenIndexTerms";
TMP983[0].len = 14; TMP983[0].kind = 2; TMP983[0].sons = &TMP5033[0];
NTI328010.node = &TMP983[0];
NTI329126.size = sizeof(Indexentry329126);
NTI329126.kind = 18;
NTI329126.base = 0;
NTI329126.flags = 2;
TMP5194[0] = &TMP983[23];
TMP983[23].kind = 1;
TMP983[23].offset = offsetof(Indexentry329126, keyword);
TMP983[23].typ = (&NTI138);
TMP983[23].name = "keyword";
TMP5194[1] = &TMP983[24];
TMP983[24].kind = 1;
TMP983[24].offset = offsetof(Indexentry329126, link);
TMP983[24].typ = (&NTI138);
TMP983[24].name = "link";
TMP5194[2] = &TMP983[25];
TMP983[25].kind = 1;
TMP983[25].offset = offsetof(Indexentry329126, linktitle);
TMP983[25].typ = (&NTI138);
TMP983[25].name = "linkTitle";
TMP5194[3] = &TMP983[26];
TMP983[26].kind = 1;
TMP983[26].offset = offsetof(Indexentry329126, linkdesc);
TMP983[26].typ = (&NTI138);
TMP983[26].name = "linkDesc";
TMP983[22].len = 4; TMP983[22].kind = 2; TMP983[22].sons = &TMP5194[0];
NTI329126.node = &TMP983[22];
NTI331853.size = sizeof(TY331853*);
NTI331853.kind = 24;
NTI331853.base = (&NTI329126);
NTI331853.flags = 2;
NTI331853.marker = TMP5195;
NTI329583.size = sizeof(TY329583);
NTI329583.kind = 18;
NTI329583.base = 0;
NTI329583.flags = 2;
TMP5217[0] = &TMP983[28];
TMP983[28].kind = 1;
TMP983[28].offset = offsetof(TY329583, Field0);
TMP983[28].typ = (&NTI104);
TMP983[28].name = "Field0";
TMP5217[1] = &TMP983[29];
TMP983[29].kind = 1;
TMP983[29].offset = offsetof(TY329583, Field1);
TMP983[29].typ = (&NTI138);
TMP983[29].name = "Field1";
TMP983[27].len = 2; TMP983[27].kind = 2; TMP983[27].sons = &TMP5217[0];
NTI329583.node = &TMP983[27];
NTI329582.size = sizeof(TY329582*);
NTI329582.kind = 24;
NTI329582.base = (&NTI329583);
NTI329582.flags = 2;
NTI329582.marker = TMP5218;
}

