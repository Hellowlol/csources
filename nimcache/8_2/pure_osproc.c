/* Generated by Nimrod Compiler v0.9.3 */
/*   (c) 2012 Andreas Rumpf */
/* The generated code is subject to the original license. */
#define NIM_INTBITS 64
#include "nimbase.h"

#include <string.h>

#include <sys/types.h>

#include <unistd.h>

#include <errno.h>

#include <stdio.h>

#include <signal.h>

#include <sys/wait.h>

#include <sys/select.h>
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct tprocess143203 tprocess143203;
typedef struct TY9552 TY9552;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct tcell38848 tcell38848;
typedef struct tcellseq38864 tcellseq38864;
typedef struct tgcheap40816 tgcheap40816;
typedef struct tcellset38860 tcellset38860;
typedef struct tpagedesc38856 tpagedesc38856;
typedef struct tmemregion22210 tmemregion22210;
typedef struct tsmallchunk21438 tsmallchunk21438;
typedef struct tllchunk22204 tllchunk22204;
typedef struct tbigchunk21440 tbigchunk21440;
typedef struct tintset21415 tintset21415;
typedef struct ttrunk21411 ttrunk21411;
typedef struct tavlnode22208 tavlnode22208;
typedef struct tgcstat40814 tgcstat40814;
typedef struct TNimObject TNimObject;
typedef struct tstream141629 tstream141629;
typedef struct TY144202 TY144202;
typedef struct tstringtable111610 tstringtable111610;
typedef struct tkeyvaluepairseq111608 tkeyvaluepairseq111608;
typedef struct TY87906 TY87906;
typedef struct tfilestream142109 tfilestream142109;
typedef struct TY75888 TY75888;
typedef struct tbasechunk21436 tbasechunk21436;
typedef struct tfreecell21428 tfreecell21428;
struct TGenericSeq {
NI len;
NI reserved;
};
typedef NIM_CHAR TY611[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY611 data;
};
typedef NU8 TY112118[32];
typedef N_NIMCALL_PTR(void, TY889) (void* p, NI op);
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
TY889 marker;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct tcell38848 {
NI Refcount;
TNimType* Typ;
};
struct tcellseq38864 {
NI Len;
NI Cap;
tcell38848** D;
};
struct tcellset38860 {
NI Counter;
NI Max;
tpagedesc38856* Head;
tpagedesc38856** Data;
};
typedef tsmallchunk21438* TY22222[512];
typedef ttrunk21411* ttrunkbuckets21413[256];
struct tintset21415 {
ttrunkbuckets21413 Data;
};
struct tmemregion22210 {
NI Minlargeobj;
NI Maxlargeobj;
TY22222 Freesmallchunks;
tllchunk22204* Llmem;
NI Currmem;
NI Maxmem;
NI Freemem;
NI Lastsize;
tbigchunk21440* Freechunkslist;
tintset21415 Chunkstarts;
tavlnode22208* Root;
tavlnode22208* Deleted;
tavlnode22208* Last;
tavlnode22208* Freeavlnodes;
};
struct tgcstat40814 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
NI64 Maxpause;
};
struct tgcheap40816 {
void* Stackbottom;
NI Cyclethreshold;
tcellseq38864 Zct;
tcellseq38864 Decstack;
tcellset38860 Cycleroots;
tcellseq38864 Tempstack;
NI Recgclock;
tmemregion22210 Region;
tgcstat40814 Stat;
};
struct TNimObject {
TNimType* m_type;
};
struct tprocess143203 {
  TNimObject Sup;
int Inhandle;
int Outhandle;
int Errhandle;
tstream141629* Instream;
tstream141629* Outstream;
tstream141629* Errstream;
pid_t Id;
int Exitcode;
};
struct TY87906 {
NimStringDesc* Field0;
NimStringDesc* Field1;
};
struct tstringtable111610 {
  TNimObject Sup;
NI Counter;
tkeyvaluepairseq111608* Data;
NU8 Mode;
};
typedef int TY144798[2];
typedef NimStringDesc* TY113525[1];
typedef NimStringDesc* TY113486[2];
struct TY75888 {
NimStringDesc* Field0;
NI Field1;
};
typedef NI TY21418[8];
struct tpagedesc38856 {
tpagedesc38856* Next;
NI Key;
TY21418 Bits;
};
struct tbasechunk21436 {
NI Prevsize;
NI Size;
NIM_BOOL Used;
};
struct tsmallchunk21438 {
  tbasechunk21436 Sup;
tsmallchunk21438* Next;
tsmallchunk21438* Prev;
tfreecell21428* Freelist;
NI Free;
NI Acc;
NF Data;
};
struct tllchunk22204 {
NI Size;
NI Acc;
tllchunk22204* Next;
};
struct tbigchunk21440 {
  tbasechunk21436 Sup;
tbigchunk21440* Next;
tbigchunk21440* Prev;
NI Align;
NF Data;
};
struct ttrunk21411 {
ttrunk21411* Next;
NI Key;
TY21418 Bits;
};
typedef tavlnode22208* TY22214[2];
struct tavlnode22208 {
TY22214 Link;
NI Key;
NI Upperbound;
NI Level;
};
typedef N_NIMCALL_PTR(void, TY141630) (tstream141629* s);
typedef N_NIMCALL_PTR(NIM_BOOL, TY141634) (tstream141629* s);
typedef N_NIMCALL_PTR(void, TY141638) (tstream141629* s, NI pos);
typedef N_NIMCALL_PTR(NI, TY141643) (tstream141629* s);
typedef N_NIMCALL_PTR(NI, TY141647) (tstream141629* s, void* buffer, NI buflen);
typedef N_NIMCALL_PTR(void, TY141653) (tstream141629* s, void* buffer, NI buflen);
typedef N_NIMCALL_PTR(void, TY141659) (tstream141629* s);
struct tstream141629 {
  TNimObject Sup;
TY141630 Closeimpl;
TY141634 Atendimpl;
TY141638 Setpositionimpl;
TY141643 Getpositionimpl;
TY141647 Readdataimpl;
TY141653 Writedataimpl;
TY141659 Flushimpl;
};
struct tfilestream142109 {
  tstream141629 Sup;
FILE* F;
};
struct tfreecell21428 {
tfreecell21428* Next;
NI Zerofield;
};
struct TY9552 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
struct TY144202 {
  TGenericSeq Sup;
  tprocess143203* data[SEQ_DECL_SIZE];
};
struct tkeyvaluepairseq111608 {
  TGenericSeq Sup;
  TY87906 data[SEQ_DECL_SIZE];
};
N_NIMCALL(NimStringDesc*, nospquoteShellWindows)(NimStringDesc* s);
N_NIMCALL(NIM_BOOL, contains_84683)(NimStringDesc* s, TY112118 chars);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* src);
static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* dest, NI addlen);
N_NOINLINE(void, raiseIndexError)(void);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* s, NIM_CHAR c);
N_NIMCALL(NimStringDesc*, setLengthStr)(NimStringDesc* s, NI newlen);
static N_INLINE(NI, addInt)(NI a, NI b);
N_NOINLINE(void, raiseOverflow)(void);
static N_INLINE(void, nimFrame)(TFrame* s);
static N_INLINE(void, popFrame)(void);
N_NIMCALL(NimStringDesc*, nospquoteShellPosix)(NimStringDesc* s);
N_NIMCALL(NIM_BOOL, allcharsinset_84306)(NimStringDesc* s, TY112118 theset);
N_NIMCALL(NimStringDesc*, nsuReplaceStr)(NimStringDesc* s, NimStringDesc* sub, NimStringDesc* by);
N_NIMCALL(NimStringDesc*, rawNewString)(NI space);
N_NIMCALL(NimStringDesc*, nospquoteShell)(NimStringDesc* s);
N_NIMCALL(tprocess143203*, startcmd_143428)(NimStringDesc* command, NU8 options);
N_NIMCALL(TY9552*, nosparseCmdLine)(NimStringDesc* c);
static N_INLINE(NI, subInt)(NI a, NI b);
N_NIMCALL(void*, newSeq)(TNimType* typ, NI len);
N_NIMCALL(NimStringDesc*, copyStringRC1)(NimStringDesc* src);
static N_INLINE(void, nimGCunrefNoCycle)(void* p);
static N_INLINE(tcell38848*, usrtocell_42239)(void* usr);
static N_INLINE(void, rtladdzct_43802)(tcell38848* c);
N_NOINLINE(void, addzct_42215)(tcellseq38864* s, tcell38848* c);
N_NIMCALL(NI, nospprocessID)(tprocess143203* p);
N_NIMCALL(int, nospinputHandle)(tprocess143203* p);
N_NIMCALL(int, nospoutputHandle)(tprocess143203* p);
N_NIMCALL(int, nosperrorHandle)(tprocess143203* p);
N_NIMCALL(NI, nospcountProcessors)(void);
N_NIMCALL(NI, nospexecProcesses)(NimStringDesc** cmds, NI cmdsLen0, NU8 options_143808, NI n);
N_NIMCALL(void, hiddenraiseassert_76017)(NimStringDesc* msg);
N_NIMCALL(void, nimGCvisit)(void* d, NI op);
N_NIMCALL(void, TMP952)(void* p, NI op);
N_NIMCALL(void, TMP953)(void* p, NI op);
static N_INLINE(void, asgnRefNoCycle)(void** dest, void* src);
N_NIMCALL(void, nossleep)(NI milsecs);
N_NIMCALL(NimStringDesc*, nospexecProcess)(NimStringDesc* command, NU8 options);
N_NIMCALL(NimStringDesc*, rawNewString)(NI cap);
N_NIMCALL(NIM_BOOL, readline_141973)(tstream141629* s, NimStringDesc** line);
N_NIMCALL(NimStringDesc*, addcmdargs_144604)(NimStringDesc* command, NimStringDesc** args, NI argsLen0);
N_NIMCALL(NCSTRING*, tocstringarray_144626)(NimStringDesc** b, NI bLen0, NimStringDesc** a, NI aLen0);
N_NOCONV(void*, alloc0_4004)(NI size);
N_NIMCALL(NI, mulInt)(NI a, NI b);
N_NOCONV(void*, alloc_4001)(NI size);
N_NIMCALL(NCSTRING*, tocstringarray_144692)(tstringtable111610* t);
N_NIMCALL(NI, nstlen)(tstringtable111610* t);
N_NIMCALL(NCSTRING*, envtocstringarray_144723)(void);
N_NIMCALL(void, getenvvarsc_103202)(void);
N_NIMCALL(NI, nsuFindChar)(NimStringDesc* s, NIM_CHAR sub, NI start);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* s, NI start_67823, NI last);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* s, NI first, NI last);
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* s, NI start);
N_NIMCALL(NimStringDesc*, copyStr)(NimStringDesc* s, NI first);
N_NIMCALL(tprocess143203*, nospstartProcess)(NimStringDesc* command, NimStringDesc* workingdir, NimStringDesc** args, NI argsLen0, tstringtable111610* env, NU8 options);
N_NIMCALL(void*, newObj)(TNimType* typ, NI size);
N_NIMCALL(void, oserror_99005)(NI32 errorcode);
N_NIMCALL(NI32, oslasterror_99046)(void);
N_NIMCALL(void, quit_75432)(NimStringDesc* errormsg, NI errorcode);
N_NIMCALL(NimStringDesc*, cstrToNimstr)(NCSTRING str);
static N_INLINE(void, setcurrentdir_100803)(NimStringDesc* newdir);
N_NIMCALL(NimStringDesc*, nosextractFilename)(NimStringDesc* path);
N_NIMCALL(NimStringDesc*, nsuJoinSep)(NimStringDesc** a, NI aLen0, NimStringDesc* sep);
N_NIMCALL(void, nospclose)(tprocess143203* p);
N_NIMCALL(void, close_141675)(tstream141629* s);
N_NIMCALL(void, nospsuspend)(tprocess143203* p);
N_NIMCALL(void, nospresume)(tprocess143203* p);
N_NIMCALL(NIM_BOOL, nosprunning)(tprocess143203* p);
N_NIMCALL(void, nospterminate)(tprocess143203* p);
N_NIMCALL(NI, nospwaitForExit)(tprocess143203* p, NI timeout);
N_NIMCALL(NI, peekexitcode_143513)(tprocess143203* p);
N_NIMCALL(void, createstream_145264)(tstream141629** stream, NI32* handle, NU8 filemode);
N_NIMCALL(NIM_BOOL, open_9211)(FILE** f, int filehandle, NU8 mode);
N_NIMCALL(tfilestream142109*, newfilestream_142168)(FILE* f);
N_NIMCALL(void, unsureAsgnRef)(void** dest, void* src);
N_NIMCALL(tstream141629*, nospinputStream)(tprocess143203* p);
N_NIMCALL(tstream141629*, nospoutputStream)(tprocess143203* p);
N_NIMCALL(tstream141629*, nosperrorStream)(tprocess143203* p);
N_NIMCALL(NI, nospexecCmd)(NimStringDesc* command);
N_NIMCALL(void, createfdset_145340)(fd_set* fd, TY144202* s, NI* m);
N_NIMCALL(void, pruneprocessset_145395)(TY144202** s, fd_set* fd);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* seq, NI elemsize, NI newlen);
N_NIMCALL(NI, select_144502)(TY144202** readfds, NI timeout);
static N_INLINE(NI, chckRange)(NI i, NI a, NI b);
N_NOINLINE(void, raiseRangeError)(NI64 val);
N_NIMCALL(void, execcmdex_145602)(NimStringDesc* command, NU8 options, TY75888* Result);
static NIM_CONST TY112118 TMP935 = {
0x00, 0x02, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
STRING_LITERAL(TMP936, "", 0);
STRING_LITERAL(TMP937, "\"", 1);
STRING_LITERAL(TMP938, "\\\"", 2);
NIM_CONST TY112118 safeunixchars_143238 = {
0x00, 0x00, 0x00, 0x00, 0x20, 0xE8, 0xFF, 0x27,
0xFF, 0xFF, 0xFF, 0x87, 0xFE, 0xFF, 0xFF, 0x07,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
STRING_LITERAL(TMP939, "\'\'", 2);
static NIM_CONST TY112118 TMP940 = {
0x00, 0x00, 0x00, 0x00, 0x20, 0xE8, 0xFF, 0x27,
0xFF, 0xFF, 0xFF, 0x87, 0xFE, 0xFF, 0xFF, 0x07,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
STRING_LITERAL(TMP941, "\'", 1);
STRING_LITERAL(TMP945, "\'\"\'\"\'", 5);
STRING_LITERAL(TMP949, "0 < n ", 6);
STRING_LITERAL(TMP961, "", 0);
STRING_LITERAL(TMP962, "\012", 1);
STRING_LITERAL(TMP963, " ", 1);
STRING_LITERAL(TMP975, "=", 1);
STRING_LITERAL(TMP986, "setpgid call failed: ", 21);
STRING_LITERAL(TMP988, "sh", 2);
STRING_LITERAL(TMP989, "-c", 2);
NIM_CONST TY113486 TMP987 = {((NimStringDesc*) &TMP988),
((NimStringDesc*) &TMP989)}
;
STRING_LITERAL(TMP990, "execve call failed: ", 20);
NIM_CONST TY75888 TMP997 = {((NimStringDesc*) &TMP961),
-1}
;
extern TFrame* frameptr_12037;
extern TNimType NTI9552; /* seq[string] */
extern tgcheap40816 gch_40844;
extern TNimType NTI1009; /* TObject */
TNimType NTI143203; /* TProcess */
extern TNimType NTI9008; /* TFileHandle */
extern TNimType NTI141627; /* PStream */
extern TNimType NTI91457; /* TPid */
extern TNimType NTI3809; /* cint */
TNimType NTI143205; /* PProcess */
TNimType NTI144202; /* seq[PProcess] */
extern TY9552* environment_103029;

static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src) {
	memcpy(((NCSTRING) (&(*dest).data[((*dest).Sup.len)- 0])), ((NCSTRING) ((*src).data)), (NI64)((*src).Sup.len + 1));	(*dest).Sup.len += (*src).Sup.len;
}
static N_INLINE(NI, addInt)(NI a, NI b) {
	NI result;
	result = 0;
	result = (NI)((NU64)(a) + (NU64)(b));
	{
		NIM_BOOL LOC3;
		LOC3 = 0;
		LOC3 = (0 <= (NI)(result ^ a));
		if (LOC3) goto LA4;
		LOC3 = (0 <= (NI)(result ^ b));
		LA4: ;
		if (!LOC3) goto LA5;
		goto BeforeRet;
	}	LA5: ;
	raiseOverflow();	BeforeRet: ;	return result;
}
static N_INLINE(void, nimFrame)(TFrame* s) {
	(*s).prev = frameptr_12037;
	frameptr_12037 = s;
}
static N_INLINE(void, popFrame)(void) {
	frameptr_12037 = (*frameptr_12037).prev;
}
N_NIMCALL(NimStringDesc*, nospquoteShellWindows)(NimStringDesc* s) {
	NimStringDesc* result;
	NIM_BOOL needquote;
	NIM_BOOL LOC1;
	NimStringDesc* backslashbuff;
	NIM_CHAR c_143228;
	NI i_143230;
	nimfr("quoteShellWindows", "osproc.nim")
	result = 0;
	nimln(48, "osproc.nim");
	nimln(48, "osproc.nim");
	LOC1 = 0;
	nimln(730, "system.nim");
	LOC1 = contains_84683(s, TMP935);
	if (LOC1) goto LA2;
	nimln(48, "osproc.nim");
	nimln(48, "osproc.nim");
	LOC1 = (s->Sup.len == 0);
	LA2: ;
	needquote = LOC1;
	nimln(50, "osproc.nim");
	result = copyString(((NimStringDesc*) &TMP936));
	nimln(51, "osproc.nim");
	backslashbuff = copyString(((NimStringDesc*) &TMP936));
	nimln(52, "osproc.nim");
	{
		if (!needquote) goto LA5;
		nimln(53, "osproc.nim");
		result = resizeString(result, 1);
appendString(result, ((NimStringDesc*) &TMP937));
	}	LA5: ;
	c_143228 = 0;
	nimln(1400, "system.nim");
	i_143230 = 0;
	nimln(1401, "system.nim");
	while (1) {
		nimln(1401, "system.nim");
		nimln(1401, "system.nim");
		if (!(i_143230 < s->Sup.len)) goto LA7;
		nimln(1402, "system.nim");
		if ((NU)(i_143230) > (NU)(s->Sup.len)) raiseIndexError();
		c_143228 = s->data[i_143230];
		nimln(56, "osproc.nim");
		{
			nimln(56, "osproc.nim");
			if (!((NU8)(c_143228) == (NU8)(92))) goto LA10;
			nimln(57, "osproc.nim");
			backslashbuff = addChar(backslashbuff, c_143228);
		}		goto LA8;
		LA10: ;
		{
			nimln(58, "osproc.nim");
			if (!((NU8)(c_143228) == (NU8)(34))) goto LA13;
			nimln(59, "osproc.nim");
			result = resizeString(result, backslashbuff->Sup.len + 0);
appendString(result, backslashbuff);
			nimln(60, "osproc.nim");
			result = resizeString(result, backslashbuff->Sup.len + 0);
appendString(result, backslashbuff);
			nimln(61, "osproc.nim");
			backslashbuff = setLengthStr(backslashbuff, 0);
			nimln(62, "osproc.nim");
			result = resizeString(result, 2);
appendString(result, ((NimStringDesc*) &TMP938));
		}		goto LA8;
		LA13: ;
		{
			nimln(64, "osproc.nim");
			{
				nimln(698, "system.nim");
				nimln(698, "system.nim");
				nimln(64, "osproc.nim");
				if (!!((backslashbuff->Sup.len == 0))) goto LA18;
				nimln(65, "osproc.nim");
				result = resizeString(result, backslashbuff->Sup.len + 0);
appendString(result, backslashbuff);
				nimln(66, "osproc.nim");
				backslashbuff = setLengthStr(backslashbuff, 0);
			}			LA18: ;
			nimln(67, "osproc.nim");
			result = addChar(result, c_143228);
		}		LA8: ;
		nimln(1403, "system.nim");
		i_143230 = addInt(i_143230, 1);
	} LA7: ;
	nimln(69, "osproc.nim");
	{
		if (!needquote) goto LA22;
		nimln(70, "osproc.nim");
		result = resizeString(result, 1);
appendString(result, ((NimStringDesc*) &TMP937));
	}	LA22: ;
	popFrame();
	return result;
}
N_NIMCALL(NimStringDesc*, nospquoteShellPosix)(NimStringDesc* s) {
	NimStringDesc* result;
	NIM_BOOL safe;
	nimfr("quoteShellPosix", "osproc.nim")
	result = 0;
	nimln(77, "osproc.nim");
	{
		nimln(77, "osproc.nim");
		nimln(77, "osproc.nim");
		if (!(s->Sup.len == 0)) goto LA3;
		nimln(78, "osproc.nim");
		nimln(78, "osproc.nim");
		result = copyString(((NimStringDesc*) &TMP939));
		goto BeforeRet;
	}	LA3: ;
	nimln(80, "osproc.nim");
	safe = allcharsinset_84306(s, TMP940);
	nimln(82, "osproc.nim");
	{
		if (!safe) goto LA7;
		nimln(83, "osproc.nim");
		nimln(83, "osproc.nim");
		result = copyString(s);
		goto BeforeRet;
	}	goto LA5;
	LA7: ;
	{
		NimStringDesc* LOC10;
		NimStringDesc* LOC11;
		nimln(85, "osproc.nim");
		nimln(85, "osproc.nim");
		nimln(85, "osproc.nim");
		LOC10 = 0;
		nimln(85, "osproc.nim");
		LOC11 = 0;
		LOC11 = nsuReplaceStr(s, ((NimStringDesc*) &TMP941), ((NimStringDesc*) &TMP945));
		LOC10 = rawNewString(LOC11->Sup.len + 2);
appendString(LOC10, ((NimStringDesc*) &TMP941));
appendString(LOC10, LOC11);
appendString(LOC10, ((NimStringDesc*) &TMP941));
		result = LOC10;
		goto BeforeRet;
	}	LA5: ;
	BeforeRet: ;	popFrame();
	return result;
}
N_NIMCALL(NimStringDesc*, nospquoteShell)(NimStringDesc* s) {
	NimStringDesc* result;
	nimfr("quoteShell", "osproc.nim")
	result = 0;
	nimln(92, "osproc.nim");
	nimln(92, "osproc.nim");
	result = nospquoteShellPosix(s);
	goto BeforeRet;
	BeforeRet: ;	popFrame();
	return result;
}
static N_INLINE(NI, subInt)(NI a, NI b) {
	NI result;
	result = 0;
	result = (NI)((NU64)(a) - (NU64)(b));
	{
		NIM_BOOL LOC3;
		LOC3 = 0;
		LOC3 = (0 <= (NI)(result ^ a));
		if (LOC3) goto LA4;
		LOC3 = (0 <= (NI)(result ^ (NI)((NU64) ~(b))));
		LA4: ;
		if (!LOC3) goto LA5;
		goto BeforeRet;
	}	LA5: ;
	raiseOverflow();	BeforeRet: ;	return result;
}
static N_INLINE(tcell38848*, usrtocell_42239)(void* usr) {
	tcell38848* result;
	nimfr("usrToCell", "gc.nim")
	result = 0;
	nimln(116, "gc.nim");
	nimln(116, "gc.nim");
	nimln(116, "gc.nim");
	result = ((tcell38848*) ((NI)((NU64)(((NI) (usr))) - (NU64)(((NI)sizeof(tcell38848))))));
	popFrame();
	return result;
}
static N_INLINE(void, rtladdzct_43802)(tcell38848* c) {
	nimfr("rtlAddZCT", "gc.nim")
	nimln(197, "gc.nim");
	addzct_42215(&gch_40844.Zct, c);	popFrame();
}
static N_INLINE(void, nimGCunrefNoCycle)(void* p) {
	tcell38848* c;
	nimfr("nimGCunrefNoCycle", "gc.nim")
	nimln(231, "gc.nim");
	c = usrtocell_42239(p);
	nimln(233, "gc.nim");
	{
		nimln(165, "gc.nim");
		(*c).Refcount -= 8;
		nimln(166, "gc.nim");
		if (!((NU64)((*c).Refcount) < (NU64)(8))) goto LA3;
		nimln(234, "gc.nim");
		rtladdzct_43802(c);	}	LA3: ;
	popFrame();
}
N_NIMCALL(tprocess143203*, startcmd_143428)(NimStringDesc* command, NU8 options) {
	tprocess143203* result;
	TY9552* c;
	TY9552* a;
	NI TMP946;
	NI i_143473;
	NI HEX3Atmp_143475;
	NI TMP947;
	NI res_143477;
	nimfr("startCmd", "osproc.nim")
	result = 0;
	nimln(135, "osproc.nim");
	c = nosparseCmdLine(command);
	a = 0;
	nimln(137, "osproc.nim");
	nimln(137, "osproc.nim");
	nimln(137, "osproc.nim");
	TMP946 = subInt(c->Sup.len, 1);
	a = (TY9552*) newSeq((&NTI9552), (NI64)(TMP946));
	i_143473 = 0;
	HEX3Atmp_143475 = 0;
	nimln(138, "osproc.nim");
	nimln(138, "osproc.nim");
	nimln(138, "osproc.nim");
	TMP947 = subInt(c->Sup.len, 1);
	HEX3Atmp_143475 = (NI64)(TMP947);
	nimln(1308, "system.nim");
	res_143477 = 1;
	nimln(1309, "system.nim");
	while (1) {
		NI TMP948;
		NimStringDesc* LOC2;
		nimln(1309, "system.nim");
		if (!(res_143477 <= HEX3Atmp_143475)) goto LA1;
		nimln(1308, "system.nim");
		i_143473 = res_143477;
		nimln(138, "osproc.nim");
		nimln(138, "osproc.nim");
		TMP948 = subInt(i_143473, 1);
		if ((NU)((NI64)(TMP948)) >= (NU)(a->Sup.len)) raiseIndexError();
		if ((NU)(i_143473) >= (NU)(c->Sup.len)) raiseIndexError();
		LOC2 = 0;
		LOC2 = a->data[(NI64)(TMP948)]; a->data[(NI64)(TMP948)] = copyStringRC1(c->data[i_143473]);
		if (LOC2) nimGCunrefNoCycle(LOC2);
		nimln(1311, "system.nim");
		res_143477 = addInt(res_143477, 1);
	} LA1: ;
	nimln(139, "osproc.nim");
	if ((NU)(0) >= (NU)(c->Sup.len)) raiseIndexError();
	result = nospstartProcess(c->data[0], ((NimStringDesc*) &TMP936), a->data, a->Sup.len, NIM_NIL, options);
	popFrame();
	return result;
}
N_NIMCALL(NI, nospprocessID)(tprocess143203* p) {
	NI result;
	nimfr("processID", "osproc.nim")
	result = 0;
	nimln(158, "osproc.nim");
	nimln(158, "osproc.nim");
	result = (*p).Id;
	goto BeforeRet;
	BeforeRet: ;	popFrame();
	return result;
}
N_NIMCALL(int, nospinputHandle)(tprocess143203* p) {
	int result;
	nimfr("inputHandle", "osproc.nim")
	result = 0;
	nimln(191, "osproc.nim");
	result = (*p).Inhandle;
	popFrame();
	return result;
}
N_NIMCALL(int, nospoutputHandle)(tprocess143203* p) {
	int result;
	nimfr("outputHandle", "osproc.nim")
	result = 0;
	nimln(199, "osproc.nim");
	result = (*p).Outhandle;
	popFrame();
	return result;
}
N_NIMCALL(int, nosperrorHandle)(tprocess143203* p) {
	int result;
	nimfr("errorHandle", "osproc.nim")
	result = 0;
	nimln(207, "osproc.nim");
	result = (*p).Errhandle;
	popFrame();
	return result;
}
N_NIMCALL(NI, nospcountProcessors)(void) {
	NI result;
	nimfr("countProcessors", "osproc.nim")
	result = 0;
	nimln(243, "osproc.nim");
	result = sysconf(_SC_NPROCESSORS_ONLN);
	nimln(244, "osproc.nim");
	{
		nimln(244, "osproc.nim");
		if (!(result <= 0)) goto LA3;
		nimln(244, "osproc.nim");
		result = 1;
	}	LA3: ;
	popFrame();
	return result;
}N_NIMCALL(void, TMP952)(void* p, NI op) {
	tprocess143203* a;
	a = (tprocess143203*)p;
	nimGCvisit((void*)(*a).Instream, op);
	nimGCvisit((void*)(*a).Outstream, op);
	nimGCvisit((void*)(*a).Errstream, op);
}
N_NIMCALL(void, TMP953)(void* p, NI op) {
	TY144202* a;
	NI LOC1;
	a = (TY144202*)p;
	LOC1 = 0;
	for (LOC1 = 0; LOC1 < a->Sup.len; LOC1++) {
	nimGCvisit((void*)a->data[LOC1], op);
	}
}

static N_INLINE(void, asgnRefNoCycle)(void** dest, void* src) {
	nimfr("asgnRefNoCycle", "gc.nim")
	nimln(249, "gc.nim");
	{
		tcell38848* c;
		nimln(698, "system.nim");
		nimln(698, "system.nim");
		if (!!((src == NIM_NIL))) goto LA3;
		nimln(250, "gc.nim");
		c = usrtocell_42239(src);
		nimln(167, "gc.nim");
		(*c).Refcount += 8;
	}	LA3: ;
	nimln(252, "gc.nim");
	{
		tcell38848* c;
		nimln(698, "system.nim");
		nimln(698, "system.nim");
		if (!!(((*dest) == NIM_NIL))) goto LA7;
		nimln(253, "gc.nim");
		c = usrtocell_42239((*dest));
		nimln(254, "gc.nim");
		{
			nimln(165, "gc.nim");
			(*c).Refcount -= 8;
			nimln(166, "gc.nim");
			if (!((NU64)((*c).Refcount) < (NU64)(8))) goto LA11;
			nimln(255, "gc.nim");
			rtladdzct_43802(c);		}		LA11: ;
	}	LA7: ;
	nimln(256, "gc.nim");
	(*dest) = src;
	popFrame();
}
N_NIMCALL(NI, nospexecProcesses)(NimStringDesc** cmds, NI cmdsLen0, NU8 options_143808, NI n) {
	NI result;
	NU8 options;
	nimfr("execProcesses", "osproc.nim")
	result = 0;
	nimln(255, "osproc.nim");
	nimln(255, "osproc.nim");
	options = (options_143808 & ~ 8);
	nimln(257, "osproc.nim");
	{
		nimln(257, "osproc.nim");
		nimln(257, "osproc.nim");
		if (!!((0 < n))) goto LA3;
		nimln(257, "osproc.nim");
		hiddenraiseassert_76017(((NimStringDesc*) &TMP949));	}	LA3: ;
	nimln(258, "osproc.nim");
	{
		TY144202* q;
		NI m;
		NI i_144233;
		NI HEX3Atmp_144479;
		NI TMP954;
		NI res_144481;
		NI i;
		NI j_144448;
		NI HEX3Atmp_144487;
		NI TMP960;
		NI res_144489;
		nimln(706, "system.nim");
		if (!(1 < n)) goto LA7;
		q = 0;
		nimln(260, "osproc.nim");
		q = (TY144202*) newSeq((&NTI144202), n);
		nimln(261, "osproc.nim");
		nimln(261, "osproc.nim");
		nimln(261, "osproc.nim");
		m = ((n <= cmdsLen0) ? n : cmdsLen0);
		i_144233 = 0;
		HEX3Atmp_144479 = 0;
		nimln(262, "osproc.nim");
		nimln(262, "osproc.nim");
		TMP954 = subInt(m, 1);
		HEX3Atmp_144479 = (NI64)(TMP954);
		nimln(1308, "system.nim");
		res_144481 = 0;
		nimln(1309, "system.nim");
		while (1) {
			nimln(1309, "system.nim");
			if (!(res_144481 <= HEX3Atmp_144479)) goto LA9;
			nimln(1308, "system.nim");
			i_144233 = res_144481;
			nimln(263, "osproc.nim");
			if ((NU)(i_144233) >= (NU)(q->Sup.len)) raiseIndexError();
			if ((NU)(i_144233) >= (NU)(cmdsLen0)) raiseIndexError();
			asgnRefNoCycle((void**) &q->data[i_144233], startcmd_143428(cmds[i_144233], options));
			nimln(1311, "system.nim");
			res_144481 = addInt(res_144481, 1);
		} LA9: ;
		nimln(279, "osproc.nim");
		i = m;
		nimln(280, "osproc.nim");
		while (1) {
			NI r_144412;
			NI HEX3Atmp_144483;
			NI TMP959;
			NI res_144485;
			nimln(280, "osproc.nim");
			nimln(280, "osproc.nim");
			if (!(i <= (cmdsLen0-1))) goto LA10;
			nimln(281, "osproc.nim");
			nossleep(50);			r_144412 = 0;
			HEX3Atmp_144483 = 0;
			nimln(282, "osproc.nim");
			nimln(282, "osproc.nim");
			TMP959 = subInt(n, 1);
			HEX3Atmp_144483 = (NI64)(TMP959);
			nimln(1308, "system.nim");
			res_144485 = 0;
			nimln(1309, "system.nim");
			while (1) {
				nimln(1309, "system.nim");
				if (!(res_144485 <= HEX3Atmp_144483)) goto LA11;
				nimln(1308, "system.nim");
				r_144412 = res_144485;
				nimln(283, "osproc.nim");
				{
					NIM_BOOL LOC14;
					NI LOC17;
					nimln(283, "osproc.nim");
					nimln(283, "osproc.nim");
					if ((NU)(r_144412) >= (NU)(q->Sup.len)) raiseIndexError();
					LOC14 = 0;
					LOC14 = nosprunning(q->data[r_144412]);
					if (!!(LOC14)) goto LA15;
					nimln(285, "osproc.nim");
					nimln(285, "osproc.nim");
					nimln(285, "osproc.nim");
					if ((NU)(r_144412) >= (NU)(q->Sup.len)) raiseIndexError();
					LOC17 = 0;
					LOC17 = nospwaitForExit(q->data[r_144412], -1);
					result = ((LOC17 >= result) ? LOC17 : result);
					nimln(286, "osproc.nim");
					{
						nimln(698, "system.nim");
						nimln(698, "system.nim");
						if ((NU)(r_144412) >= (NU)(q->Sup.len)) raiseIndexError();
						if (!!((q->data[r_144412] == NIM_NIL))) goto LA20;
						nimln(286, "osproc.nim");
						if ((NU)(r_144412) >= (NU)(q->Sup.len)) raiseIndexError();
						nospclose(q->data[r_144412]);					}					LA20: ;
					nimln(287, "osproc.nim");
					if ((NU)(r_144412) >= (NU)(q->Sup.len)) raiseIndexError();
					if ((NU)(i) >= (NU)(cmdsLen0)) raiseIndexError();
					asgnRefNoCycle((void**) &q->data[r_144412], startcmd_143428(cmds[i], options));
					nimln(288, "osproc.nim");
					i = addInt(i, 1);
					nimln(289, "osproc.nim");
					{
						nimln(706, "system.nim");
						nimln(289, "osproc.nim");
						if (!((cmdsLen0-1) < i)) goto LA24;
						nimln(289, "osproc.nim");
						goto LA11;
					}					LA24: ;
				}				LA15: ;
				nimln(1311, "system.nim");
				res_144485 = addInt(res_144485, 1);
			} LA11: ;
		} LA10: ;
		j_144448 = 0;
		HEX3Atmp_144487 = 0;
		nimln(290, "osproc.nim");
		nimln(290, "osproc.nim");
		TMP960 = subInt(m, 1);
		HEX3Atmp_144487 = (NI64)(TMP960);
		nimln(1308, "system.nim");
		res_144489 = 0;
		nimln(1309, "system.nim");
		while (1) {
			NI LOC27;
			nimln(1309, "system.nim");
			if (!(res_144489 <= HEX3Atmp_144487)) goto LA26;
			nimln(1308, "system.nim");
			j_144448 = res_144489;
			nimln(291, "osproc.nim");
			nimln(291, "osproc.nim");
			nimln(291, "osproc.nim");
			if ((NU)(j_144448) >= (NU)(q->Sup.len)) raiseIndexError();
			LOC27 = 0;
			LOC27 = nospwaitForExit(q->data[j_144448], -1);
			result = ((LOC27 >= result) ? LOC27 : result);
			nimln(292, "osproc.nim");
			{
				nimln(698, "system.nim");
				nimln(698, "system.nim");
				if ((NU)(j_144448) >= (NU)(q->Sup.len)) raiseIndexError();
				if (!!((q->data[j_144448] == NIM_NIL))) goto LA30;
				nimln(292, "osproc.nim");
				if ((NU)(j_144448) >= (NU)(q->Sup.len)) raiseIndexError();
				nospclose(q->data[j_144448]);			}			LA30: ;
			nimln(1311, "system.nim");
			res_144489 = addInt(res_144489, 1);
		} LA26: ;
	}	goto LA5;
	LA7: ;
	{
		NI i_144473;
		NI HEX3Atmp_144491;
		NI res_144493;
		i_144473 = 0;
		HEX3Atmp_144491 = 0;
		nimln(294, "osproc.nim");
		nimln(294, "osproc.nim");
		HEX3Atmp_144491 = (cmdsLen0-1);
		nimln(1308, "system.nim");
		res_144493 = 0;
		nimln(1309, "system.nim");
		while (1) {
			tprocess143203* p;
			NI LOC34;
			nimln(1309, "system.nim");
			if (!(res_144493 <= HEX3Atmp_144491)) goto LA33;
			nimln(1308, "system.nim");
			i_144473 = res_144493;
			nimln(295, "osproc.nim");
			if ((NU)(i_144473) >= (NU)(cmdsLen0)) raiseIndexError();
			p = startcmd_143428(cmds[i_144473], options);
			nimln(296, "osproc.nim");
			nimln(296, "osproc.nim");
			nimln(296, "osproc.nim");
			LOC34 = 0;
			LOC34 = nospwaitForExit(p, -1);
			result = ((LOC34 >= result) ? LOC34 : result);
			nimln(297, "osproc.nim");
			nospclose(p);			nimln(1311, "system.nim");
			res_144493 = addInt(res_144493, 1);
		} LA33: ;
	}	LA5: ;
	popFrame();
	return result;
}
N_NIMCALL(NimStringDesc*, nospexecProcess)(NimStringDesc* command, NU8 options) {
	NimStringDesc* result;
	tprocess143203* p;
	tstream141629* outp;
	NimStringDesc* line;
	nimfr("execProcess", "osproc.nim")
	result = 0;
	nimln(312, "osproc.nim");
	p = startcmd_143428(command, options);
	nimln(313, "osproc.nim");
	outp = nospoutputStream(p);
	nimln(314, "osproc.nim");
	result = copyString(((NimStringDesc*) &TMP961));
	nimln(315, "osproc.nim");
	nimln(315, "osproc.nim");
	line = rawNewString(120);
	nimln(316, "osproc.nim");
	while (1) {
		nimln(317, "osproc.nim");
		{
			NIM_BOOL LOC4;
			nimln(317, "osproc.nim");
			LOC4 = 0;
			LOC4 = readline_141973(outp, &line);
			if (!LOC4) goto LA5;
			nimln(318, "osproc.nim");
			result = resizeString(result, line->Sup.len + 0);
appendString(result, line);
			nimln(319, "osproc.nim");
			result = resizeString(result, 1);
appendString(result, ((NimStringDesc*) &TMP962));
		}		goto LA2;
		LA5: ;
		{
			NIM_BOOL LOC8;
			nimln(320, "osproc.nim");
			nimln(320, "osproc.nim");
			LOC8 = 0;
			LOC8 = nosprunning(p);
			if (!!(LOC8)) goto LA9;
			nimln(320, "osproc.nim");
			goto LA1;
		}		goto LA2;
		LA9: ;
		LA2: ;
	} LA1: ;
	nimln(321, "osproc.nim");
	nospclose(p);	popFrame();
	return result;
}
N_NIMCALL(NimStringDesc*, addcmdargs_144604)(NimStringDesc* command, NimStringDesc** args, NI argsLen0) {
	NimStringDesc* result;
	NI i_144619;
	NI HEX3Atmp_144620;
	NI res_144622;
	nimfr("addCmdArgs", "osproc.nim")
	result = 0;
	nimln(565, "osproc.nim");
	result = nospquoteShell(command);
	i_144619 = 0;
	HEX3Atmp_144620 = 0;
	nimln(566, "osproc.nim");
	nimln(566, "osproc.nim");
	HEX3Atmp_144620 = (argsLen0-1);
	nimln(1308, "system.nim");
	res_144622 = 0;
	nimln(1309, "system.nim");
	while (1) {
		NimStringDesc* LOC2;
		nimln(1309, "system.nim");
		if (!(res_144622 <= HEX3Atmp_144620)) goto LA1;
		nimln(1308, "system.nim");
		i_144619 = res_144622;
		nimln(567, "osproc.nim");
		result = resizeString(result, 1);
appendString(result, ((NimStringDesc*) &TMP963));
		nimln(568, "osproc.nim");
		nimln(568, "osproc.nim");
		if ((NU)(i_144619) >= (NU)(argsLen0)) raiseIndexError();
		LOC2 = 0;
		LOC2 = nospquoteShell(args[i_144619]);
		result = resizeString(result, LOC2->Sup.len + 0);
appendString(result, LOC2);
		nimln(1311, "system.nim");
		res_144622 = addInt(res_144622, 1);
	} LA1: ;
	popFrame();
	return result;
}
N_NIMCALL(NCSTRING*, tocstringarray_144626)(NimStringDesc** b, NI bLen0, NimStringDesc** a, NI aLen0) {
	NCSTRING* result;
	NI TMP964;
	NI TMP965;
	NI TMP966;
	void* LOC1;
	NI i_144654;
	NI HEX3Atmp_144680;
	NI res_144682;
	NI i_144664;
	NI HEX3Atmp_144685;
	NI res_144687;
	nimfr("toCStringArray", "osproc.nim")
	result = 0;
	nimln(571, "osproc.nim");
	nimln(571, "osproc.nim");
	nimln(571, "osproc.nim");
	nimln(571, "osproc.nim");
	nimln(571, "osproc.nim");
	nimln(571, "osproc.nim");
	nimln(571, "osproc.nim");
	TMP964 = addInt(aLen0, bLen0);
	TMP965 = addInt((NI64)(TMP964), 1);
	TMP966 = mulInt((NI64)(TMP965), 8);
	LOC1 = 0;
	LOC1 = alloc0_4004((NI64)(TMP966));
	result = ((NCSTRING*) (LOC1));
	i_144654 = 0;
	HEX3Atmp_144680 = 0;
	nimln(572, "osproc.nim");
	nimln(572, "osproc.nim");
	HEX3Atmp_144680 = (bLen0-1);
	nimln(1308, "system.nim");
	res_144682 = 0;
	nimln(1309, "system.nim");
	while (1) {
		NI TMP967;
		void* LOC3;
		NI TMP968;
		nimln(1309, "system.nim");
		if (!(res_144682 <= HEX3Atmp_144680)) goto LA2;
		nimln(1308, "system.nim");
		i_144654 = res_144682;
		nimln(573, "osproc.nim");
		if ((NU)(i_144654) > (NU)(50000)) raiseIndexError();
		nimln(573, "osproc.nim");
		nimln(573, "osproc.nim");
		nimln(573, "osproc.nim");
		if ((NU)(i_144654) >= (NU)(bLen0)) raiseIndexError();
		TMP967 = addInt(b[i_144654]->Sup.len, 1);
		LOC3 = 0;
		LOC3 = alloc_4001((NI64)(TMP967));
		result[(i_144654)- 0] = ((NCSTRING) (LOC3));
		nimln(574, "osproc.nim");
		if ((NU)(i_144654) > (NU)(50000)) raiseIndexError();
		if ((NU)(i_144654) >= (NU)(bLen0)) raiseIndexError();
		nimln(574, "osproc.nim");
		nimln(574, "osproc.nim");
		if ((NU)(i_144654) >= (NU)(bLen0)) raiseIndexError();
		TMP968 = addInt(b[i_144654]->Sup.len, 1);
		memcpy(((void*) (result[(i_144654)- 0])), ((void*) (b[i_144654]->data)), (NI64)(TMP968));		nimln(1311, "system.nim");
		res_144682 = addInt(res_144682, 1);
	} LA2: ;
	i_144664 = 0;
	HEX3Atmp_144685 = 0;
	nimln(575, "osproc.nim");
	nimln(575, "osproc.nim");
	HEX3Atmp_144685 = (aLen0-1);
	nimln(1308, "system.nim");
	res_144687 = 0;
	nimln(1309, "system.nim");
	while (1) {
		NI TMP969;
		NI TMP970;
		void* LOC5;
		NI TMP971;
		NI TMP972;
		nimln(1309, "system.nim");
		if (!(res_144687 <= HEX3Atmp_144685)) goto LA4;
		nimln(1308, "system.nim");
		i_144664 = res_144687;
		nimln(576, "osproc.nim");
		nimln(576, "osproc.nim");
		nimln(576, "osproc.nim");
		TMP969 = addInt(i_144664, bLen0);
		if ((NU)((NI64)(TMP969)) > (NU)(50000)) raiseIndexError();
		nimln(576, "osproc.nim");
		nimln(576, "osproc.nim");
		nimln(576, "osproc.nim");
		if ((NU)(i_144664) >= (NU)(aLen0)) raiseIndexError();
		TMP970 = addInt(a[i_144664]->Sup.len, 1);
		LOC5 = 0;
		LOC5 = alloc_4001((NI64)(TMP970));
		result[((NI64)(TMP969))- 0] = ((NCSTRING) (LOC5));
		nimln(577, "osproc.nim");
		nimln(577, "osproc.nim");
		nimln(577, "osproc.nim");
		TMP971 = addInt(i_144664, bLen0);
		if ((NU)((NI64)(TMP971)) > (NU)(50000)) raiseIndexError();
		if ((NU)(i_144664) >= (NU)(aLen0)) raiseIndexError();
		nimln(577, "osproc.nim");
		nimln(577, "osproc.nim");
		if ((NU)(i_144664) >= (NU)(aLen0)) raiseIndexError();
		TMP972 = addInt(a[i_144664]->Sup.len, 1);
		memcpy(((void*) (result[((NI64)(TMP971))- 0])), ((void*) (a[i_144664]->data)), (NI64)(TMP972));		nimln(1311, "system.nim");
		res_144687 = addInt(res_144687, 1);
	} LA4: ;
	popFrame();
	return result;
}
N_NIMCALL(NCSTRING*, tocstringarray_144692)(tstringtable111610* t) {
	NCSTRING* result;
	NI LOC1;
	NI TMP973;
	NI TMP974;
	void* LOC2;
	NI i;
	NimStringDesc* key_144698;
	NimStringDesc* val_144699;
	NI h_144716;
	NI HEX3Atmp_144718;
	NI res_144720;
	nimfr("ToCStringArray", "osproc.nim")
	result = 0;
	nimln(580, "osproc.nim");
	nimln(580, "osproc.nim");
	nimln(580, "osproc.nim");
	nimln(580, "osproc.nim");
	nimln(580, "osproc.nim");
	LOC1 = 0;
	LOC1 = nstlen(t);
	TMP973 = addInt(LOC1, 1);
	TMP974 = mulInt((NI64)(TMP973), 8);
	LOC2 = 0;
	LOC2 = alloc0_4004((NI64)(TMP974));
	result = ((NCSTRING*) (LOC2));
	nimln(581, "osproc.nim");
	i = 0;
	key_144698 = 0;
	val_144699 = 0;
	h_144716 = 0;
	HEX3Atmp_144718 = 0;
	nimln(40, "strtabs.nim");
	nimln(40, "strtabs.nim");
	HEX3Atmp_144718 = ((*t).Data->Sup.len-1);
	nimln(1308, "system.nim");
	res_144720 = 0;
	nimln(1309, "system.nim");
	while (1) {
		nimln(1309, "system.nim");
		if (!(res_144720 <= HEX3Atmp_144718)) goto LA3;
		nimln(1308, "system.nim");
		h_144716 = res_144720;
		nimln(41, "strtabs.nim");
		{
			NimStringDesc* x;
			NimStringDesc* LOC8;
			NI TMP976;
			void* LOC9;
			NI TMP977;
			nimln(41, "strtabs.nim");
			nimln(41, "strtabs.nim");
			if ((NU)(h_144716) >= (NU)((*t).Data->Sup.len)) raiseIndexError();
			if (!!((*t).Data->data[h_144716].Field0 == 0)) goto LA6;
			nimln(42, "strtabs.nim");
			if ((NU)(h_144716) >= (NU)((*t).Data->Sup.len)) raiseIndexError();
			key_144698 = (*t).Data->data[h_144716].Field0;
			nimln(42, "strtabs.nim");
			if ((NU)(h_144716) >= (NU)((*t).Data->Sup.len)) raiseIndexError();
			val_144699 = (*t).Data->data[h_144716].Field1;
			nimln(583, "osproc.nim");
			nimln(583, "osproc.nim");
			LOC8 = 0;
			LOC8 = rawNewString(key_144698->Sup.len + val_144699->Sup.len + 1);
appendString(LOC8, key_144698);
appendString(LOC8, ((NimStringDesc*) &TMP975));
appendString(LOC8, val_144699);
			x = LOC8;
			nimln(584, "osproc.nim");
			if ((NU)(i) > (NU)(50000)) raiseIndexError();
			nimln(584, "osproc.nim");
			nimln(584, "osproc.nim");
			nimln(584, "osproc.nim");
			TMP976 = addInt(x->Sup.len, 1);
			LOC9 = 0;
			LOC9 = alloc_4001((NI64)(TMP976));
			result[(i)- 0] = ((NCSTRING) (LOC9));
			nimln(585, "osproc.nim");
			if ((NU)(i) > (NU)(50000)) raiseIndexError();
			if ((NU)(0) > (NU)(x->Sup.len)) raiseIndexError();
			nimln(585, "osproc.nim");
			nimln(585, "osproc.nim");
			TMP977 = addInt(x->Sup.len, 1);
			memcpy(((void*) (result[(i)- 0])), ((void*) (&x->data[0])), (NI64)(TMP977));			nimln(586, "osproc.nim");
			i = addInt(i, 1);
		}		LA6: ;
		nimln(1311, "system.nim");
		res_144720 = addInt(res_144720, 1);
	} LA3: ;
	popFrame();
	return result;
}
N_NIMCALL(NCSTRING*, envtocstringarray_144723)(void) {
	NCSTRING* result;
	NI counter;
	NimStringDesc* key_144727;
	NimStringDesc* val_144728;
	NI i_144756;
	NI HEX3Atmp_144758;
	NI res_144760;
	NI TMP980;
	NI TMP981;
	void* LOC2;
	NI i;
	NimStringDesc* key_144741;
	NimStringDesc* val_144742;
	NI i_144772;
	NI HEX3Atmp_144774;
	NI res_144776;
	nimfr("EnvToCStringArray", "osproc.nim")
	result = 0;
	nimln(589, "osproc.nim");
	counter = 0;
	key_144727 = 0;
	val_144728 = 0;
	nimln(1148, "os.nim");
	getenvvarsc_103202();	i_144756 = 0;
	HEX3Atmp_144758 = 0;
	nimln(1149, "os.nim");
	nimln(1149, "os.nim");
	HEX3Atmp_144758 = (environment_103029->Sup.len-1);
	nimln(1308, "system.nim");
	res_144760 = 0;
	nimln(1309, "system.nim");
	while (1) {
		NI p_144762;
		NI TMP978;
		NI TMP979;
		nimln(1309, "system.nim");
		if (!(res_144760 <= HEX3Atmp_144758)) goto LA1;
		nimln(1308, "system.nim");
		i_144756 = res_144760;
		nimln(1150, "os.nim");
		if ((NU)(i_144756) >= (NU)(environment_103029->Sup.len)) raiseIndexError();
		p_144762 = nsuFindChar(environment_103029->data[i_144756], 61, 0);
		nimln(1151, "os.nim");
		nimln(1151, "os.nim");
		if ((NU)(i_144756) >= (NU)(environment_103029->Sup.len)) raiseIndexError();
		nimln(1151, "os.nim");
		TMP978 = subInt(p_144762, 1);
		key_144727 = copyStrLast(environment_103029->data[i_144756], 0, (NI64)(TMP978));
		nimln(1152, "os.nim");
		nimln(1152, "os.nim");
		if ((NU)(i_144756) >= (NU)(environment_103029->Sup.len)) raiseIndexError();
		nimln(1152, "os.nim");
		TMP979 = addInt(p_144762, 1);
		val_144728 = copyStr(environment_103029->data[i_144756], (NI64)(TMP979));
		nimln(590, "osproc.nim");
		counter = addInt(counter, 1);
		nimln(1311, "system.nim");
		res_144760 = addInt(res_144760, 1);
	} LA1: ;
	nimln(591, "osproc.nim");
	nimln(591, "osproc.nim");
	nimln(591, "osproc.nim");
	nimln(591, "osproc.nim");
	TMP980 = addInt(counter, 1);
	TMP981 = mulInt((NI64)(TMP980), 8);
	LOC2 = 0;
	LOC2 = alloc0_4004((NI64)(TMP981));
	result = ((NCSTRING*) (LOC2));
	nimln(592, "osproc.nim");
	i = 0;
	key_144741 = 0;
	val_144742 = 0;
	nimln(1148, "os.nim");
	getenvvarsc_103202();	i_144772 = 0;
	HEX3Atmp_144774 = 0;
	nimln(1149, "os.nim");
	nimln(1149, "os.nim");
	HEX3Atmp_144774 = (environment_103029->Sup.len-1);
	nimln(1308, "system.nim");
	res_144776 = 0;
	nimln(1309, "system.nim");
	while (1) {
		NI p_144778;
		NI TMP982;
		NI TMP983;
		NimStringDesc* x;
		NimStringDesc* LOC4;
		NI TMP984;
		void* LOC5;
		NI TMP985;
		nimln(1309, "system.nim");
		if (!(res_144776 <= HEX3Atmp_144774)) goto LA3;
		nimln(1308, "system.nim");
		i_144772 = res_144776;
		nimln(1150, "os.nim");
		if ((NU)(i_144772) >= (NU)(environment_103029->Sup.len)) raiseIndexError();
		p_144778 = nsuFindChar(environment_103029->data[i_144772], 61, 0);
		nimln(1151, "os.nim");
		nimln(1151, "os.nim");
		if ((NU)(i_144772) >= (NU)(environment_103029->Sup.len)) raiseIndexError();
		nimln(1151, "os.nim");
		TMP982 = subInt(p_144778, 1);
		key_144741 = copyStrLast(environment_103029->data[i_144772], 0, (NI64)(TMP982));
		nimln(1152, "os.nim");
		nimln(1152, "os.nim");
		if ((NU)(i_144772) >= (NU)(environment_103029->Sup.len)) raiseIndexError();
		nimln(1152, "os.nim");
		TMP983 = addInt(p_144778, 1);
		val_144742 = copyStr(environment_103029->data[i_144772], (NI64)(TMP983));
		nimln(594, "osproc.nim");
		nimln(594, "osproc.nim");
		LOC4 = 0;
		LOC4 = rawNewString(key_144741->Sup.len + val_144742->Sup.len + 1);
appendString(LOC4, key_144741);
appendString(LOC4, ((NimStringDesc*) &TMP975));
appendString(LOC4, val_144742);
		x = LOC4;
		nimln(595, "osproc.nim");
		if ((NU)(i) > (NU)(50000)) raiseIndexError();
		nimln(595, "osproc.nim");
		nimln(595, "osproc.nim");
		nimln(595, "osproc.nim");
		TMP984 = addInt(x->Sup.len, 1);
		LOC5 = 0;
		LOC5 = alloc_4001((NI64)(TMP984));
		result[(i)- 0] = ((NCSTRING) (LOC5));
		nimln(596, "osproc.nim");
		if ((NU)(i) > (NU)(50000)) raiseIndexError();
		if ((NU)(0) > (NU)(x->Sup.len)) raiseIndexError();
		nimln(596, "osproc.nim");
		nimln(596, "osproc.nim");
		TMP985 = addInt(x->Sup.len, 1);
		memcpy(((void*) (result[(i)- 0])), ((void*) (&x->data[0])), (NI64)(TMP985));		nimln(597, "osproc.nim");
		i = addInt(i, 1);
		nimln(1311, "system.nim");
		res_144776 = addInt(res_144776, 1);
	} LA3: ;
	popFrame();
	return result;
}
static N_INLINE(void, setcurrentdir_100803)(NimStringDesc* newdir) {
	nimfr("setCurrentDir", "os.nim")
	nimln(475, "os.nim");
	{
		int LOC3;
		NI32 LOC6;
		nimln(698, "system.nim");
		nimln(698, "system.nim");
		nimln(475, "os.nim");
		LOC3 = 0;
		LOC3 = chdir(newdir->data);
		if (!!((LOC3 == ((NI32) 0)))) goto LA4;
		nimln(475, "os.nim");
		nimln(475, "os.nim");
		LOC6 = 0;
		LOC6 = oslasterror_99046();
		oserror_99005(LOC6);	}	LA4: ;
	popFrame();
}
N_NIMCALL(tprocess143203*, nospstartProcess)(NimStringDesc* command, NimStringDesc* workingdir, NimStringDesc** args, NI argsLen0, tstringtable111610* env, NU8 options) {
	tprocess143203* result;
	TY144798 pstdin;
	TY144798 pstdout;
	TY144798 pstderr;
	pid_t pid;
	nimfr("startProcess", "osproc.nim")
	result = 0;
	memset((void*)pstdin, 0, sizeof(pstdin));
	memset((void*)pstdout, 0, sizeof(pstdout));
	memset((void*)pstderr, 0, sizeof(pstderr));
	nimln(606, "osproc.nim");
	result = (tprocess143203*) newObj((&NTI143205), sizeof(tprocess143203));
	(*result).Sup.m_type = (&NTI143203);
	nimln(607, "osproc.nim");
	(*result).Exitcode = ((int) -3);
	nimln(608, "osproc.nim");
	{
		nimln(731, "system.nim");
		nimln(731, "system.nim");
		if (!!(((options &(1<<((((NU8) 3))&7)))!=0))) goto LA3;
		nimln(609, "osproc.nim");
		{
			NIM_BOOL LOC7;
			NIM_BOOL LOC8;
			int LOC9;
			int LOC11;
			int LOC13;
			NI32 LOC16;
			nimln(609, "osproc.nim");
			LOC7 = 0;
			nimln(609, "osproc.nim");
			LOC8 = 0;
			nimln(698, "system.nim");
			nimln(698, "system.nim");
			nimln(609, "osproc.nim");
			LOC9 = 0;
			LOC9 = pipe(pstdin);
			LOC8 = !((LOC9 == ((NI32) 0)));
			if (LOC8) goto LA10;
			nimln(698, "system.nim");
			nimln(698, "system.nim");
			nimln(609, "osproc.nim");
			LOC11 = 0;
			LOC11 = pipe(pstdout);
			LOC8 = !((LOC11 == ((NI32) 0)));
			LA10: ;
			LOC7 = LOC8;
			if (LOC7) goto LA12;
			nimln(698, "system.nim");
			nimln(698, "system.nim");
			nimln(610, "osproc.nim");
			LOC13 = 0;
			LOC13 = pipe(pstderr);
			LOC7 = !((LOC13 == ((NI32) 0)));
			LA12: ;
			if (!LOC7) goto LA14;
			nimln(611, "osproc.nim");
			nimln(611, "osproc.nim");
			LOC16 = 0;
			LOC16 = oslasterror_99046();
			oserror_99005(LOC16);		}		LA14: ;
	}	LA3: ;
	pid = 0;
	nimln(663, "osproc.nim");
	pid = fork();
	nimln(664, "osproc.nim");
	{
		NI32 LOC21;
		nimln(664, "osproc.nim");
		if (!(pid < 0)) goto LA19;
		nimln(664, "osproc.nim");
		nimln(664, "osproc.nim");
		LOC21 = 0;
		LOC21 = oslasterror_99046();
		oserror_99005(LOC21);	}	LA19: ;
	nimln(665, "osproc.nim");
	{
		NimStringDesc* LOC97;
		NCSTRING LOC98;
		NimStringDesc* LOC99;
		nimln(665, "osproc.nim");
		if (!(pid == 0)) goto LA24;
		nimln(668, "osproc.nim");
		{
			int LOC30;
			int LOC37;
			int LOC44;
			nimln(731, "system.nim");
			nimln(731, "system.nim");
			if (!!(((options &(1<<((((NU8) 3))&7)))!=0))) goto LA28;
			nimln(669, "osproc.nim");
			nimln(669, "osproc.nim");
			LOC30 = 0;
			LOC30 = close(pstdin[(1)- 0]);
			nimln(670, "osproc.nim");
			{
				int LOC33;
				NI32 LOC36;
				nimln(670, "osproc.nim");
				nimln(670, "osproc.nim");
				LOC33 = 0;
				LOC33 = dup2(pstdin[(0)- 0], ((int) 0));
				if (!(LOC33 < ((NI32) 0))) goto LA34;
				nimln(670, "osproc.nim");
				nimln(670, "osproc.nim");
				LOC36 = 0;
				LOC36 = oslasterror_99046();
				oserror_99005(LOC36);			}			LA34: ;
			nimln(671, "osproc.nim");
			nimln(671, "osproc.nim");
			LOC37 = 0;
			LOC37 = close(pstdout[(0)- 0]);
			nimln(672, "osproc.nim");
			{
				int LOC40;
				NI32 LOC43;
				nimln(672, "osproc.nim");
				nimln(672, "osproc.nim");
				LOC40 = 0;
				LOC40 = dup2(pstdout[(1)- 0], ((int) 1));
				if (!(LOC40 < ((NI32) 0))) goto LA41;
				nimln(672, "osproc.nim");
				nimln(672, "osproc.nim");
				LOC43 = 0;
				LOC43 = oslasterror_99046();
				oserror_99005(LOC43);			}			LA41: ;
			nimln(673, "osproc.nim");
			nimln(673, "osproc.nim");
			LOC44 = 0;
			LOC44 = close(pstderr[(0)- 0]);
			nimln(674, "osproc.nim");
			{
				nimln(730, "system.nim");
				if (!((options &(1<<((((NU8) 2))&7)))!=0)) goto LA47;
				nimln(675, "osproc.nim");
				{
					int LOC51;
					NI32 LOC54;
					nimln(675, "osproc.nim");
					nimln(675, "osproc.nim");
					LOC51 = 0;
					LOC51 = dup2(pstdout[(1)- 0], ((int) 2));
					if (!(LOC51 < ((NI32) 0))) goto LA52;
					nimln(675, "osproc.nim");
					nimln(675, "osproc.nim");
					LOC54 = 0;
					LOC54 = oslasterror_99046();
					oserror_99005(LOC54);				}				LA52: ;
			}			goto LA45;
			LA47: ;
			{
				nimln(677, "osproc.nim");
				{
					int LOC58;
					NI32 LOC61;
					nimln(677, "osproc.nim");
					nimln(677, "osproc.nim");
					LOC58 = 0;
					LOC58 = dup2(pstderr[(1)- 0], ((int) 2));
					if (!(LOC58 < ((NI32) 0))) goto LA59;
					nimln(677, "osproc.nim");
					nimln(677, "osproc.nim");
					LOC61 = 0;
					LOC61 = oslasterror_99046();
					oserror_99005(LOC61);				}				LA59: ;
			}			LA45: ;
		}		LA28: ;
		nimln(680, "osproc.nim");
		{
			int LOC64;
			NimStringDesc* LOC67;
			NCSTRING LOC68;
			NimStringDesc* LOC69;
			nimln(680, "osproc.nim");
			nimln(680, "osproc.nim");
			LOC64 = 0;
			LOC64 = setpgid(0, 0);
			if (!(LOC64 == ((NI32) -1))) goto LA65;
			nimln(680, "osproc.nim");
			nimln(680, "osproc.nim");
			LOC67 = 0;
			nimln(680, "osproc.nim");
			nimln(680, "osproc.nim");
			LOC68 = 0;
			LOC68 = strerror(errno);
			LOC69 = 0;
			LOC69 = cstrToNimstr(LOC68);
			LOC67 = rawNewString(LOC69->Sup.len + 21);
appendString(LOC67, ((NimStringDesc*) &TMP986));
appendString(LOC67, LOC69);
			quit_75432(LOC67, 1);		}		LA65: ;
		nimln(682, "osproc.nim");
		{
			nimln(706, "system.nim");
			nimln(682, "osproc.nim");
			if (!(0 < workingdir->Sup.len)) goto LA72;
			nimln(682, "osproc.nim");
			setcurrentdir_100803(workingdir);		}		LA72: ;
		nimln(683, "osproc.nim");
		{
			NCSTRING* a;
			TY113525 LOC78;
			nimln(731, "system.nim");
			nimln(731, "system.nim");
			if (!!(((options &(1<<((((NU8) 1))&7)))!=0))) goto LA76;
			nimln(684, "osproc.nim");
			memset((void*)LOC78, 0, sizeof(LOC78));
			nimln(684, "osproc.nim");
			LOC78[0] = nosextractFilename(command);
			a = tocstringarray_144626(LOC78, 1, args, argsLen0);
			nimln(685, "osproc.nim");
			{
				int LOC83;
				nimln(685, "osproc.nim");
				if (!(env == NIM_NIL)) goto LA81;
				nimln(686, "osproc.nim");
				nimln(686, "osproc.nim");
				LOC83 = 0;
				LOC83 = execv(command->data, a);
			}			goto LA79;
			LA81: ;
			{
				NCSTRING* LOC85;
				int LOC86;
				nimln(688, "osproc.nim");
				nimln(688, "osproc.nim");
				nimln(688, "osproc.nim");
				LOC85 = 0;
				LOC85 = tocstringarray_144692(env);
				LOC86 = 0;
				LOC86 = execve(command->data, a, LOC85);
			}			LA79: ;
		}		goto LA74;
		LA76: ;
		{
			NimStringDesc* x;
			NCSTRING* a;
			TY113525 LOC88;
			nimln(690, "osproc.nim");
			x = addcmdargs_144604(command, args, argsLen0);
			nimln(691, "osproc.nim");
			memset((void*)LOC88, 0, sizeof(LOC88));
			LOC88[0] = copyString(x);
			a = tocstringarray_144626(TMP987, 2, LOC88, 1);
			nimln(692, "osproc.nim");
			{
				int LOC93;
				nimln(692, "osproc.nim");
				if (!(env == NIM_NIL)) goto LA91;
				nimln(693, "osproc.nim");
				nimln(693, "osproc.nim");
				LOC93 = 0;
				LOC93 = execv("/bin/sh", a);
			}			goto LA89;
			LA91: ;
			{
				NCSTRING* LOC95;
				int LOC96;
				nimln(695, "osproc.nim");
				nimln(695, "osproc.nim");
				nimln(695, "osproc.nim");
				LOC95 = 0;
				LOC95 = tocstringarray_144692(env);
				LOC96 = 0;
				LOC96 = execve("/bin/sh", a, LOC95);
			}			LA89: ;
		}		LA74: ;
		nimln(697, "osproc.nim");
		nimln(697, "osproc.nim");
		LOC97 = 0;
		nimln(697, "osproc.nim");
		nimln(697, "osproc.nim");
		LOC98 = 0;
		LOC98 = strerror(errno);
		LOC99 = 0;
		LOC99 = cstrToNimstr(LOC98);
		LOC97 = rawNewString(LOC99->Sup.len + 20);
appendString(LOC97, ((NimStringDesc*) &TMP990));
appendString(LOC97, LOC99);
		quit_75432(LOC97, 1);	}	LA24: ;
	nimln(699, "osproc.nim");
	{
		NimStringDesc* LOC104;
		nimln(730, "system.nim");
		if (!((options &(1<<((((NU8) 0))&7)))!=0)) goto LA102;
		nimln(700, "osproc.nim");
		nimln(700, "osproc.nim");
		LOC104 = 0;
		LOC104 = nsuJoinSep(args, argsLen0, ((NimStringDesc*) &TMP963));
		printf("%s%s%s\012", (command)->data, (((NimStringDesc*) &TMP963))->data, (LOC104)->data);
	}	LA102: ;
	nimln(701, "osproc.nim");
	(*result).Id = pid;
	nimln(703, "osproc.nim");
	{
		nimln(730, "system.nim");
		if (!((options &(1<<((((NU8) 3))&7)))!=0)) goto LA107;
		nimln(705, "osproc.nim");
		(*result).Inhandle = ((int) 0);
		nimln(706, "osproc.nim");
		(*result).Outhandle = ((int) 1);
		nimln(707, "osproc.nim");
		{
			nimln(730, "system.nim");
			if (!((options &(1<<((((NU8) 2))&7)))!=0)) goto LA111;
			nimln(708, "osproc.nim");
			(*result).Errhandle = (*result).Outhandle;
		}		goto LA109;
		LA111: ;
		{
			nimln(710, "osproc.nim");
			(*result).Errhandle = ((int) 2);
		}		LA109: ;
	}	goto LA105;
	LA107: ;
	{
		int LOC121;
		int LOC122;
		int LOC123;
		nimln(712, "osproc.nim");
		(*result).Inhandle = pstdin[(1)- 0];
		nimln(713, "osproc.nim");
		(*result).Outhandle = pstdout[(0)- 0];
		nimln(714, "osproc.nim");
		{
			int LOC119;
			nimln(730, "system.nim");
			if (!((options &(1<<((((NU8) 2))&7)))!=0)) goto LA117;
			nimln(715, "osproc.nim");
			(*result).Errhandle = (*result).Outhandle;
			nimln(716, "osproc.nim");
			nimln(716, "osproc.nim");
			LOC119 = 0;
			LOC119 = close(pstderr[(0)- 0]);
		}		goto LA115;
		LA117: ;
		{
			nimln(718, "osproc.nim");
			(*result).Errhandle = pstderr[(0)- 0];
		}		LA115: ;
		nimln(719, "osproc.nim");
		nimln(719, "osproc.nim");
		LOC121 = 0;
		LOC121 = close(pstderr[(1)- 0]);
		nimln(720, "osproc.nim");
		nimln(720, "osproc.nim");
		LOC122 = 0;
		LOC122 = close(pstdin[(0)- 0]);
		nimln(721, "osproc.nim");
		nimln(721, "osproc.nim");
		LOC123 = 0;
		LOC123 = close(pstdout[(1)- 0]);
	}	LA105: ;
	popFrame();
	return result;
}
N_NIMCALL(void, nospclose)(tprocess143203* p) {
	int LOC13;
	int LOC14;
	int LOC15;
	nimfr("close", "osproc.nim")
	nimln(724, "osproc.nim");
	{
		nimln(698, "system.nim");
		nimln(698, "system.nim");
		if (!!(((*p).Instream == NIM_NIL))) goto LA3;
		nimln(724, "osproc.nim");
		close_141675((*p).Instream);	}	LA3: ;
	nimln(725, "osproc.nim");
	{
		nimln(698, "system.nim");
		nimln(698, "system.nim");
		if (!!(((*p).Outstream == NIM_NIL))) goto LA7;
		nimln(725, "osproc.nim");
		close_141675((*p).Outstream);	}	LA7: ;
	nimln(726, "osproc.nim");
	{
		nimln(698, "system.nim");
		nimln(698, "system.nim");
		if (!!(((*p).Errstream == NIM_NIL))) goto LA11;
		nimln(726, "osproc.nim");
		close_141675((*p).Errstream);	}	LA11: ;
	nimln(727, "osproc.nim");
	nimln(727, "osproc.nim");
	LOC13 = 0;
	LOC13 = close((*p).Inhandle);
	nimln(728, "osproc.nim");
	nimln(728, "osproc.nim");
	LOC14 = 0;
	LOC14 = close((*p).Outhandle);
	nimln(729, "osproc.nim");
	nimln(729, "osproc.nim");
	LOC15 = 0;
	LOC15 = close((*p).Errhandle);
	popFrame();
}
N_NIMCALL(void, nospsuspend)(tprocess143203* p) {
	nimfr("suspend", "osproc.nim")
	nimln(732, "osproc.nim");
	{
		int LOC3;
		NI32 LOC6;
		nimln(698, "system.nim");
		nimln(698, "system.nim");
		nimln(732, "osproc.nim");
		nimln(732, "osproc.nim");
		if ((*p).Id == (IL64(-9223372036854775807) - IL64(1))) raiseOverflow();
		LOC3 = 0;
		LOC3 = kill(((NI64)-((*p).Id)), SIGSTOP);
		if (!!((LOC3 == ((NI32) 0)))) goto LA4;
		nimln(732, "osproc.nim");
		nimln(732, "osproc.nim");
		LOC6 = 0;
		LOC6 = oslasterror_99046();
		oserror_99005(LOC6);	}	LA4: ;
	popFrame();
}
N_NIMCALL(void, nospresume)(tprocess143203* p) {
	nimfr("resume", "osproc.nim")
	nimln(735, "osproc.nim");
	{
		int LOC3;
		NI32 LOC6;
		nimln(698, "system.nim");
		nimln(698, "system.nim");
		nimln(735, "osproc.nim");
		nimln(735, "osproc.nim");
		if ((*p).Id == (IL64(-9223372036854775807) - IL64(1))) raiseOverflow();
		LOC3 = 0;
		LOC3 = kill(((NI64)-((*p).Id)), SIGCONT);
		if (!!((LOC3 == ((NI32) 0)))) goto LA4;
		nimln(735, "osproc.nim");
		nimln(735, "osproc.nim");
		LOC6 = 0;
		LOC6 = oslasterror_99046();
		oserror_99005(LOC6);	}	LA4: ;
	popFrame();
}
N_NIMCALL(NIM_BOOL, nosprunning)(tprocess143203* p) {
	NIM_BOOL result;
	pid_t ret;
	nimfr("running", "osproc.nim")
	result = 0;
	nimln(738, "osproc.nim");
	ret = waitpid((*p).Id, &(*p).Exitcode, WNOHANG);
	nimln(739, "osproc.nim");
	{
		nimln(739, "osproc.nim");
		if (!(ret == 0)) goto LA3;
		nimln(739, "osproc.nim");
		nimln(739, "osproc.nim");
		result = NIM_TRUE;
		goto BeforeRet;
	}	LA3: ;
	nimln(740, "osproc.nim");
	nimln(740, "osproc.nim");
	result = (ret == (*p).Id);
	BeforeRet: ;	popFrame();
	return result;
}
N_NIMCALL(void, nospterminate)(tprocess143203* p) {
	nimfr("terminate", "osproc.nim")
	nimln(743, "osproc.nim");
	{
		int LOC3;
		nimln(743, "osproc.nim");
		nimln(743, "osproc.nim");
		nimln(743, "osproc.nim");
		if ((*p).Id == (IL64(-9223372036854775807) - IL64(1))) raiseOverflow();
		LOC3 = 0;
		LOC3 = kill(((NI64)-((*p).Id)), SIGTERM);
		if (!(LOC3 == ((NI32) 0))) goto LA4;
		nimln(744, "osproc.nim");
		{
			NIM_BOOL LOC8;
			nimln(744, "osproc.nim");
			LOC8 = 0;
			LOC8 = nosprunning(p);
			if (!LOC8) goto LA9;
			nimln(745, "osproc.nim");
			{
				int LOC13;
				NI32 LOC16;
				nimln(698, "system.nim");
				nimln(698, "system.nim");
				nimln(745, "osproc.nim");
				nimln(745, "osproc.nim");
				if ((*p).Id == (IL64(-9223372036854775807) - IL64(1))) raiseOverflow();
				LOC13 = 0;
				LOC13 = kill(((NI64)-((*p).Id)), SIGKILL);
				if (!!((LOC13 == ((NI32) 0)))) goto LA14;
				nimln(745, "osproc.nim");
				nimln(745, "osproc.nim");
				LOC16 = 0;
				LOC16 = oslasterror_99046();
				oserror_99005(LOC16);			}			LA14: ;
		}		LA9: ;
	}	goto LA1;
	LA4: ;
	{
		NI32 LOC18;
		nimln(746, "osproc.nim");
		nimln(746, "osproc.nim");
		LOC18 = 0;
		LOC18 = oslasterror_99046();
		oserror_99005(LOC18);	}	LA1: ;
	popFrame();
}
N_NIMCALL(NI, nospwaitForExit)(tprocess143203* p, NI timeout) {
	NI result;
	nimfr("waitForExit", "osproc.nim")
	result = 0;
	nimln(753, "osproc.nim");
	{
		nimln(698, "system.nim");
		nimln(698, "system.nim");
		if (!!(((*p).Exitcode == ((NI32) -3)))) goto LA3;
		nimln(753, "osproc.nim");
		nimln(753, "osproc.nim");
		result = ((NI) ((*p).Exitcode));
		goto BeforeRet;
	}	LA3: ;
	nimln(754, "osproc.nim");
	{
		pid_t LOC7;
		NI32 LOC10;
		nimln(754, "osproc.nim");
		nimln(754, "osproc.nim");
		LOC7 = 0;
		LOC7 = waitpid((*p).Id, &(*p).Exitcode, ((int) 0));
		if (!(LOC7 < 0)) goto LA8;
		nimln(755, "osproc.nim");
		(*p).Exitcode = ((int) -3);
		nimln(756, "osproc.nim");
		nimln(756, "osproc.nim");
		LOC10 = 0;
		LOC10 = oslasterror_99046();
		oserror_99005(LOC10);	}	LA8: ;
	nimln(757, "osproc.nim");
	nimln(757, "osproc.nim");
	result = (NI)((NU64)(((NI) ((*p).Exitcode))) >> (NU64)(8));
	BeforeRet: ;	popFrame();
	return result;
}
N_NIMCALL(NI, peekexitcode_143513)(tprocess143203* p) {
	NI result;
	pid_t ret;
	NIM_BOOL b;
	nimfr("peekExitCode", "osproc.nim")
	result = 0;
	nimln(760, "osproc.nim");
	{
		nimln(698, "system.nim");
		nimln(698, "system.nim");
		if (!!(((*p).Exitcode == ((NI32) -3)))) goto LA3;
		nimln(760, "osproc.nim");
		nimln(760, "osproc.nim");
		result = ((NI) ((*p).Exitcode));
		goto BeforeRet;
	}	LA3: ;
	nimln(761, "osproc.nim");
	ret = waitpid((*p).Id, &(*p).Exitcode, WNOHANG);
	nimln(762, "osproc.nim");
	nimln(762, "osproc.nim");
	b = (ret == (*p).Id);
	nimln(763, "osproc.nim");
	{
		if (!b) goto LA7;
		nimln(763, "osproc.nim");
		result = -1;
	}	LA7: ;
	nimln(764, "osproc.nim");
	{
		nimln(764, "osproc.nim");
		if (!((*p).Exitcode == ((NI32) -3))) goto LA11;
		nimln(764, "osproc.nim");
		result = -1;
	}	goto LA9;
	LA11: ;
	{
		nimln(765, "osproc.nim");
		nimln(765, "osproc.nim");
		result = (NI)((NU64)(((NI) ((*p).Exitcode))) >> (NU64)(8));
	}	LA9: ;
	BeforeRet: ;	popFrame();
	return result;
}
N_NIMCALL(void, createstream_145264)(tstream141629** stream, NI32* handle, NU8 filemode) {
	FILE* f;
	tfilestream142109* LOC7;
	nimfr("createStream", "osproc.nim")
	f = 0;
	nimln(770, "osproc.nim");
	{
		NIM_BOOL LOC3;
		NI32 LOC6;
		nimln(770, "osproc.nim");
		nimln(770, "osproc.nim");
		LOC3 = 0;
		LOC3 = open_9211(&f, (*handle), filemode);
		if (!!(LOC3)) goto LA4;
		nimln(770, "osproc.nim");
		nimln(770, "osproc.nim");
		LOC6 = 0;
		LOC6 = oslasterror_99046();
		oserror_99005(LOC6);	}	LA4: ;
	nimln(771, "osproc.nim");
	nimln(771, "osproc.nim");
	LOC7 = 0;
	LOC7 = newfilestream_142168(f);
	unsureAsgnRef((void**) &(*stream), &LOC7->Sup);
	popFrame();
}
N_NIMCALL(tstream141629*, nospinputStream)(tprocess143203* p) {
	tstream141629* result;
	nimfr("inputStream", "osproc.nim")
	result = 0;
	nimln(774, "osproc.nim");
	{
		nimln(774, "osproc.nim");
		if (!((*p).Instream == NIM_NIL)) goto LA3;
		nimln(775, "osproc.nim");
		createstream_145264(&(*p).Instream, &(*p).Inhandle, ((NU8) 1));	}	LA3: ;
	nimln(776, "osproc.nim");
	nimln(776, "osproc.nim");
	result = (*p).Instream;
	goto BeforeRet;
	BeforeRet: ;	popFrame();
	return result;
}
N_NIMCALL(tstream141629*, nospoutputStream)(tprocess143203* p) {
	tstream141629* result;
	nimfr("outputStream", "osproc.nim")
	result = 0;
	nimln(779, "osproc.nim");
	{
		nimln(779, "osproc.nim");
		if (!((*p).Outstream == NIM_NIL)) goto LA3;
		nimln(780, "osproc.nim");
		createstream_145264(&(*p).Outstream, &(*p).Outhandle, ((NU8) 0));	}	LA3: ;
	nimln(781, "osproc.nim");
	nimln(781, "osproc.nim");
	result = (*p).Outstream;
	goto BeforeRet;
	BeforeRet: ;	popFrame();
	return result;
}
N_NIMCALL(tstream141629*, nosperrorStream)(tprocess143203* p) {
	tstream141629* result;
	nimfr("errorStream", "osproc.nim")
	result = 0;
	nimln(784, "osproc.nim");
	{
		nimln(784, "osproc.nim");
		if (!((*p).Errstream == NIM_NIL)) goto LA3;
		nimln(785, "osproc.nim");
		createstream_145264(&(*p).Errstream, &(*p).Errhandle, ((NU8) 0));	}	LA3: ;
	nimln(786, "osproc.nim");
	nimln(786, "osproc.nim");
	result = (*p).Errstream;
	goto BeforeRet;
	BeforeRet: ;	popFrame();
	return result;
}
N_NIMCALL(NI, nospexecCmd)(NimStringDesc* command) {
	NI result;
	int LOC1;
	nimfr("execCmd", "osproc.nim")
	result = 0;
	nimln(791, "osproc.nim");
	nimln(791, "osproc.nim");
	LOC1 = 0;
	LOC1 = system(command->data);
	result = ((NI) (LOC1));
	popFrame();
	return result;
}
N_NIMCALL(void, createfdset_145340)(fd_set* fd, TY144202* s, NI* m) {
	tprocess143203* i_145379;
	NI i_145392;
	nimfr("createFdSet", "osproc.nim")
	nimln(794, "osproc.nim");
	FD_ZERO(fd);	i_145379 = 0;
	nimln(1393, "system.nim");
	i_145392 = 0;
	nimln(1394, "system.nim");
	while (1) {
		nimln(1394, "system.nim");
		nimln(1394, "system.nim");
		if (!(i_145392 < s->Sup.len)) goto LA1;
		nimln(1395, "system.nim");
		if ((NU)(i_145392) >= (NU)(s->Sup.len)) raiseIndexError();
		i_145379 = s->data[i_145392];
		nimln(796, "osproc.nim");
		nimln(796, "osproc.nim");
		(*m) = (((*m) >= ((NI) ((*i_145379).Outhandle))) ? (*m) : ((NI) ((*i_145379).Outhandle)));
		nimln(797, "osproc.nim");
		FD_SET((*i_145379).Outhandle, fd);		nimln(1396, "system.nim");
		i_145392 = addInt(i_145392, 1);
	} LA1: ;
	popFrame();
}
N_NIMCALL(void, pruneprocessset_145395)(TY144202** s, fd_set* fd) {
	NI i;
	NI l;
	nimfr("pruneProcessSet", "osproc.nim")
	nimln(800, "osproc.nim");
	i = 0;
	nimln(801, "osproc.nim");
	nimln(801, "osproc.nim");
	l = (*s)->Sup.len;
	nimln(802, "osproc.nim");
	while (1) {
		nimln(802, "osproc.nim");
		if (!(i < l)) goto LA1;
		nimln(803, "osproc.nim");
		{
			int LOC4;
			NI TMP993;
			nimln(698, "system.nim");
			nimln(698, "system.nim");
			nimln(803, "osproc.nim");
			if ((NU)(i) >= (NU)((*s)->Sup.len)) raiseIndexError();
			LOC4 = 0;
			LOC4 = FD_ISSET((*(*s)->data[i]).Outhandle, fd);
			if (!!((LOC4 == ((NI32) 0)))) goto LA5;
			nimln(804, "osproc.nim");
			if ((NU)(i) >= (NU)((*s)->Sup.len)) raiseIndexError();
			nimln(804, "osproc.nim");
			TMP993 = subInt(l, 1);
			if ((NU)((NI64)(TMP993)) >= (NU)((*s)->Sup.len)) raiseIndexError();
			asgnRefNoCycle((void**) &(*s)->data[i], (*s)->data[(NI64)(TMP993)]);
			nimln(805, "osproc.nim");
			l = subInt(l, 1);
		}		goto LA2;
		LA5: ;
		{
			nimln(807, "osproc.nim");
			i = addInt(i, 1);
		}		LA2: ;
	} LA1: ;
	nimln(808, "osproc.nim");
	(*s) = (TY144202*) setLengthSeq(&((*s))->Sup, sizeof(tprocess143203*), l);
	popFrame();
}
static N_INLINE(NI, chckRange)(NI i, NI a, NI b) {
	NI result;
	result = 0;
	{
		NIM_BOOL LOC3;
		LOC3 = 0;
		LOC3 = (a <= i);
		if (!(LOC3)) goto LA4;
		LOC3 = (i <= b);
		LA4: ;
		if (!LOC3) goto LA5;
		result = i;
		goto BeforeRet;
	}	goto LA1;
	LA5: ;
	{
		raiseRangeError(((NI64) (i)));	}	LA1: ;
	BeforeRet: ;	return result;
}
N_NIMCALL(NI, select_144502)(TY144202** readfds, NI timeout) {
	NI result;
	struct timeval tv;
	NI TMP994;
	fd_set rd;
	NI m;
	nimfr("select", "osproc.nim")
	result = 0;
	memset((void*)&tv, 0, sizeof(tv));
	nimln(812, "osproc.nim");
	tv.tv_sec = 0;
	nimln(813, "osproc.nim");
	nimln(813, "osproc.nim");
	TMP994 = mulInt(timeout, 1000);
	tv.tv_usec = (NI64)(TMP994);
	memset((void*)&rd, 0, sizeof(rd));
	nimln(816, "osproc.nim");
	m = 0;
	nimln(817, "osproc.nim");
	createfdset_145340(&rd, (*readfds), &m);	nimln(819, "osproc.nim");
	{
		NI TMP995;
		int LOC5;
		nimln(698, "system.nim");
		nimln(698, "system.nim");
		if (!!((timeout == -1))) goto LA3;
		nimln(820, "osproc.nim");
		nimln(820, "osproc.nim");
		nimln(820, "osproc.nim");
		TMP995 = addInt(m, 1);
		LOC5 = 0;
		LOC5 = select(((int)chckRange((NI64)(TMP995), ((int) (-2147483647 -1)), ((int) 2147483647))), &rd, NIM_NIL, NIM_NIL, &tv);
		result = ((NI) (LOC5));
	}	goto LA1;
	LA3: ;
	{
		NI TMP996;
		int LOC7;
		nimln(822, "osproc.nim");
		nimln(822, "osproc.nim");
		nimln(822, "osproc.nim");
		TMP996 = addInt(m, 1);
		LOC7 = 0;
		LOC7 = select(((int)chckRange((NI64)(TMP996), ((int) (-2147483647 -1)), ((int) 2147483647))), &rd, NIM_NIL, NIM_NIL, NIM_NIL);
		result = ((NI) (LOC7));
	}	LA1: ;
	nimln(824, "osproc.nim");
	pruneprocessset_145395(readfds, &rd);	popFrame();
	return result;
}
N_NIMCALL(void, execcmdex_145602)(NimStringDesc* command, NU8 options, TY75888* Result) {
	tprocess143203* p;
	tstream141629* outp;
	NimStringDesc* line;
	nimfr("execCmdEx", "osproc.nim")
	nimln(833, "osproc.nim");
	p = startcmd_143428(command, options);
	nimln(834, "osproc.nim");
	outp = nospoutputStream(p);
	nimln(835, "osproc.nim");
	unsureAsgnRef((void**) &(*Result).Field0, copyString(TMP997.Field0));
	(*Result).Field1 = TMP997.Field1;
	nimln(836, "osproc.nim");
	nimln(836, "osproc.nim");
	line = rawNewString(120);
	nimln(837, "osproc.nim");
	while (1) {
		nimln(838, "osproc.nim");
		{
			NIM_BOOL LOC4;
			nimln(838, "osproc.nim");
			LOC4 = 0;
			LOC4 = readline_141973(outp, &line);
			if (!LOC4) goto LA5;
			nimln(839, "osproc.nim");
			(*Result).Field0 = resizeString((*Result).Field0, line->Sup.len + 0);
appendString((*Result).Field0, line);
			nimln(840, "osproc.nim");
			(*Result).Field0 = resizeString((*Result).Field0, 1);
appendString((*Result).Field0, ((NimStringDesc*) &TMP962));
		}		goto LA2;
		LA5: ;
		{
			nimln(842, "osproc.nim");
			(*Result).Field1 = peekexitcode_143513(p);
			nimln(843, "osproc.nim");
			{
				nimln(698, "system.nim");
				nimln(698, "system.nim");
				if (!!(((*Result).Field1 == -1))) goto LA10;
				nimln(843, "osproc.nim");
				goto LA1;
			}			LA10: ;
		}		LA2: ;
	} LA1: ;
	nimln(844, "osproc.nim");
	nospclose(p);	popFrame();
}N_NOINLINE(void, pureosprocInit)(void) {
	nimfr("osproc", "osproc.nim")
	popFrame();
}

N_NOINLINE(void, pureosprocDatInit)(void) {
static TNimNode* TMP950[8];
static TNimNode TMP921[9];
NTI143203.size = sizeof(tprocess143203);
NTI143203.kind = 17;
NTI143203.base = (&NTI1009);
NTI143203.flags = 2;
TMP950[0] = &TMP921[1];
TMP921[1].kind = 1;
TMP921[1].offset = offsetof(tprocess143203, Inhandle);
TMP921[1].typ = (&NTI9008);
TMP921[1].name = "inHandle";
TMP950[1] = &TMP921[2];
TMP921[2].kind = 1;
TMP921[2].offset = offsetof(tprocess143203, Outhandle);
TMP921[2].typ = (&NTI9008);
TMP921[2].name = "outHandle";
TMP950[2] = &TMP921[3];
TMP921[3].kind = 1;
TMP921[3].offset = offsetof(tprocess143203, Errhandle);
TMP921[3].typ = (&NTI9008);
TMP921[3].name = "errHandle";
TMP950[3] = &TMP921[4];
TMP921[4].kind = 1;
TMP921[4].offset = offsetof(tprocess143203, Instream);
TMP921[4].typ = (&NTI141627);
TMP921[4].name = "inStream";
TMP950[4] = &TMP921[5];
TMP921[5].kind = 1;
TMP921[5].offset = offsetof(tprocess143203, Outstream);
TMP921[5].typ = (&NTI141627);
TMP921[5].name = "outStream";
TMP950[5] = &TMP921[6];
TMP921[6].kind = 1;
TMP921[6].offset = offsetof(tprocess143203, Errstream);
TMP921[6].typ = (&NTI141627);
TMP921[6].name = "errStream";
TMP950[6] = &TMP921[7];
TMP921[7].kind = 1;
TMP921[7].offset = offsetof(tprocess143203, Id);
TMP921[7].typ = (&NTI91457);
TMP921[7].name = "id";
TMP950[7] = &TMP921[8];
TMP921[8].kind = 1;
TMP921[8].offset = offsetof(tprocess143203, Exitcode);
TMP921[8].typ = (&NTI3809);
TMP921[8].name = "exitCode";
TMP921[0].len = 8; TMP921[0].kind = 2; TMP921[0].sons = &TMP950[0];
NTI143203.node = &TMP921[0];
NTI143205.size = sizeof(tprocess143203*);
NTI143205.kind = 22;
NTI143205.base = (&NTI143203);
NTI143205.flags = 2;
NTI143205.marker = TMP952;
NTI144202.size = sizeof(TY144202*);
NTI144202.kind = 24;
NTI144202.base = (&NTI143205);
NTI144202.flags = 2;
NTI144202.marker = TMP953;
}

