/* Generated by Nim Compiler v0.18.0 */
/*   (c) 2018 Andreas Rumpf */
/* The generated code is subject to the original license. */
#define NIM_NEW_MANGLING_RULES
#define NIM_INTBITS 64

#include "nimbase.h"
#include <string.h>
#include <stdio.h>
#include <io.h>
#undef LANGUAGE_C
#undef MIPSEB
#undef MIPSEL
#undef PPC
#undef R3000
#undef R4000
#undef i386
#undef linux
#undef mips
#undef near
#undef powerpc
#undef unix
typedef struct tyObject_Table_Uofq2l1MbIBlIicSEZkj7w tyObject_Table_Uofq2l1MbIBlIicSEZkj7w;
typedef struct tySequence_7s5HyddQ0f9bxMNILHrXwJQ tySequence_7s5HyddQ0f9bxMNILHrXwJQ;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TGenericSeq TGenericSeq;
typedef struct NimStringDesc NimStringDesc;
typedef struct tyObject_CONSOLE_SCREEN_BUFFER_INFO_r6d5R6U7A9aP1xHUbo2o04A tyObject_CONSOLE_SCREEN_BUFFER_INFO_r6d5R6U7A9aP1xHUbo2o04A;
typedef struct tyObject_COORD_38Oq1GgFPIYv2ksRi9c0fZA tyObject_COORD_38Oq1GgFPIYv2ksRi9c0fZA;
typedef struct tyObject_SMALL_RECT_GSDbaE1SdabWptSZYJG3XA tyObject_SMALL_RECT_GSDbaE1SdabWptSZYJG3XA;
typedef struct tyTuple_kuMQ1fbjJlHtwKTmBGAe6g tyTuple_kuMQ1fbjJlHtwKTmBGAe6g;
struct tyObject_Table_Uofq2l1MbIBlIicSEZkj7w {
tySequence_7s5HyddQ0f9bxMNILHrXwJQ* data;
NI counter;
};
typedef NU8 tyEnum_TNimKind_jIBKr1ejBgsfM33Kxw4j7A;
typedef NU8 tySet_tyEnum_TNimTypeFlag_v8QUszD1sWlSIWZz7mC4bQ;
typedef N_NIMCALL_PTR(void, tyProc_ojoeKfW4VYIm36I9cpDTQIg) (void* p, NI op);
typedef N_NIMCALL_PTR(void*, tyProc_WSm2xU5ARYv9aAR4l0z9c9auQ) (void* p);
struct TNimType {
NI size;
tyEnum_TNimKind_jIBKr1ejBgsfM33Kxw4j7A kind;
tySet_tyEnum_TNimTypeFlag_v8QUszD1sWlSIWZz7mC4bQ flags;
TNimType* base;
TNimNode* node;
void* finalizer;
tyProc_ojoeKfW4VYIm36I9cpDTQIg marker;
tyProc_WSm2xU5ARYv9aAR4l0z9c9auQ deepcopy;
};
typedef NU8 tyEnum_TNimNodeKind_unfNsxrcATrufDZmpBq4HQ;
struct TNimNode {
tyEnum_TNimNodeKind_unfNsxrcATrufDZmpBq4HQ kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
typedef N_NIMCALL_PTR(void, tyProc_T4eqaYlFJYZUv9aG9b1TV0bQ) (void);
typedef N_STDCALL_PTR(NI, tyProc_zP2zGemcuVRvOUE82f9a0Pw) (NI32 nStdHandle);
struct TGenericSeq {
NI len;
NI reserved;
};
struct NimStringDesc {
  TGenericSeq Sup;
NIM_CHAR data[SEQ_DECL_SIZE];
};
typedef N_STDCALL_PTR(NI32, tyProc_oew1DfaGl5XhHmnBK0HYXQ) (NI hSourceProcessHandle, NI hSourceHandle, NI hTargetProcessHandle, NI* lpTargetHandle, NI32 dwDesiredAccess, NI32 bInheritHandle, NI32 dwOptions);
typedef N_STDCALL_PTR(NI, tyProc_uryidYWkntM7ddjZSyxvyQ) (void);
struct tyObject_COORD_38Oq1GgFPIYv2ksRi9c0fZA {
NI16 X;
NI16 Y;
};
struct tyObject_SMALL_RECT_GSDbaE1SdabWptSZYJG3XA {
NI16 Left;
NI16 Top;
NI16 Right;
NI16 Bottom;
};
struct tyObject_CONSOLE_SCREEN_BUFFER_INFO_r6d5R6U7A9aP1xHUbo2o04A {
tyObject_COORD_38Oq1GgFPIYv2ksRi9c0fZA dwSize;
tyObject_COORD_38Oq1GgFPIYv2ksRi9c0fZA dwCursorPosition;
NI16 wAttributes;
tyObject_SMALL_RECT_GSDbaE1SdabWptSZYJG3XA srWindow;
tyObject_COORD_38Oq1GgFPIYv2ksRi9c0fZA dwMaximumWindowSize;
};
typedef N_STDCALL_PTR(NI32, tyProc_vjGHiWUJwFzOgSxDffBb6Q) (NI hConsoleOutput, tyObject_CONSOLE_SCREEN_BUFFER_INFO_r6d5R6U7A9aP1xHUbo2o04A* lpConsoleScreenBufferInfo);
typedef NU8 tySet_tyEnum_Style_NXKayqTLMsAibFwNceBlpA;
typedef NU8 tyEnum_Style_NXKayqTLMsAibFwNceBlpA;
typedef N_STDCALL_PTR(NI32, tyProc_oPCjp4xTgEl9a8fqSzOv8lw) (NI hConsoleOutput, NI16 wAttributes);
typedef NU8 tyEnum_ForegroundColor_ez9ah4IgQc0AbdW68acioDg;
typedef NI tyArray_e7dTfxuKO1YfQGLA3anCHg[8];
struct tyTuple_kuMQ1fbjJlHtwKTmBGAe6g {
NI Field0;
NI Field1;
NimStringDesc* Field2;
};
struct tySequence_7s5HyddQ0f9bxMNILHrXwJQ {
  TGenericSeq Sup;
  tyTuple_kuMQ1fbjJlHtwKTmBGAe6g data[SEQ_DECL_SIZE];
};
N_NIMCALL(void, nimGCvisit)(void* d, NI op);
static N_NIMCALL(void, TM_CN3raB9atujkEiPpxYAdlgQ_2)(void);
N_NIMCALL(void, nimRegisterGlobalMarker)(tyProc_T4eqaYlFJYZUv9aG9b1TV0bQ markerProc);
N_LIB_PRIVATE N_NIMCALL(void, initTable_hbZSiAd9cqCGH3DbHGYkdLA)(NI initialSize, tyObject_Table_Uofq2l1MbIBlIicSEZkj7w* Result);
static N_NIMCALL(void, TM_CN3raB9atujkEiPpxYAdlgQ_3)(void);
N_NIMCALL(void*, nimLoadLibrary)(NimStringDesc* path);
N_NOINLINE(void, nimLoadLibraryError)(NimStringDesc* path);
N_NIMCALL(void*, nimGetProcAddr)(void* lib, NCSTRING name);
N_LIB_PRIVATE N_NIMCALL(NI16, getAttributes_PnaHeFPQ8QlJWgnEjaRyCg)(NI h);
N_LIB_PRIVATE N_NIMCALL(int, getFileHandle_bZ9c2yojtXoDTUpfyl8h8Rg)(FILE* f);
tyObject_Table_Uofq2l1MbIBlIicSEZkj7w colorsFGCache_vwgCRmYzVoEupaR2JWCX7g;
extern TNimType NTI_Uofq2l1MbIBlIicSEZkj7w_;
tyObject_Table_Uofq2l1MbIBlIicSEZkj7w colorsBGCache_gnuRXfqd9aMnSUSJh0Fdi9aw;
NIM_BOOL trueColorIsSupported_kn9b0UIbK9cVbUGz9cl7kNkkw;
NIM_BOOL trueColorIsEnabled_Y9c1UaDywi8o8DHl8VRJG9cQ;
NIM_BOOL fgSetColor_az9a3BILKewIOic9a2Ah9a4tQ;
NI hStdout_Q6LBG8sK28zNgldP5VHBBA;
NI hStderr_6C9cOGHD37RMptVLFSz9ckEQ;
NI hStdoutTemp_Frgc1hZhHtHmhQpuiOhypw;
extern tyProc_zP2zGemcuVRvOUE82f9a0Pw Dl_133620_;
static void* TM_CN3raB9atujkEiPpxYAdlgQ_4;
tyProc_oew1DfaGl5XhHmnBK0HYXQ Dl_269839_;
tyProc_uryidYWkntM7ddjZSyxvyQ Dl_269849_;
NI hStderrTemp_lkKJFEg9bMgFJ9bv6dAcceSQ;
NI16 oldStdoutAttr_vkHOZle9bmebv77fjQpEGqw;
tyProc_vjGHiWUJwFzOgSxDffBb6Q Dl_269851_;
NI16 oldStderrAttr_ZXyw45dCi8lkCMLSUcaIBw;
tyProc_oPCjp4xTgEl9a8fqSzOv8lw Dl_269960_;
STRING_LITERAL(TM_CN3raB9atujkEiPpxYAdlgQ_6, "kernel32", 8);
STRING_LITERAL(TM_CN3raB9atujkEiPpxYAdlgQ_7, "kernel32", 8);
NIM_CONST tyArray_e7dTfxuKO1YfQGLA3anCHg lookup_iBTamPHB6H8lJIzDyv8epw = {((NI) 0),
((NI) 4),
((NI) 2),
((NI) 6),
((NI) 1),
((NI) 5),
((NI) 3),
((NI) 7)}
;
static N_NIMCALL(void, TM_CN3raB9atujkEiPpxYAdlgQ_2)(void) {
	nimGCvisit((void*)colorsFGCache_vwgCRmYzVoEupaR2JWCX7g.data, 0);
}
static N_NIMCALL(void, TM_CN3raB9atujkEiPpxYAdlgQ_3)(void) {
	nimGCvisit((void*)colorsBGCache_gnuRXfqd9aMnSUSJh0Fdi9aw.data, 0);
}

N_LIB_PRIVATE N_NIMCALL(NI16, getAttributes_PnaHeFPQ8QlJWgnEjaRyCg)(NI h) {
	NI16 result;
	tyObject_CONSOLE_SCREEN_BUFFER_INFO_r6d5R6U7A9aP1xHUbo2o04A c;
{	result = (NI16)0;
	memset((void*)(&c), 0, sizeof(c));
	{
		NI32 T3_;
		T3_ = (NI32)0;
		T3_ = Dl_269851_(h, (&c));
		if (!!((T3_ == ((NI32) 0)))) goto LA4_;
		result = c.wAttributes;
		goto BeforeRet_;
	}
	LA4_: ;
	result = ((NI16) 112);
	goto BeforeRet_;
	}BeforeRet_: ;
	return result;
}

N_LIB_PRIVATE N_NIMCALL(void, setStyle_GclWadYUouE9aXrU2KZQtoQ)(FILE* f, tySet_tyEnum_Style_NXKayqTLMsAibFwNceBlpA style) {
	NI h;
	NI16 old;
	NI16 T6_;
	NI16 a;
	NI32 T23_;
	{
		if (!(f == stderr)) goto LA3_;
		h = hStderr_6C9cOGHD37RMptVLFSz9ckEQ;
	}
	goto LA1_;
	LA3_: ;
	{
		h = hStdout_Q6LBG8sK28zNgldP5VHBBA;
	}
	LA1_: ;
	T6_ = (NI16)0;
	T6_ = getAttributes_PnaHeFPQ8QlJWgnEjaRyCg(h);
	old = (NI16)(T6_ & ((NI16) 119));
	a = ((NI16) 0);
	{
		if (!((style &(1U<<((NU)((((tyEnum_Style_NXKayqTLMsAibFwNceBlpA) 1)- 1))&7U)))!=0)) goto LA9_;
		a = (NI16)(a | ((NI16) 8));
	}
	LA9_: ;
	{
		if (!((style &(1U<<((NU)((((tyEnum_Style_NXKayqTLMsAibFwNceBlpA) 5)- 1))&7U)))!=0)) goto LA13_;
		a = (NI16)(a | ((NI16) 128));
	}
	LA13_: ;
	{
		if (!((style &(1U<<((NU)((((tyEnum_Style_NXKayqTLMsAibFwNceBlpA) 7)- 1))&7U)))!=0)) goto LA17_;
		a = (NI16)(a | ((NI16) 16384));
	}
	LA17_: ;
	{
		if (!((style &(1U<<((NU)((((tyEnum_Style_NXKayqTLMsAibFwNceBlpA) 4)- 1))&7U)))!=0)) goto LA21_;
		a = (NI16)(a | ((NI16) -32768));
	}
	LA21_: ;
	T23_ = (NI32)0;
	T23_ = Dl_269960_(h, (NI16)(old | a));
	T23_;
}

N_LIB_PRIVATE N_NIMCALL(void, resetAttributes_6DYwjcHkAz0BG9bT24wH4dw)(FILE* f) {
	{
		NI32 T5_;
		if (!(f == stderr)) goto LA3_;
		T5_ = (NI32)0;
		T5_ = Dl_269960_(hStderr_6C9cOGHD37RMptVLFSz9ckEQ, oldStderrAttr_ZXyw45dCi8lkCMLSUcaIBw);
		T5_;
	}
	goto LA1_;
	LA3_: ;
	{
		NI32 T7_;
		T7_ = (NI32)0;
		T7_ = Dl_269960_(hStdout_Q6LBG8sK28zNgldP5VHBBA, oldStdoutAttr_vkHOZle9bmebv77fjQpEGqw);
		T7_;
	}
	LA1_: ;
}

N_LIB_PRIVATE N_NIMCALL(void, setForegroundColor_Tw7yxMupneOmAicqiYt3NA)(FILE* f, tyEnum_ForegroundColor_ez9ah4IgQc0AbdW68acioDg fg, NIM_BOOL bright) {
	NI h;
	NI16 old;
	NI16 T6_;
	NI32 T11_;
	{
		if (!(f == stderr)) goto LA3_;
		h = hStderr_6C9cOGHD37RMptVLFSz9ckEQ;
	}
	goto LA1_;
	LA3_: ;
	{
		h = hStdout_Q6LBG8sK28zNgldP5VHBBA;
	}
	LA1_: ;
	T6_ = (NI16)0;
	T6_ = getAttributes_PnaHeFPQ8QlJWgnEjaRyCg(h);
	old = (NI16)(T6_ & ((NI16) -8));
	{
		if (!bright) goto LA9_;
		old = (NI16)(old | ((NI16) 8));
	}
	LA9_: ;
	T11_ = (NI32)0;
	T11_ = Dl_269960_(h, ((NI16)(NU16)(NU)((NI)(((NI) (old)) | lookup_iBTamPHB6H8lJIzDyv8epw[(fg)- 30]))));
	T11_;
}

N_LIB_PRIVATE N_NIMCALL(NIM_BOOL, isatty_POoHvosCWg3Yl5ieYeLHrg)(FILE* f) {
	NIM_BOOL result;
	int T1_;
	int T2_;
	result = (NIM_BOOL)0;
	T1_ = (int)0;
	T1_ = getFileHandle_bZ9c2yojtXoDTUpfyl8h8Rg(f);
	T2_ = (int)0;
	T2_ = _isatty(T1_);
	result = !((T2_ == ((NI32) 0)));
	return result;
}
NIM_EXTERNC N_NOINLINE(void, stdlib_terminalInit000)(void) {
nimRegisterGlobalMarker(TM_CN3raB9atujkEiPpxYAdlgQ_2);
nimRegisterGlobalMarker(TM_CN3raB9atujkEiPpxYAdlgQ_3);
	initTable_hbZSiAd9cqCGH3DbHGYkdLA(((NI) 64), (&colorsFGCache_vwgCRmYzVoEupaR2JWCX7g));
	initTable_hbZSiAd9cqCGH3DbHGYkdLA(((NI) 64), (&colorsBGCache_gnuRXfqd9aMnSUSJh0Fdi9aw));
	{
		hStdoutTemp_Frgc1hZhHtHmhQpuiOhypw = Dl_133620_(((NI32) -11));
		{
			NI T4_;
			NI T5_;
			NI32 T6_;
			T4_ = (NI)0;
			T4_ = Dl_269849_();
			T5_ = (NI)0;
			T5_ = Dl_269849_();
			T6_ = (NI32)0;
			T6_ = Dl_269839_(T4_, hStdoutTemp_Frgc1hZhHtHmhQpuiOhypw, T5_, (&hStdout_Q6LBG8sK28zNgldP5VHBBA), ((NI32) 0), ((NI32) 1), ((NI32) 2));
			if (!(T6_ == ((NI32) 0))) goto LA7_;
		}
		LA7_: ;
		hStderrTemp_lkKJFEg9bMgFJ9bv6dAcceSQ = Dl_133620_(((NI32) -12));
		{
			NI T11_;
			NI T12_;
			NI32 T13_;
			T11_ = (NI)0;
			T11_ = Dl_269849_();
			T12_ = (NI)0;
			T12_ = Dl_269849_();
			T13_ = (NI32)0;
			T13_ = Dl_269839_(T11_, hStderrTemp_lkKJFEg9bMgFJ9bv6dAcceSQ, T12_, (&hStderr_6C9cOGHD37RMptVLFSz9ckEQ), ((NI32) 0), ((NI32) 1), ((NI32) 2));
			if (!(T13_ == ((NI32) 0))) goto LA14_;
		}
		LA14_: ;
	}
	oldStdoutAttr_vkHOZle9bmebv77fjQpEGqw = getAttributes_PnaHeFPQ8QlJWgnEjaRyCg(hStdout_Q6LBG8sK28zNgldP5VHBBA);
	oldStderrAttr_ZXyw45dCi8lkCMLSUcaIBw = getAttributes_PnaHeFPQ8QlJWgnEjaRyCg(hStderr_6C9cOGHD37RMptVLFSz9ckEQ);
}

NIM_EXTERNC N_NOINLINE(void, stdlib_terminalDatInit000)(void) {
if (!((TM_CN3raB9atujkEiPpxYAdlgQ_4 = nimLoadLibrary((NimStringDesc*) &TM_CN3raB9atujkEiPpxYAdlgQ_6))
)) nimLoadLibraryError((NimStringDesc*) &TM_CN3raB9atujkEiPpxYAdlgQ_7);
	Dl_269839_ = (tyProc_oew1DfaGl5XhHmnBK0HYXQ) nimGetProcAddr(TM_CN3raB9atujkEiPpxYAdlgQ_4, "DuplicateHandle");
	Dl_269849_ = (tyProc_uryidYWkntM7ddjZSyxvyQ) nimGetProcAddr(TM_CN3raB9atujkEiPpxYAdlgQ_4, "GetCurrentProcess");
	Dl_269851_ = (tyProc_vjGHiWUJwFzOgSxDffBb6Q) nimGetProcAddr(TM_CN3raB9atujkEiPpxYAdlgQ_4, "GetConsoleScreenBufferInfo");
	Dl_269960_ = (tyProc_oPCjp4xTgEl9a8fqSzOv8lw) nimGetProcAddr(TM_CN3raB9atujkEiPpxYAdlgQ_4, "SetConsoleTextAttribute");
}

